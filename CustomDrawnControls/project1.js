var pas={},rtl={version:10101,quiet:!1,debug_load_units:!1,debug_rtti:!1,debug:function(){!rtl.quiet&&console&&console.log&&console.log(arguments)},error:function(t){throw rtl.debug("Error: ",t),t},warn:function(t){rtl.debug("Warn: ",t)},checkVersion:function(t){if(rtl.version!=t)throw"expected rtl version "+t+", but found "+rtl.version},hasString:function(t){return rtl.isString(t)&&t.length>0},isArray:function(t){return Array.isArray(t)},isFunction:function(t){return"function"==typeof t},isModule:function(t){return rtl.isObject(t)&&rtl.hasString(t.$name)&&pas[t.$name]===t},isImplementation:function(t){return rtl.isObject(t)&&rtl.isModule(t.$module)&&t.$module.$impl===t},isNumber:function(t){return"number"==typeof t},isObject:function(t){return"object"==typeof t&&null!=t},isString:function(t){return"string"==typeof t},getNumber:function(t){return"number"==typeof t?t:NaN},getChar:function(t){return"string"==typeof t&&1===t.length?t:""},getObject:function(t){return"object"==typeof t||"function"==typeof t?t:null},isPasClass:function(t){return rtl.isObject(t)&&t.hasOwnProperty("$classname")&&rtl.isObject(t.$module)},isPasClassInstance:function(t){return rtl.isObject(t)&&rtl.isPasClass(t.$class)},hexStr:function(t,e){return("000000000000000"+t.toString(16).toUpperCase()).slice(-e)},m_loading:0,m_loading_intf:1,m_intf_loaded:2,m_loading_impl:3,m_initializing:4,m_initialized:5,module:function(t,e,i,s,n){rtl.debug_load_units&&rtl.debug('rtl.module name="'+t+'" intfuses='+e+" impluses="+s+" hasimplcode="+rtl.isFunction(n)),rtl.hasString(t)||rtl.error('invalid module name "'+t+'"'),rtl.isArray(e)||rtl.error('invalid interface useslist of "'+t+'"'),rtl.isFunction(i)||rtl.error('invalid interface code of "'+t+'"'),null==s||rtl.isArray(s)||rtl.error('invalid implementation useslist of "'+t+'"'),null==n||rtl.isFunction(n)||rtl.error('invalid implementation code of "'+t+'"'),pas[t]&&rtl.error('module "'+t+'" is already registered');var r=pas[t]={$name:t,$intfuseslist:e,$impluseslist:s,$state:rtl.m_loading,$intfcode:i,$implcode:n,$impl:null,$rtti:Object.create(rtl.tSectionRTTI)};r.$rtti.$module=r,n&&(r.$impl={$module:r,$rtti:r.$rtti})},exitcode:0,run:function(t){function e(){rtl.hasString(t)||(t="program"),rtl.debug_load_units&&rtl.debug('rtl.run module="'+t+'"'),rtl.initRTTI();var e=pas[t];if(e||rtl.error('rtl.run module "'+t+'" missing'),rtl.loadintf(e),rtl.loadimpl(e),"program"==t){rtl.debug_load_units&&rtl.debug("running $main");var i=pas.program.$main();rtl.isNumber(i)&&(rtl.exitcode=i)}}if(rtl.showUncaughtExceptions)try{e()}catch(t){var i=t.hasOwnProperty("$class")?t.$class.$classname:"";i+=(i?": ":"")+(t.hasOwnProperty("fMessage")?t.fMessage:t),alert("Uncaught Exception : "+i),rtl.exitCode=216}else e();return rtl.exitcode},loadintf:function(t){t.$state>rtl.m_loading_intf||(rtl.debug_load_units&&rtl.debug('loadintf: "'+t.$name+'"'),t.$state===rtl.m_loading_intf&&rtl.error('unit cycle detected "'+t.$name+'"'),t.$state=rtl.m_loading_intf,rtl.loaduseslist(t,t.$intfuseslist,rtl.loadintf),rtl.debug_load_units&&rtl.debug('loadintf: run intf of "'+t.$name+'"'),t.$intfcode(t.$intfuseslist),t.$state=rtl.m_intf_loaded)},loaduseslist:function(t,e,i){if(null!=e)for(var s in e){var n=e[s];rtl.debug_load_units&&rtl.debug('loaduseslist of "'+t.$name+'" uses="'+n+'"'),null==pas[n]&&rtl.error('module "'+t.$name+'" misses "'+n+'"'),i(pas[n])}},loadimpl:function(t){t.$state>=rtl.m_loading_impl||(t.$state<rtl.m_intf_loaded&&rtl.error('loadimpl: interface not loaded of "'+t.$name+'"'),rtl.debug_load_units&&rtl.debug('loadimpl: load uses of "'+t.$name+'"'),t.$state=rtl.m_loading_impl,rtl.loaduseslist(t,t.$impluseslist,rtl.loadintf),rtl.loaduseslist(t,t.$intfuseslist,rtl.loadimpl),rtl.loaduseslist(t,t.$impluseslist,rtl.loadimpl),rtl.debug_load_units&&rtl.debug('loadimpl: run impl of "'+t.$name+'"'),rtl.isFunction(t.$implcode)&&t.$implcode(t.$impluseslist),rtl.debug_load_units&&rtl.debug('loadimpl: run init of "'+t.$name+'"'),t.$state=rtl.m_initializing,rtl.isFunction(t.$init)&&t.$init(),t.$state=rtl.m_initialized)},createCallback:function(t,e){var i;return(i="string"==typeof e?function(){return t[e].apply(t,arguments)}:function(){return e.apply(t,arguments)}).scope=t,i.fn=e,i},cloneCallback:function(t){return rtl.createCallback(t.scope,t.fn)},eqCallback:function(t,e){return t==e||null!=t&&null!=e&&t.fn&&t.scope===e.scope&&t.fn==e.fn},initClass:function(t,e,i,s){e[i]=t,t.$class=t,t.$classname=i,e.$module&&e.$module.$impl===e&&(e=e.$module),t.$parent=e,t.$fullname=e.$name+"."+i,rtl.isModule(e)?(t.$module=e,t.$name=i):(t.$module=e.$module,t.$name=e.name+"."+i),rtl.debug_rtti&&rtl.debug("initClass "+t.$fullname);var n=t.$module.$rtti.$Class(t.$name,{class:t,module:e});t.$rtti=n,rtl.isObject(t.$ancestor)&&(n.ancestor=t.$ancestor.$rtti),n.ancestor||(n.ancestor=null),s.call(t)},createClass:function(t,e,i,s){var n=null;null!=i?(n=Object.create(i)).$ancestor=i:((n={}).$create=function(t,e){null==e&&(e=[]);var i=Object.create(this);i.$init();try{i[t].apply(i,e),i.AfterConstruction()}catch(t){throw i.Destroy&&i.Destroy(),i.$final(),t}return i},n.$destroy=function(t){this.BeforeDestruction(),this[t]&&this[t](),this.$final()}),rtl.initClass(n,t,e,s)},createClassExt:function(t,e,i,s,n){var r=null;(r=Object.create(i)).$create=function(t,e){null==e&&(e=[]);var i=null;(i=s.length>0?this[s](t,e):Object.create(this)).$init&&i.$init();try{i[t].apply(i,e),i.AfterConstruction&&i.AfterConstruction()}catch(t){throw i.Destroy&&i.Destroy(),i.$final&&this.$final(),t}return i},r.$destroy=function(t){this.BeforeDestruction&&this.BeforeDestruction(),this[t]&&this[t](),this.$final&&this.$final()},rtl.initClass(r,t,e,n)},tObjectDestroy:"Destroy",free:function(t,e){null!=t[e]&&(t[e].$destroy(rtl.tObjectDestroy),t[e]=null)},freeLoc:function(t){if(null!=t)return t.$destroy(rtl.tObjectDestroy),null},is:function(t,e){return e.isPrototypeOf(t)||t===e},isExt:function(t,e,i){return null!=t&&(("object"==typeof e||"function"==typeof e)&&(t===e?1!==i&&(2!==i||rtl.isPasClass(t)):e.isPrototypeOf&&e.isPrototypeOf(t)?1===i?rtl.isPasClassInstance(t):2!==i||rtl.isPasClass(t):"function"==typeof e&&t instanceof e))},Exception:null,EInvalidCast:null,EAbstractError:null,ERangeError:null,raiseE:function(t){var e=rtl[t];if(null==e){var i=pas.SysUtils;i||(i=pas.sysutils),i&&((e=i[t])||(e=i[t.toLowerCase()]),e||(e=i.Exception),e||(e=i.exception))}if(e){if(e.Create)throw e.$create("Create");if(e.create)throw e.$create("create")}if("EInvalidCast"===t)throw"invalid type cast";if("EAbstractError"===t)throw"Abstract method called";if("ERangeError"===t)throw"range error";throw t},as:function(t,e){if(null===t||rtl.is(t,e))return t;rtl.raiseE("EInvalidCast")},asExt:function(t,e,i){if(null===t||rtl.isExt(t,e,i))return t;rtl.raiseE("EInvalidCast")},createInterface:function(t,e,i,s,n,r){var o=n?Object.create(n):{};if(t[e]=o,o.$module=t,o.$name=e,o.$fullname=t.$name+"."+e,o.$guid=i,o.$guidr=null,o.$names=s||[],rtl.isFunction(r)){rtl.debug_rtti&&rtl.debug("createInterface "+o.$fullname);var a=o.$module.$rtti.$Interface(e,{interface:o,module:t});o.$rtti=a,n&&(a.ancestor=n.$rtti),a.ancestor||(a.ancestor=null),r.call(o)}return o},strToGUIDR:function(t,e){var i=0;function s(e){var s=t.substr(i,e);return i+=e,parseInt(s,16)}i+=1,e.D1=s(8),i+=1,e.D2=s(4),i+=1,e.D3=s(4),i+=1,e.D4||(e.D4=[]),e.D4[0]=s(2),e.D4[1]=s(2),i+=1;for(var n=2;n<8;n++)e.D4[n]=s(2);return e},guidrToStr:function(t){if(t.$intf)return t.$intf.$guid;for(var e=rtl.hexStr,i="{"+e(t.D1,8)+"-"+e(t.D2,4)+"-"+e(t.D3,4)+"-"+e(t.D4[0],2)+e(t.D4[1],2)+"-",s=2;s<8;s++)i+=e(t.D4[s],2);return i+="}"},createTGUID:function(t){var e=pas.System?pas.System.TGuid:pas.system.tguid;return rtl.strToGUIDR(t,new e)},getIntfGUIDR:function(t){if(!t)return null;if(!t.$guidr){var e=rtl.createTGUID(t.$guid);t.hasOwnProperty("$guid")||(t=Object.getPrototypeOf(t)),e.$intf=t,t.$guidr=e}return t.$guidr},addIntf:function(t,e,i){function s(t){return"function"==typeof t?function(){return t.apply(this.$o,arguments)}:function(){rtl.raiseE("EAbstractError")}}i||(i={});var n=e,r=Object.create(n);t.hasOwnProperty("$intfmaps")||(t.$intfmaps={}),t.$intfmaps[e.$guid]=r;do{var o=n.$names;if(!o)break;for(var a=0;a<o.length;a++){var l=o[a],h=i[l];h||(h=l),r[l]=s(t[h])}n=Object.getPrototypeOf(n)}while(null!=n)},getIntfG:function(t,e,i){if(!t)return null;var s=t.$intfmaps;if(!s)return null;var n=s[e];if(!n)return null;if("function"==typeof n)return n.call(t);var r=null;if(t.$interfaces&&(r=t.$interfaces[e]),r||((r=Object.create(n)).$o=t,t.$interfaces||(t.$interfaces={}),t.$interfaces[e]=r),"object"==typeof i){var o=null;return 0===r.QueryInterface(rtl.getIntfGUIDR(i),{get:function(){return o},set:function(t){o=t}})?o:null}return 2===i&&"com"===r.$kind&&r._AddRef(),r},getIntfT:function(t,e){return rtl.getIntfG(t,e.$guid)},queryIntfT:function(t,e){return rtl.getIntfG(t,e.$guid,e)},queryIntfIsT:function(t,e){var i=rtl.queryIntfG(t,e.$guid);return!!i&&("com"===i.$kind&&i._Release(),!0)},asIntfT:function(t,e){var i=rtl.getIntfG(t,e.$guid);if(null!==i)return i;rtl.raiseEInvalidCast()},intfIsClass:function(t,e){return null!=t&&rtl.is(t.$o,e)},intfAsClass:function(t,e){return null==t?null:rtl.as(t.$o,e)},intfToClass:function(t,e){return null!==t&&rtl.is(t.$o,e)?t.$o:null},intfRefs:{ref:function(t,e){var i=this[t];return i&&(delete this[t],i._Release()),this[t]=e,e},free:function(){for(var t in this)this.hasOwnProperty(t)&&this[t]._Release()}},createIntfRefs:function(){return Object.create(rtl.intfRefs)},setIntfP:function(t,e,i,s){var n=t[e];n!==i&&(null!==n&&(t[e]=null,n._Release()),null!==i&&(s||i._AddRef(),t[e]=i))},setIntfL:function(t,e,i){return t!==e?(null!==e&&(i||e._AddRef()),null!==t&&t._Release()):i&&null!==t&&t._Release(),e},_AddRef:function(t){return t&&t._AddRef(),t},_Release:function(t){return t&&t._Release(),t},checkMethodCall:function(t,e){rtl.isObject(t)&&rtl.is(t,e)||rtl.raiseE("EInvalidCast")},rc:function(t,e,i){if(Math.floor(t)===t&&t>=e&&t<=i)return t;rtl.raiseE("ERangeError")},rcc:function(t,e,i){if("string"==typeof t&&1===t.length){var s=t.charCodeAt(0);if(s>=e&&s<=i)return t}rtl.raiseE("ERangeError")},rcSetCharAt:function(t,e,i){return("string"!=typeof t||e<0||e>=t.length)&&rtl.raiseE("ERangeError"),rtl.setCharAt(t,e,i)},rcCharAt:function(t,e){return("string"!=typeof t||e<0||e>=t.length)&&rtl.raiseE("ERangeError"),t.charAt(e)},rcArrR:function(t,e){if(Array.isArray(t)&&"number"==typeof e&&e>=0&&e<t.length){if(arguments.length>2){t=t[e];for(var i=2;i<arguments.length;i++)t=rtl.rcArrR(t,arguments[i]);return t}return t[e]}rtl.raiseE("ERangeError")},rcArrW:function(t,e,i){for(var s=3;s<arguments.length;s++)t=rtl.rcArrR(t,e),e=arguments[s-1],i=arguments[s];if(Array.isArray(t)&&"number"==typeof e&&e>=0&&e<t.length)return t[e]=i;rtl.raiseE("ERangeError")},length:function(t){return null==t?0:t.length},arraySetLength:function(t,e,i){null==t&&(t=[]);var s=arguments;return function t(n,r){var o=n.length,a=s[r];if(o!==i)if(n.length=i,r===s.length-1)if(rtl.isArray(e))for(var l=o;l<a;l++)n[l]=[];else if(rtl.isFunction(e))for(l=o;l<a;l++)n[l]=new e;else if(rtl.isObject(e))for(l=o;l<a;l++)n[l]={};else for(l=o;l<a;l++)n[l]=e;else for(l=o;l<a;l++)n[l]=[];if(r<s.length-1)for(l=0;l<a;l++)n[l]=t(n[l],r+1);return n}(t,2)},arrayEq:function(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},arrayClone:function(t,e,i,s,n,r){if(rtl.isFunction(t))for(;i<s;i++)n[r++]=new t(e[i]);else if("refSet"===t)for(;i<s;i++)n[r++]=rtl.refSet(e[i]);else for(;i<s;i++)n[r++]=e[i]},arrayConcat:function(t){for(var e=[],i=0,s=1;s<arguments.length;s++){null!==(n=arguments[s])&&(i+=n.length)}e.length=i,i=0;for(s=1;s<arguments.length;s++){var n;null!==(n=arguments[s])&&(rtl.arrayClone(t,n,0,n.length,e,i),i+=n.length)}return e},arrayConcatN:function(){for(var t=null,e=1;e<arguments.length;e++){var i=arguments[e];null!==i&&(t=null===t?i:t.concat(i))}return t},arrayCopy:function(t,e,i,s){if(null===e)return[];i<0&&(i=0),void 0===s&&(s=e.length);var n=i+s;if(n>e.length&&(n=e.length),i>=n)return[];if(0===t)return e.slice(i,n);var r=[];return r.length=n-i,rtl.arrayClone(t,e,i,n,r,0),r},setCharAt:function(t,e,i){return t.substr(0,e)+i+t.substr(e+1)},getResStr:function(t,e){var i=t.$resourcestrings[e];return i.current?i.current:i.org},createSet:function(){for(var t={},e=0;e<arguments.length;e++)if(null!=arguments[e])t[arguments[e]]=!0;else for(var i=arguments[e+=1],s=arguments[e+=1],n=i;n<=s;n++)t[n]=!0;return t},cloneSet:function(t){var e={};for(var i in t)e[i]=!0;return e},refSet:function(t){return Object.defineProperty(t,"$shared",{enumerable:!1,configurable:!0,writable:!0,value:!0}),t},includeSet:function(t,e){return t.$shared&&(t=rtl.cloneSet(t)),t[e]=!0,t},excludeSet:function(t,e){return t.$shared&&(t=rtl.cloneSet(t)),delete t[e],t},diffSet:function(t,e){var i={};for(var s in t)e[s]||(i[s]=!0);return i},unionSet:function(t,e){var i={};for(var s in t)i[s]=!0;for(var s in e)i[s]=!0;return i},intersectSet:function(t,e){var i={};for(var s in t)e[s]&&(i[s]=!0);return i},symDiffSet:function(t,e){var i={};for(var s in t)e[s]||(i[s]=!0);for(var s in e)t[s]||(i[s]=!0);return i},eqSet:function(t,e){for(var i in t)if(!e[i])return!1;for(var i in e)if(!t[i])return!1;return!0},neSet:function(t,e){return!rtl.eqSet(t,e)},leSet:function(t,e){for(var i in t)if(!e[i])return!1;return!0},geSet:function(t,e){for(var i in e)if(!t[i])return!1;return!0},strSetLength:function(t,e){var i=t.length;if(i>e)return t.substring(0,e);if(t.repeat)return t+" ".repeat(e-i);for(;i<e;)t+=" ",i++;return t},spaceLeft:function(t,e){var i=t.length;if(i>=e)return t;if(t.repeat)return" ".repeat(e-i)+t;for(;i<e;)t=" "+t,i++},floatToStr:function(t,e,i){if(arguments.length>2)return rtl.spaceLeft(t.toFixed(i),e);var s="",n=Math.abs(t);n<1e10?s="00":n<1e100&&(s="0"),arguments.length<2?e=9:e<9&&(e=9);i=e-8;var r=(t>0?" ":"")+t.toExponential(i);return r=r.replace(/e(.)/,"E$1"+s),rtl.spaceLeft(r,e)},initRTTI:function(){function t(t,e,i){i||(i=rtl.tTypeInfo),rtl.debug_rtti&&rtl.debug('initRTTI.newBaseTI "'+t+'" '+e+' ("'+i.name+'")');var s=Object.create(i);return s.name=t,s.kind=e,rtl[t]=s,s}function e(e,i,s,n){var r=t(e,1,rtl.tTypeInfoInteger);return r.minvalue=i,r.maxvalue=s,r.ordtype=n,r}function i(t,e){var i=Object.create(rtl.tTypeMember);i.name=t,i.kind=e,rtl[t]=i}rtl.debug_rtti&&rtl.debug("initRTTI"),rtl.tTypeInfo={name:"tTypeInfo"},t("tTypeInfoInteger",1),e("shortint",-128,127,0),e("byte",0,255,1),e("smallint",-32768,32767,2),e("word",0,65535,3),e("longint",-2147483648,2147483647,4),e("longword",0,4294967295,5),e("nativeint",-4503599627370496,0xfffffffffffff,6),e("nativeuint",0,0xfffffffffffff,7),t("char",2),t("string",3),t("tTypeInfoEnum",4,rtl.tTypeInfoInteger),t("tTypeInfoSet",5),t("double",6),t("boolean",7),t("tTypeInfoProcVar",8),t("tTypeInfoMethodVar",9,rtl.tTypeInfoProcVar),t("tTypeInfoArray",10),t("tTypeInfoDynArray",11),t("tTypeInfoPointer",15),t("pointer",15,rtl.tTypeInfoPointer).reftype=null,t("jsvalue",16),t("tTypeInfoRefToProcVar",17,rtl.tTypeInfoProcVar),rtl.tTypeMember={},i("tTypeMemberField",1),i("tTypeMemberMethod",2),i("tTypeMemberProperty",3),rtl.tTypeMembers={};var s=t("tTypeInfoStruct",0);s.$addMember=function(t,e,i){if(rtl.debug_rtti){if(!rtl.hasString(t)||"$"===t.charAt())throw'invalid member "'+t+'", this="'+this.name+'"';if(!rtl.is(e,rtl.tTypeMember))throw'invalid ancestor "'+e+":"+e.name+'", "'+this.name+"."+t+'"';if(null!=i&&"object"!=typeof i)throw'invalid options "'+i+'", "'+this.name+"."+t+'"'}var s=Object.create(e);if(s.name=t,this.members[t]=s,this.names.push(t),rtl.isObject(i))for(var n in i)i.hasOwnProperty(n)&&(s[n]=i[n]);return s},s.addField=function(t,e,i){var s=this.$addMember(t,rtl.tTypeMemberField,i);if(rtl.debug_rtti&&!rtl.is(e,rtl.tTypeInfo))throw'invalid type "'+e+'", "'+this.name+"."+t+'"';return s.typeinfo=e,this.fields.push(t),s},s.addFields=function(){for(var t=0;t<arguments.length;){var e=arguments[t++],i=arguments[t++];t<arguments.length&&"object"==typeof arguments[t]?this.addField(e,i,arguments[t++]):this.addField(e,i)}},s.addMethod=function(t,e,i,s,n){var r=this.$addMember(t,rtl.tTypeMemberMethod,n);return r.methodkind=e,r.procsig=rtl.newTIProcSig(i),r.procsig.resulttype=s||null,this.methods.push(t),r},s.addProperty=function(t,e,i,s,n,r){var o=this.$addMember(t,rtl.tTypeMemberProperty,r);return o.flags=e,o.typeinfo=i,o.getter=s,o.setter=n,rtl.isArray(o.params)&&(o.params=rtl.newTIParams(o.params)),this.properties.push(t),rtl.isString(o.stored)||(o.stored=""),o},s.getField=function(t){return this.members[this.fields[t]]},s.getMethod=function(t){return this.members[this.methods[t]]},s.getProperty=function(t){return this.members[this.properties[t]]},t("tTypeInfoRecord",12,rtl.tTypeInfoStruct),t("tTypeInfoClass",13,rtl.tTypeInfoStruct),t("tTypeInfoClassRef",14),t("tTypeInfoInterface",15,rtl.tTypeInfoStruct)},tSectionRTTI:{$module:null,$inherited:function(t,e,i){rtl.debug_rtti&&rtl.debug('tSectionRTTI.newTI "'+(this.$module?this.$module.$name:"(no module)")+'"."'+t+'" ('+e.name+") "+(i?"init":"forward"));var s=this[t];if(s){if(!s.$forward)throw'duplicate type "'+t+'"';if(!e.isPrototypeOf(s))throw'typeinfo ancestor mismatch "'+t+'" ancestor="'+e.name+'" t.name="'+s.name+'"'}else(s=Object.create(e)).name=t,s.$module=this.$module,this[t]=s;if(i)for(var n in delete s.$forward,i)i.hasOwnProperty(n)&&(s[n]=i[n]);else s.$forward=!0;return s},$Scope:function(t,e,i){var s=this.$inherited(t,e,i);return s.members={},s.names=[],s.fields=[],s.methods=[],s.properties=[],s},$TI:function(t,e,i){var s=this.$inherited(t,rtl.tTypeInfo,i);return s.kind=e,s},$Int:function(t,e){return this.$inherited(t,rtl.tTypeInfoInteger,e)},$Enum:function(t,e){return this.$inherited(t,rtl.tTypeInfoEnum,e)},$Set:function(t,e){return this.$inherited(t,rtl.tTypeInfoSet,e)},$StaticArray:function(t,e){return this.$inherited(t,rtl.tTypeInfoArray,e)},$DynArray:function(t,e){return this.$inherited(t,rtl.tTypeInfoDynArray,e)},$ProcVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoProcVar,e)},$RefToProcVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoRefToProcVar,e)},$MethodVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoMethodVar,e)},$Record:function(t,e){return this.$Scope(t,rtl.tTypeInfoRecord,e)},$Class:function(t,e){return this.$Scope(t,rtl.tTypeInfoClass,e)},$ClassRef:function(t,e){return this.$inherited(t,rtl.tTypeInfoClassRef,e)},$Pointer:function(t,e){return this.$inherited(t,rtl.tTypeInfoPointer,e)},$Interface:function(t,e){return this.$Scope(t,rtl.tTypeInfoInterface,e)}},newTIParam:function(t){return{name:t[0],typeinfo:t[1],flags:rtl.isNumber(t[2])?t[2]:0}},newTIParams:function(t){var e=[];if(rtl.isArray(t))for(var i=0;i<t.length;i++)e.push(rtl.newTIParam(t[i]));return e},newTIProcSig:function(t,e,i){return{params:rtl.newTIParams(t),resulttype:e,flags:i}}};rtl.module("System",[],function(){"use strict";var t=this,e=t.$impl;this.LineEnding="\n",this.sLineBreak=t.LineEnding,this.MaxLongint=2147483647,this.Maxint=2147483647,this.TTextLineBreakStyle={0:"tlbsLF",tlbsLF:0,1:"tlbsCRLF",tlbsCRLF:1,2:"tlbsCR",tlbsCR:2},rtl.createClass(t,"TObject",null,function(){this.$init=function(){},this.$final=function(){},this.Create=function(){},this.Destroy=function(){},this.Free=function(){this.$destroy("Destroy")},this.ClassType=function(){return this},this.InheritsFrom=function(t){return null!=t&&(this==t||t.isPrototypeOf(this))},this.AfterConstruction=function(){},this.BeforeDestruction=function(){}}),this.Trunc=function(e){return Math.trunc||(Math.trunc=function(t){return t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t}),t.Trunc=Math.trunc,Math.trunc(e)},this.DefaultTextLineBreakStyle=0,this.Int=function(e){return t.Trunc(e)},this.Copy=function(t,e,i){return e<1&&(e=1),i>0?t.substring(e-1,e+i-1):""},this.Copy$1=function(t,e){return e<1&&(e=1),t.substr(e-1)},this.Delete=function(e,i,s){var n;i<1||i>e.get().length||s<=0||(n=e.get(),e.set(t.Copy(n,1,i-1)+t.Copy$1(n,i+s)))},this.Pos=function(t,e){return e.indexOf(t)+1},this.Insert=function(e,i,s){var n;""!==e&&(n=i.get(),s<1?i.set(e+n):s>n.length?i.set(n+e):i.set(t.Copy(n,1,s-1)+e+t.Copy(n,s,n.length)))},this.upcase=function(t){return t.toUpperCase()},this.val=function(e,i,s){var n=0;if(s.set(0),n=Number(e),isNaN(n)){var r=t.Copy(e,1,1);if("$"===r)n=Number("0x"+t.Copy$1(e,2));else if("&"===r)n=Number("0o"+t.Copy$1(e,2));else{if("%"!==r)return void s.set(1);n=Number("0b"+t.Copy$1(e,2))}}isNaN(n)||n!==t.Int(n)?s.set(1):i.set(t.Trunc(n))},this.StringOfChar=function(t,e){var i="";if(e>0&&t.repeat)return t.repeat(e);i="";for(var s=1,n=e;s<=n;s++)s,i+=t;return i},this.Writeln=function(){var t,i=0,s="";if(t=rtl.length(arguments)-1,null!=e.WriteCallBack)for(var n=0,r=t;n<=r;n++)i=n,e.WriteCallBack(arguments[i],i===t);else{s=e.WriteBuf;for(var o=0,a=t;o<=a;o++)s=s+""+arguments[i=o];console.log(s),e.WriteBuf=""}},this.Assigned=function(t){return null!=t&&null!=t&&(!rtl.isArray(t)||t.length>0)},t.$init=function(){rtl.exitcode=0}},null,function(){"use strict";var t=this.$impl;t.WriteBuf="",t.WriteCallBack=null}),rtl.module("Types",["System"],function(){"use strict";var t=this;this.TDirection={0:"FromBeginning",FromBeginning:0,1:"FromEnd",FromEnd:1},this.TDuplicates={0:"dupIgnore",dupIgnore:0,1:"dupAccept",dupAccept:1,2:"dupError",dupError:2},this.TSize=function(t){t?(this.cx=t.cx,this.cy=t.cy):(this.cx=0,this.cy=0),this.$equal=function(t){return this.cx===t.cx&&this.cy===t.cy}},this.TPoint=function(t){t?(this.x=t.x,this.y=t.y):(this.x=0,this.y=0),this.$equal=function(t){return this.x===t.x&&this.y===t.y}},t.$rtti.$Record("TPoint",{}).addFields("x",rtl.longint,"y",rtl.longint),this.TRect=function(t){t?(this.Left=t.Left,this.Top=t.Top,this.Right=t.Right,this.Bottom=t.Bottom):(this.Left=0,this.Top=0,this.Right=0,this.Bottom=0),this.$equal=function(t){return this.Left===t.Left&&this.Top===t.Top&&this.Right===t.Right&&this.Bottom===t.Bottom}},this.Rect=function(e,i,s,n){var r=new t.TRect;return r.Left=e,r.Top=i,r.Right=s,r.Bottom=n,r},this.Bounds=function(e,i,s,n){var r=new t.TRect;return r.Left=e,r.Top=i,r.Right=e+s,r.Bottom=i+n,r},this.Point=function(e,i){var s=new t.TPoint;return s.x=e,s.y=i,s},this.InflateRect=function(t,e,i){var s=t.get();return s.Left-=e,s.Top-=i,s.Right+=e,s.Bottom+=i,!0,!0},this.Size=function(e,i){var s=new t.TSize;return s.cx=e,s.cy=i,s}}),rtl.module("JS",["System","Types"],function(){"use strict";var t=this;this.isInteger=function(t){return Math.floor(t)===t},this.isNull=function(t){return null===t},this.TJSValueType={0:"jvtNull",jvtNull:0,1:"jvtBoolean",jvtBoolean:1,2:"jvtInteger",jvtInteger:2,3:"jvtFloat",jvtFloat:3,4:"jvtString",jvtString:4,5:"jvtObject",jvtObject:5,6:"jvtArray",jvtArray:6},this.GetValueType=function(e){var i=0,s="";return t.isNull(e)?i=0:"string"===(s=typeof e)?i=4:"boolean"===s?i=1:"object"===s?i=rtl.isArray(e)?6:5:"number"===s&&(i=t.isInteger(e)?2:3),i}}),rtl.module("Web",["System","Types","JS"],function(){"use strict";this.TJSTextMetrics=function(t){this.width=t?t.width:0,this.$equal=function(t){return this.width===t.width}}}),rtl.module("RTLConsts",["System"],function(){"use strict";this.SArgumentMissing='Missing argument in format "%s"',this.SInvalidFormat='Invalid format specifier : "%s"',this.SInvalidArgIndex='Invalid argument index in format: "%s"',this.SListCapacityError="List capacity (%s) exceeded.",this.SListCountError="List count (%s) out of bounds.",this.SListIndexError="List index (%s) out of bounds",this.SSortedListError="Operation not allowed on sorted list",this.SDuplicateString="String list does not allow duplicates",this.SErrFindNeedsSortedList="Cannot use find on unsorted list",this.SInvalidName='Invalid component name: "%s"',this.SDuplicateName='Duplicate component name: "%s"'}),rtl.module("SysUtils",["System","RTLConsts","JS"],function(){"use strict";var t=this,e=t.$impl;this.FreeAndNil=function(t){var e=null;null!==(e=t.get())&&(t.set(null),e.$destroy("Destroy"))},rtl.createClass(t,"Exception",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.fMessage=""},this.Create$1=function(t){this.fMessage=t},this.CreateFmt=function(e,i){this.Create$1(t.Format(e,i))}}),rtl.createClass(t,"EConvertError",t.Exception,function(){}),this.TrimLeft=function(t){return t.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,"")},this.UpperCase=function(t){return t.toUpperCase()},this.LowerCase=function(t){return t.toLowerCase()},this.CompareStr=function(t,e){var i,s=t.length,n=e.length;return s<=n?t<(i=e.substr(0,s))?-1:t>i?1:s<n?-1:0:(i=t.substr(0,n))<e?-1:1},this.CompareText=function(t,e){var i=t.toLowerCase(),s=e.toLowerCase();return i>s?1:i<s?-1:0},this.Format=function(i,s){var n="",r=0,o=0,a=0,l=0,h=0,u="",c="",d=0,S=0,C=0,F=!1,p=0;function f(){var t=0;function n(){var n=0,l=0;if(-1===t){for(o=r;r<=h&&i.charAt(r-1)<="9"&&i.charAt(r-1)>="0";)r+=1;r>h&&e.DoFormatError(1,i),"*"===i.charAt(r-1)?(-1===d?l=a:(l=d,d+=1),(r>o||l>rtl.length(s)-1)&&e.DoFormatError(1,i),a=l+1,rtl.isNumber(s[l])&&pas.JS.isInteger(s[l])?t=Math.floor(s[l]):e.DoFormatError(1,i),r+=1):o<r?(pas.System.val(pas.System.Copy(i,o,r-o),{get:function(){return t},set:function(e){t=e}},{get:function(){return n},set:function(t){n=t}}),n>0&&e.DoFormatError(1,i)):t=-1}}return d=-1,S=-1,C=-1,t=-1,r+=1,"%"===i.charAt(r-1)?"%":(":"!==i.charAt(r-1)?n():t=0,":"===i.charAt(r-1)&&(-1===t&&e.DoFormatError(2,i),d=t,t=-1,r+=1),"-"===i.charAt(r-1)?(F=!0,r+=1):F=!1,n(),-1!==t&&(S=t,t=-1),"."===i.charAt(r-1)&&(r+=1,n(),-1===t&&(t=0),C=t),pas.System.upcase(i.charAt(r-1)))}function T(t,n){var r=!1;return r=!1,a=(l=-1===d?a:d)+1,l>rtl.length(s)-1||pas.JS.GetValueType(s[l])!==t?(n&&e.DoFormatError(3,i),a-=1,r):r=!0}for(n="",h=i.length,r=1,o=1,a=0;r<=h;){for(;r<=h&&"%"!==i.charAt(r-1);)r+=1;if(r>o&&(n+=pas.System.Copy(i,o,r-o)),r<h){var y=f();if("D"===y)T(2,!0),c=t.IntToStr(Math.floor(s[l])),S=Math.abs(S),d=C-c.length,"-"!==c.charAt(0)?c=pas.System.StringOfChar("0",d)+c:pas.System.Insert(pas.System.StringOfChar("0",d+1),{get:function(){return c},set:function(t){c=t}},2);else if("U"===y)T(2,!0),Math.floor(s[l])<0&&e.DoFormatError(3,i),c=t.IntToStr(Math.floor(s[l])),S=Math.abs(S),d=C-c.length,c=pas.System.StringOfChar("0",d)+c;else if("E"===y)(T(3,!1)||T(2,!0))&&(c=t.FloatToStrF(rtl.getNumber(s[l]),0,9999,C));else if("F"===y)(T(3,!1)||T(2,!0))&&(c=t.FloatToStrF(rtl.getNumber(s[l]),0,9999,C));else if("G"===y)(T(3,!1)||T(2,!0))&&(c=t.FloatToStrF(rtl.getNumber(s[l]),1,C,3));else if("N"===y)(T(3,!1)||T(2,!0))&&(c=t.FloatToStrF(rtl.getNumber(s[l]),3,9999,C));else if("M"===y)(T(3,!1)||T(2,!0))&&(c=t.FloatToStrF(rtl.getNumber(s[l]),4,9999,C));else if("S"===y)T(4,!0),u=""+s[l],d=u.length,-1!==C&&d>C&&(d=C),c=pas.System.Copy(u,1,d);else if("P"===y)T(2,!0),c=t.IntToHex(Math.floor(s[l]),31);else if("X"===y)if(T(2,!0),p=Math.floor(s[l]),C>(d=31))c=t.IntToHex(p,d);else{for(d=1;1<<4*d<=p&&d<16;)d+=1;d>C&&(C=d),c=t.IntToHex(p,C)}else"%"===y&&(c="%");-1!==S&&c.length<S&&(F?c+=pas.System.StringOfChar(" ",S-c.length):c=pas.System.StringOfChar(" ",S-c.length)+c),n+=c}o=r+=1}return n};var i=rtl.createSet(null,65,90,null,97,122,95),s=rtl.unionSet(i,rtl.createSet(null,48,57));this.IsValidIdent=function(t,e,n){var r,o=!1,a=!1,l=0;if((r=t.length)<1)return!1;for(a=!0,o=!1,l=1;l<=r;){if(a){if(!(t.charCodeAt(l-1)in i))return o;a=!1}else if(e&&"."===t.charAt(l-1)){if(n){if(l>=r)return o;a=!0}}else if(!(t.charCodeAt(l-1)in s))return o;l+=1}return o=!0},this.IntToStr=function(t){return""+t};this.IntToHex=function(t,e){var i="";for(0===e&&(e=1),i="";t>0;)i="0123456789ABCDEF".charAt(1+(15&t)-1)+i,t>>>=4;for(;i.length<e;)i="0"+i;return i},this.TFloatFormat={0:"ffFixed",ffFixed:0,1:"ffGeneral",ffGeneral:1,2:"ffExponent",ffExponent:2,3:"ffNumber",ffNumber:3,4:"ffCurrency",ffCurrency:4},this.FloatToStr=function(e){return t.FloatToStrF(e,1,15,0)},this.FloatToStrF=function(i,s,n,r){var o,a="";o=t.DecimalSeparator;var l=s;return 1===l?a=e.FormatGeneralFloat(i,n,o):2===l?a=e.FormatExponentFloat(i,n,r,o):0===l?a=e.FormatFixedFloat(i,r,o):3===l?a=e.FormatNumberFloat(i,r,o,t.ThousandSeparator):4===l&&(a=e.FormatNumberCurrency(1e4*i,r,o,t.ThousandSeparator)),4!==s&&a.length>1&&"-"===a.charAt(0)&&e.RemoveLeadingNegativeSign({get:function(){return a},set:function(t){a=t}},o),a},this.TTimeStamp=function(t){t?(this.Time=t.Time,this.Date=t.Date):(this.Time=0,this.Date=0),this.$equal=function(t){return this.Time===t.Time&&this.Date===t.Date}},this.TimeSeparator=":",this.DateSeparator="-",this.ShortDateFormat="yyyy-mm-dd",this.LongDateFormat="ddd, yyyy-mm-dd",this.ShortTimeFormat="hh:nn",this.LongTimeFormat="hh:nn:ss",this.DecimalSeparator=".",this.ThousandSeparator="",this.TimeAMString="AM",this.TimePMString="PM",this.HoursPerDay=24,this.MinsPerHour=60,this.SecsPerMin=60,this.MSecsPerSec=1e3,this.MinsPerDay=1440,this.SecsPerDay=86400,this.MSecsPerDay=864e5,this.MaxDateTime=2958465.99999999,this.DateDelta=693594,this.MonthDays=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],this.ShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.LongMonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.ShortDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.LongDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rtl.createClass(t,"TFormatSettings",pas.System.TObject,function(){}),this.FormatSettings=null,this.JSDateToDateTime=function(e){return t.EncodeDate(e.getFullYear(),e.getMonth()+1,e.getDate())+t.EncodeTime(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},this.DateTimeToTimeStamp=function(e){var i=new t.TTimeStamp,s=0;return(s=864e5*e)<0?s-=.5:s+=.5,i.Time=pas.System.Trunc(Math.abs(pas.System.Trunc(s))%864e5),i.Date=693594+Math.floor(pas.System.Trunc(s)/864e5),i},this.TryEncodeDate=function(e,i,s,n){var r,o=0,a=0;return(r=e>0&&e<1e4&&i>=1&&i<=12&&s>0&&s<=t.MonthDays[+t.IsLeapYear(e)][i-1])&&(i>2?i-=3:(i+=9,e-=1),a=e-100*(o=Math.floor(e/100)),n.set((146097*o>>>2)+(1461*a>>>2)+Math.floor((153*i+2)/5)+s),n.set(n.get()-693900)),r},this.TryEncodeTime=function(t,e,i,s,n){var r;return(r=t<24&&e<60&&i<60&&s<1e3)&&n.set((36e5*t+6e4*e+1e3*i+s)/864e5),r},this.EncodeDate=function(e,i,s){var n=0;if(!t.TryEncodeDate(e,i,s,{get:function(){return n},set:function(t){n=t}}))throw t.EConvertError.$create("CreateFmt",["%s-%s-%s is not a valid date specification",[t.IntToStr(e),t.IntToStr(i),t.IntToStr(s)]]);return n},this.EncodeTime=function(e,i,s,n){var r=0;if(!t.TryEncodeTime(e,i,s,n,{get:function(){return r},set:function(t){r=t}}))throw t.EConvertError.$create("CreateFmt",["%s:%s:%s.%s is not a valid time specification",[t.IntToStr(e),t.IntToStr(i),t.IntToStr(s),t.IntToStr(n)]]);return r},this.DecodeDate=function(e,i,s,n){var r=0,o=0,a=0,l=0;e<=-693594?(i.set(0),s.set(0),n.set(0)):(e>0?e+=1/1728e5:e-=1/1728e5,e>t.MaxDateTime&&(e=t.MaxDateTime),l=(pas.System.Trunc(e)+693900<<2)-1,o=7+((o=(l-=146097*(r=Math.floor(l/146097)))>>>2)<<2)-1461*(l=Math.floor((3+(o<<2))/1461))>>>2,a=Math.floor((5*o-3)/153),o=Math.floor((5*o+2-153*a)/5),r=100*r+l,a<10?a+=3:(a-=9,r+=1),i.set(r),s.set(a),n.set(o))},this.DecodeDateFully=function(e,i,s,n,r){return t.DecodeDate(e,i,s,n),r.set(t.DayOfWeek(e)),t.IsLeapYear(i.get())},this.DecodeTime=function(e,i,s,n,r){var o=0;o=t.DateTimeToTimeStamp(e).Time,i.set(Math.floor(o/36e5)),o%=36e5,s.set(Math.floor(o/6e4)),o%=6e4,n.set(Math.floor(o/1e3)),o%=1e3,r.set(o)},this.DayOfWeek=function(t){var e=0;return(e=1+(pas.System.Trunc(t)-1)%7)<=0&&(e+=7),e},this.Now=function(){return t.JSDateToDateTime(new Date)},this.IsLeapYear=function(t){return t%4==0&&(t%100!=0||t%400==0)},this.DateTimeToStr=function(i,s){return t.FormatDateTime(e.DateTimeToStrFormat[+s],i)},this.FormatDateTime=function(e,i){var s="";function n(t,i){s+=pas.System.Copy(e,t,i)}function r(t){s+=t}function o(e,i){var s="";for(s=t.IntToStr(e);s.length<i;)s="0"+s;r(s)}var a=0,l=0,h=0,u=0,c=0,d=0,S=0,C=0;function F(e,i,s){var p,f="",T="",y=0,m=!1,g=0,P=0,D=0;if(!(i>1)){for(D=1,p=e.length,m=!1,!1,P=1;P<=p;){var x=f=e.charAt(P-1);if("'"===x||'"'===x)for(P+=1;P<p&&e.charAt(P-1)!==f;)P+=1;else if(!("A"!==x&&"a"!==x||0!==t.CompareText(pas.System.Copy(e,P,3),"A/P")&&0!==t.CompareText(pas.System.Copy(e,P,4),"AMPM")&&0!==t.CompareText(pas.System.Copy(e,P,5),"AM/PM"))){m=!0;break}P+=1}for(f="Ã¿",T=" ","H";D<=p;){y=1,P=D+1;var v=f=t.UpperCase(e.charAt(D-1)).charAt(0);if("'"===v||'"'===v){for(;P<p&&e.charAt(P-1)!==f;)P+=1;n(D+1,(y=(P+=1)-D)-2)}else if("A"===v)if(0===t.CompareText(pas.System.Copy(e,D,4),"AMPM"))y=4,r(c<12?t.TimeAMString:t.TimePMString);else if(0===t.CompareText(pas.System.Copy(e,D,5),"AM/PM"))y=5,n(c<12?D:D+3,2);else{if(0!==t.CompareText(pas.System.Copy(e,D,3),"A/P"))throw t.EConvertError.$create("Create$1",["Illegal character in format string"]);y=3,n(c<12?D:D+2,1)}else if("/"===v)r(t.DateSeparator);else if(":"===v)r(t.TimeSeparator);else if(" "===v||"C"===v||"D"===v||"H"===v||"M"===v||"N"===v||"S"===v||"T"===v||"Y"===v||"Z"===v||"F"===v){for(;P<=p&&t.UpperCase(e.charAt(P-1))===f;)P+=1;y=P-D;var w=f;if(" "===w)n(D,y);else if("Y"===w)y>2?o(a,4):o(a%100,2);else if("M"===w)if("H"===T||s)o(d,1===y?0:2);else{var E=y;1===E?o(l,0):2===E?o(l,2):r(3===E?t.ShortMonthNames[l-1]:t.LongMonthNames[l-1])}else if("D"===w){var B=y;1===B?o(h,0):2===B?o(h,2):3===B?r(t.ShortDayNames[u]):4===B?r(t.LongDayNames[u]):F(5===B?t.ShortDateFormat:t.LongDateFormat,i+1,!1)}else"H"===w?m?(0===(g=c%12)&&(g=12),o(g,1===y?0:2)):o(c,1===y?0:2):"N"===w?o(d,1===y?0:2):"S"===w?o(S,1===y?0:2):"Z"===w?o(C,1===y?0:3):"T"===w?F(1===y?t.ShortTimeFormat:t.LongTimeFormat,i+1,!0):"C"===w?(F(t.ShortDateFormat,i+1,!1),0===c&&0===d&&0===S||(r(" "),F(t.LongTimeFormat,i+1,!0))):"F"===w&&(F(t.ShortDateFormat,i+1,!1),r(" "),F(t.LongTimeFormat,i+1,!0));T,T=f}else r(f);D+=y}}}return t.DecodeDateFully(i,{get:function(){return a},set:function(t){a=t}},{get:function(){return l},set:function(t){l=t}},{get:function(){return h},set:function(t){h=t}},{get:function(){return u},set:function(t){u=t}}),t.DecodeTime(i,{get:function(){return c},set:function(t){c=t}},{get:function(){return d},set:function(t){d=t}},{get:function(){return S},set:function(t){S=t}},{get:function(){return C},set:function(t){C=t}}),F(""!==e?e:"C",0,!1),s},this.CurrencyFormat=0,this.NegCurrFormat=0,this.CurrencyDecimals=2,this.CurrencyString="$",t.$init=function(){t.FormatSettings=t.TFormatSettings.$create("Create")}},null,function(){"use strict";var t=this,e=t.$impl;e.feInvalidFormat=1,e.feMissingArgument=2,e.feInvalidArgIndex=3,e.DoFormatError=function(e,i){var s=e;if(1===s)throw t.EConvertError.$create("CreateFmt",[pas.RTLConsts.SInvalidFormat,[i]]);if(2===s)throw t.EConvertError.$create("CreateFmt",[pas.RTLConsts.SArgumentMissing,[i]]);if(3===s)throw t.EConvertError.$create("CreateFmt",[pas.RTLConsts.SInvalidArgIndex,[i]])},e.maxdigits=15,e.ReplaceDecimalSep=function(t,e){var i;return(i=pas.System.Pos(".",t))>0?pas.System.Copy(t,1,i-1)+e+pas.System.Copy(t,i+1,t.length-i):t},e.FormatGeneralFloat=function(i,s,n){var r="",o=0,a=0,l=0,h=0;if((-1===s||s>15)&&(s=15),r=rtl.floatToStr(i,s+7),r=t.TrimLeft(r),0===(o=pas.System.Pos(".",r)))return r;if(0===(a=pas.System.Pos("E",r)))return r=e.ReplaceDecimalSep(r,n);for(l=a+2,h=0;l<=r.length;)h=10*h+r.charCodeAt(l-1)-"0".charCodeAt(),l+=1;if("-"===r.charAt(a+1-1)&&(h=-h),o+h<a&&h>-6){if(r=rtl.strSetLength(r,a-1),h>=0){for(var u=0,c=h-1;u<=c;u++)l=u,r=rtl.setCharAt(r,o-1,r.charAt(o+1-1)),o+=1;for(r=rtl.setCharAt(r,o-1,"."),o=1,"-"===r.charAt(o-1)&&(o+=1);"0"===r.charAt(o-1)&&o<r.length&&pas.System.Copy(r,o+1,n.length)!==n;)pas.System.Delete({get:function(){return r},set:function(t){r=t}},o,1)}else pas.System.Insert(pas.System.Copy("00000",1,-h),{get:function(){return r},set:function(t){r=t}},o-1),r=rtl.setCharAt(r,o-h-1,r.charAt(o-h-1-1)),r=rtl.setCharAt(r,o-1,"."),-1!==h&&(r=rtl.setCharAt(r,o-h-1-1,"0"));for(l=r.length;l>0&&"0"===r.charAt(l-1);)l-=1;"."===r.charAt(l-1)&&(l-=1),r=0===l||1===l&&"-"===r.charAt(0)?"0":rtl.strSetLength(r,l)}else{for(;"0"===r.charAt(a-1-1);)pas.System.Delete({get:function(){return r},set:function(t){r=t}},a-1,1),a-=1;for(r.charAt(a-1-1)===n&&(pas.System.Delete({get:function(){return r},set:function(t){r=t}},a-1,1),a-=1),"+"===r.charAt(a+1-1)?pas.System.Delete({get:function(){return r},set:function(t){r=t}},a+1,1):a+=1;"0"===r.charAt(a+1-1);)pas.System.Delete({get:function(){return r},set:function(t){r=t}},a+1,1)}return r=e.ReplaceDecimalSep(r,n)},e.FormatExponentFloat=function(i,s,n,r){var o="",a=0;for(r=t.DecimalSeparator,(-1===s||s>15)&&(s=15),o=rtl.floatToStr(i,s+7);" "===o.charAt(0);)pas.System.Delete({get:function(){return o},set:function(t){o=t}},1,1);if(0===(a=pas.System.Pos("E",o)))return o=e.ReplaceDecimalSep(o,r);if(a+=2,n>4&&(n=4),(n=o.length-a-n+1)<0)pas.System.Insert(pas.System.Copy("0000",1,-n),{get:function(){return o},set:function(t){o=t}},a);else for(;n>0&&"0"===o.charAt(a-1);){if(pas.System.Delete({get:function(){return o},set:function(t){o=t}},a,1),a>o.length){pas.System.Delete({get:function(){return o},set:function(t){o=t}},a-2,2);break}n-=1}return o=e.ReplaceDecimalSep(o,r)},e.FormatFixedFloat=function(t,i,s){var n="";return-1===i?i=2:i>18&&(i=18),""!==(n=rtl.floatToStr(t,0,i))&&" "===n.charAt(0)&&pas.System.Delete({get:function(){return n},set:function(t){n=t}},1,1),n=e.ReplaceDecimalSep(n,s)},e.FormatNumberFloat=function(t,i,s,n){var r="",o=0;if(-1===i?i=2:i>15&&(i=15),""!==(r=rtl.floatToStr(t,0,i))&&" "===r.charAt(0)&&pas.System.Delete({get:function(){return r},set:function(t){r=t}},1,1),o=pas.System.Pos(".",r),r=e.ReplaceDecimalSep(r,s),o-=3,""!==n&&"\0"!==n)for(;o>1;)"-"!==r.charAt(o-1-1)&&pas.System.Insert(n,{get:function(){return r},set:function(t){r=t}},o),o-=3;return r},e.RemoveLeadingNegativeSign=function(e,i){var s,n=!1,r=0;n=!1,s=t.ThousandSeparator;for(var o=2,a=e.get().length;o<=a&&(r=o,n=e.get().charCodeAt(r-1)in rtl.createSet(48,i.charCodeAt(),69,43)||e.get().charAt(r-1)===s);o++);return n&&"-"===e.get().charAt(0)&&pas.System.Delete(e,1,1),n},e.FormatNumberCurrency=function(i,s,n,r){var o,a="",l=0;if(-1===s?s=t.CurrencyDecimals:s>18&&(s=18),(o="-"===(a=rtl.floatToStr(i/1e4,0,s)).charAt(0))&&pas.System.Delete({get:function(){return a},set:function(t){a=t}},1,1),l=pas.System.Pos(".",a),""!==r)for(0!==l?a=e.ReplaceDecimalSep(a,n):l=a.length+1,l-=3;l>1;)pas.System.Insert(r,{get:function(){return a},set:function(t){a=t}},l),l-=3;if(o&&e.RemoveLeadingNegativeSign({get:function(){return a},set:function(t){a=t}},n),o){var h=t.NegCurrFormat;0===h?a="("+t.CurrencyString+a+")":1===h?a="-"+t.CurrencyString+a:2===h?a=t.CurrencyString+"-"+a:3===h?a=t.CurrencyString+a+"-":4===h?a="("+a+t.CurrencyString+")":5===h?a="-"+a+t.CurrencyString:6===h?a=a+"-"+t.CurrencyString:7===h?a=a+t.CurrencyString+"-":8===h?a="-"+a+" "+t.CurrencyString:9===h?a="-"+t.CurrencyString+" "+a:10===h?a=a+" "+t.CurrencyString+"-":11===h?a=t.CurrencyString+" "+a+"-":12===h?a=t.CurrencyString+" -"+a:13===h?a=a+"- "+t.CurrencyString:14===h?a="("+t.CurrencyString+" "+a+")":15===h&&(a="("+a+" "+t.CurrencyString+")")}else{var u=t.CurrencyFormat;0===u?a=t.CurrencyString+a:1===u?a+=t.CurrencyString:2===u?a=t.CurrencyString+" "+a:3===u&&(a=a+" "+t.CurrencyString)}return a},e.DateTimeToStrFormat=["c","f"]}),rtl.module("Classes",["System","RTLConsts","Types","SysUtils"],function(){"use strict";var t=this,e=t.$impl;t.$rtti.$MethodVar("TNotifyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject]]),methodkind:0}),rtl.createClass(t,"EListError",pas.SysUtils.Exception,function(){}),rtl.createClass(t,"EStringListError",t.EListError,function(){}),rtl.createClass(t,"EComponentError",pas.SysUtils.Exception,function(){}),this.TAlignment={0:"taLeftJustify",taLeftJustify:0,1:"taRightJustify",taRightJustify:1,2:"taCenter",taCenter:2},t.$rtti.$Enum("TAlignment",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TAlignment}),rtl.createClass(t,"TFPList",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FList=[],this.FCount=0,this.FCapacity=0},this.$final=function(){this.FList=void 0,pas.System.TObject.$final.call(this)},this.Get=function(t){return(t<0||t>=this.FCount)&&this.RaiseIndexError(t),this.FList[t]},this.SetCapacity=function(t){t<this.FCount&&this.$class.Error(pas.RTLConsts.SListCapacityError,""+t),t!==this.FCapacity&&(this.FList=rtl.arraySetLength(this.FList,void 0,t),this.FCapacity=t)},this.SetCount=function(t){t<0&&this.$class.Error(pas.RTLConsts.SListCountError,""+t),t>this.FCount&&t>this.FCapacity&&this.SetCapacity(t),this.FCount=t},this.RaiseIndexError=function(t){this.$class.Error(pas.RTLConsts.SListIndexError,""+t)},this.Destroy=function(){this.Clear(),pas.System.TObject.Destroy.call(this)},this.Add=function(t){var e;return this.FCount===this.FCapacity&&this.Expand(),this.FList[this.FCount]=t,e=this.FCount,this.FCount+=1,e},this.Clear=function(){rtl.length(this.FList)>0&&(this.SetCount(0),this.SetCapacity(0))},this.Delete=function(t){(t<0||t>=this.FCount)&&this.$class.Error(pas.RTLConsts.SListIndexError,""+t),this.FCount=this.FCount-1,this.FList.splice(t,1),this.FCapacity-=1},this.Error=function(e,i){throw t.EListError.$create("CreateFmt",[e,[i]])},this.Expand=function(){var t=0;return this.FCount<this.FCapacity?this:(t=4,this.FCapacity>3&&(t+=4),this.FCapacity>8&&(t+=8),this.FCapacity>127&&(t+=this.FCapacity>>>2),this.SetCapacity(this.FCapacity+t),this,this)},this.IndexOf=function(t){var e,i=0;for(i=0,e=this.FCount;i<e&&this.FList[i]!=t;)i+=1;return i>=e&&(i=-1),i},this.IndexOfItem=function(t,e){var i=0;if(0===e)i=this.IndexOf(t);else for(i=this.FCount-1;i>=0&&this.FList[i]!=t;)i-=1;return i},this.Last=function(){return 0===this.FCount?null:this.Get(this.FCount-1)},this.Remove=function(t){var e;return-1!==(e=this.IndexOf(t))&&this.Delete(e),e},this.ForEachCall=function(t,e){for(var i=0,s=void 0,n=0,r=this.FCount-1;n<=r;n++)i=n,s=this.FList[i],pas.System.Assigned(s)&&t(s,e)}}),rtl.createClass(t,"TPersistent",pas.System.TObject,function(){this.AssignError=function(t){var e="";throw e=null!==t?t.$classname:"Nil",pas.SysUtils.EConvertError.$create("Create$1",["Cannot assign a "+e+" to a "+this.$classname+"."])},this.AssignTo=function(t){t.AssignError(this)},this.Assign=function(t){null!==t?t.AssignTo(this):this.AssignError(null)}}),rtl.createClass(t,"TStrings",t.TPersistent,function(){this.$init=function(){t.TPersistent.$init.call(this),this.FSpecialCharsInited=!1,this.FAlwaysQuote=!1,this.FQuoteChar="",this.FDelimiter="",this.FNameValueSeparator="",this.FUpdateCount=0,this.FLBS=0,this.FSkipLastLineBreak=!1,this.FLineBreak=""},this.DoSetTextStr=function(t,e){var i="",s=0;try{for(this.BeginUpdate(),e&&this.Clear(),s=1;this.GetNextLinebreak(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}});)this.Add(i)}finally{this.EndUpdate()}},this.GetLineBreak=function(){return this.CheckSpecialChars(),this.FLineBreak},this.GetSkipLastLineBreak=function(){return this.CheckSpecialChars(),this.FSkipLastLineBreak},this.Error=function(e,i){throw t.EStringListError.$create("CreateFmt",[e,[pas.SysUtils.IntToStr(i)]])},this.GetCapacity=function(){return this.GetCount()},this.GetObject=function(t){return null,null},this.GetTextStr=function(){var t="",e=0,i="";if(this.CheckSpecialChars(),this.FLineBreak!==pas.System.sLineBreak)i=this.FLineBreak;else{var s=this.FLBS;0===s?i="\n":1===s?i="\r\n":2===s&&(i="\r")}t="";for(var n=0,r=this.GetCount()-1;n<=r;n++)e=n,t+=this.Get(e),(e<this.GetCount()-1||!this.GetSkipLastLineBreak())&&(t+=i);return t},this.Put=function(t,e){var i;i=this.GetObject(t),this.Delete(t),this.InsertObject(t,e,i)},this.PutObject=function(t,e){},this.SetTextStr=function(t){this.CheckSpecialChars(),this.DoSetTextStr(t,!0)},this.SetUpdateState=function(t){},this.CheckSpecialChars=function(){this.FSpecialCharsInited||(this.FQuoteChar='"',this.FDelimiter=",",this.FNameValueSeparator="=",this.FLBS=pas.System.DefaultTextLineBreakStyle,this.FSpecialCharsInited=!0,this.FLineBreak=pas.System.sLineBreak)},this.GetNextLinebreak=function(t,e,i){var s=!1,n=0;return e.set(""),s=!1,t.length-i.get()<0?s:((n=t.indexOf(this.GetLineBreak(),i.get()-1)+1)<1&&(n=t.length+1),e.set(pas.System.Copy(t,i.get(),n-i.get())),i.set(n+this.GetLineBreak().length),s=!0)},this.Create$1=function(){pas.System.TObject.Create.call(this),this.FAlwaysQuote=!1},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.Add=function(t){var e;return e=this.GetCount(),this.Insert(this.GetCount(),t),e},this.AddObject=function(t,e){var i;return i=this.Add(t),this.PutObject(i,e),i},this.AddStrings=function(t){for(var e=0,i=0,s=t.GetCount()-1;i<=s;i++)e=i,this.AddObject(t.Get(e),t.GetObject(e))},this.Assign=function(e){var i=null;if(t.TStrings.isPrototypeOf(e)){i=e,this.BeginUpdate();try{this.Clear(),this.FSpecialCharsInited=i.FSpecialCharsInited,this.FQuoteChar=i.FQuoteChar,this.FDelimiter=i.FDelimiter,this.FNameValueSeparator=i.FNameValueSeparator,this.FLBS=i.FLBS,this.FLineBreak=i.FLineBreak,this.AddStrings(i)}finally{this.EndUpdate()}}else t.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){0===this.FUpdateCount&&this.SetUpdateState(!0),this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1),0===this.FUpdateCount&&this.SetUpdateState(!1)},this.InsertObject=function(t,e,i){this.Insert(t,e),this.PutObject(t,i)}}),this.TStringItem=function(t){t?(this.FString=t.FString,this.FObject=t.FObject):(this.FString="",this.FObject=null),this.$equal=function(t){return this.FString===t.FString&&this.FObject===t.FObject}},this.TStringsSortStyle={0:"sslNone",sslNone:0,1:"sslUser",sslUser:1,2:"sslAuto",sslAuto:2},rtl.createClass(t,"TStringList",t.TStrings,function(){this.$init=function(){t.TStrings.$init.call(this),this.FList=[],this.FCount=0,this.FOnChange=null,this.FOnChanging=null,this.FDuplicates=0,this.FCaseSensitive=!1,this.FOwnsObjects=!1,this.FSortStyle=0},this.$final=function(){this.FList=void 0,this.FOnChange=void 0,this.FOnChanging=void 0,t.TStrings.$final.call(this)},this.GetSorted=function(){return this.FSortStyle in rtl.createSet(1,2)},this.Grow=function(){var t=0;(t=this.GetCapacity())>=256?t+=Math.floor(t/4):0===t?t=4:t*=4,this.SetCapacity(t)},this.InternalClear=function(t,e){var i=0;if(t<this.FCount){if(this.FOwnsObjects)for(var s=t,n=this.FCount-1;s<=n;s++)i=s,this.FList[i].FString="",pas.SysUtils.FreeAndNil({p:this.FList[i],get:function(){return this.p.FObject},set:function(t){this.p.FObject=t}});else for(var r=t,o=this.FCount-1;r<=o;r++)i=r,this.FList[i].FString="";this.FCount=t}e||this.SetCapacity(0)},this.CheckIndex=function(t){(t<0||t>=this.FCount)&&this.Error(pas.RTLConsts.SListIndexError,t)},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Changing=function(){0===this.FUpdateCount&&null!=this.FOnChanging&&this.FOnChanging(this)},this.Get=function(t){return this.CheckIndex(t),this.FList[t].FString},this.GetCapacity=function(){return rtl.length(this.FList)},this.GetCount=function(){return this.FCount},this.GetObject=function(t){return this.CheckIndex(t),this.FList[t].FObject},this.Put=function(t,e){this.GetSorted()&&this.Error(pas.RTLConsts.SSortedListError,0),this.CheckIndex(t),this.Changing(),this.FList[t].FString=e,this.Changed()},this.PutObject=function(t,e){this.CheckIndex(t),this.Changing(),this.FList[t].FObject=e,this.Changed()},this.SetCapacity=function(e){e<0&&this.Error(pas.RTLConsts.SListCapacityError,e),e!==this.GetCapacity()&&(this.FList=rtl.arraySetLength(this.FList,t.TStringItem,e))},this.SetUpdateState=function(t){t?this.Changing():this.Changed()},this.InsertItem=function(t,e){this.InsertItem$1(t,e,null)},this.InsertItem$1=function(e,i,s){var n=new t.TStringItem;this.Changing(),this.FCount===this.GetCapacity()&&this.Grow(),n.FString=i,n.FObject=s,this.FList.splice(e,0,n),this.FCount+=1,this.Changed()},this.DoCompareText=function(t,e){return this.FCaseSensitive?pas.SysUtils.CompareStr(t,e):pas.SysUtils.CompareText(t,e)},this.Destroy=function(){this.InternalClear(0,!1),t.TStrings.Destroy.call(this)},this.Add=function(t){var e=0;if(2!==this.FSortStyle)e=this.FCount;else if(this.Find(t,{get:function(){return e},set:function(t){e=t}})){var i=this.FDuplicates;if(0===i)return e;2===i&&this.Error(pas.RTLConsts.SDuplicateString,0)}return this.InsertItem(e,t),e},this.Clear=function(){0!==this.FCount&&(this.Changing(),this.InternalClear(0,!1),this.Changed())},this.Delete=function(t){this.CheckIndex(t),this.Changing(),this.FOwnsObjects&&pas.SysUtils.FreeAndNil({p:this.FList[t],get:function(){return this.p.FObject},set:function(t){this.p.FObject=t}}),this.FList.splice(t,1),this.FList[this.GetCount()-1].FString="",this.FList[this.GetCount()-1].FObject=null,this.FCount-=1,this.Changed()},this.Find=function(e,i){var s=!1,n=0,r=0,o=0,a=0;if(s=!1,i.set(-1),!this.GetSorted())throw t.EListError.$create("Create$1",[pas.RTLConsts.SErrFindNeedsSortedList]);for(n=0,r=this.GetCount()-1;n<=r;)o=n+Math.floor((r-n)/2),(a=this.DoCompareText(e,this.FList[o].FString))>0?n=o+1:(r=o-1,0===a&&(s=!0,1!==this.FDuplicates&&(n=o)));return i.set(n),s},this.Insert=function(t,e){2===this.FSortStyle?this.Error(pas.RTLConsts.SSortedListError,0):((t<0||t>this.FCount)&&this.Error(pas.RTLConsts.SListIndexError,t),this.InsertItem(t,e))}}),rtl.createClass(t,"TCollectionItem",t.TPersistent,function(){this.$init=function(){t.TPersistent.$init.call(this),this.FCollection=null,this.FID=0},this.$final=function(){this.FCollection=void 0,t.TPersistent.$final.call(this)},this.SetCollection=function(t){t!==this.FCollection&&(null!==this.FCollection&&this.FCollection.RemoveItem(this),null!==t&&t.InsertItem(this))},this.Changed=function(t){null!==this.FCollection&&0===this.FCollection.FUpdateCount&&(t?this.FCollection.Update(null):this.FCollection.Update(this))},this.Create$1=function(t){pas.System.TObject.Create.call(this),this.SetCollection(t)},this.Destroy=function(){this.SetCollection(null),pas.System.TObject.Destroy.call(this)}}),this.TCollectionNotification={0:"cnAdded",cnAdded:0,1:"cnExtracting",cnExtracting:1,2:"cnDeleting",cnDeleting:2},rtl.createClass(t,"TCollection",t.TPersistent,function(){this.$init=function(){t.TPersistent.$init.call(this),this.FItemClass=null,this.FItems=null,this.FUpdateCount=0,this.FNextID=0},this.$final=function(){this.FItemClass=void 0,this.FItems=void 0,t.TPersistent.$final.call(this)},this.GetCount=function(){return this.FItems.FCount},this.InsertItem=function(t){this.FItemClass.isPrototypeOf(t)&&(this.FItems.Add(t),t.FCollection=this,t.FID=this.FNextID,this.FNextID+=1,this.SetItemName(t),this.Notify(t,0),this.Changed())},this.RemoveItem=function(t){var e;this.Notify(t,1),-1!==(e=this.FItems.IndexOfItem(t,1))&&this.FItems.Delete(e),t.FCollection=null,this.Changed()},this.DoClear=function(){for(var t=null;this.FItems.FCount>0;)null!=(t=rtl.getObject(this.FItems.Last()))&&t.$destroy("Destroy")},this.Changed=function(){0===this.FUpdateCount&&this.Update(null)},this.GetItem=function(t){return rtl.getObject(this.FItems.Get(t))},this.SetItemName=function(t){},this.Update=function(t){},this.Notify=function(t,e){},this.Create$1=function(e){pas.System.TObject.Create.call(this),this.FItemClass=e,this.FItems=t.TFPList.$create("Create")},this.Destroy=function(){this.FUpdateCount=1;try{this.DoClear()}finally{this.FUpdateCount=0}null!=this.FItems&&this.FItems.$destroy("Destroy"),pas.System.TObject.Destroy.call(this)},this.Add=function(){return this.FItemClass.$create("Create$1",[this])},this.Assign=function(e){var i=0;if(t.TCollection.isPrototypeOf(e)){this.Clear();for(var s=0,n=e.GetCount()-1;s<=n;s++)i=s,this.Add().Assign(e.GetItem(i))}else t.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){this.FUpdateCount+=1},this.Clear=function(){if(0!==this.FItems.FCount){this.BeginUpdate();try{this.DoClear()}finally{this.EndUpdate()}}},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1),0===this.FUpdateCount&&this.Changed()}}),this.TOperation={0:"opInsert",opInsert:0,1:"opRemove",opRemove:1},this.TComponentStateItem={0:"csLoading",csLoading:0,1:"csReading",csReading:1,2:"csWriting",csWriting:2,3:"csDestroying",csDestroying:3,4:"csDesigning",csDesigning:4,5:"csAncestor",csAncestor:5,6:"csUpdating",csUpdating:6,7:"csFixups",csFixups:7,8:"csFreeNotification",csFreeNotification:8,9:"csInline",csInline:9,10:"csDesignInstance",csDesignInstance:10},this.TComponentStyleItem={0:"csInheritable",csInheritable:0,1:"csCheckPropAvail",csCheckPropAvail:1,2:"csSubComponent",csSubComponent:2,3:"csTransient",csTransient:3},rtl.createClass(t,"TComponent",t.TPersistent,function(){this.$init=function(){t.TPersistent.$init.call(this),this.FOwner=null,this.FName="",this.FTag=0,this.FComponents=null,this.FFreeNotifies=null,this.FComponentState={},this.FComponentStyle={}},this.$final=function(){this.FOwner=void 0,this.FComponents=void 0,this.FFreeNotifies=void 0,this.FComponentState=void 0,this.FComponentStyle=void 0,t.TPersistent.$final.call(this)},this.Insert=function(e){null==this.FComponents&&(this.FComponents=t.TFPList.$create("Create")),this.FComponents.Add(e),e.FOwner=this},this.Remove=function(t){t.FOwner=null,null!=this.FComponents&&(this.FComponents.Remove(t),0===this.FComponents.FCount&&(this.FComponents.$destroy("Destroy"),this.FComponents=null))},this.RemoveNotification=function(t){null!==this.FFreeNotifies&&(this.FFreeNotifies.Remove(t),0===this.FFreeNotifies.FCount&&(this.FFreeNotifies.$destroy("Destroy"),this.FFreeNotifies=null,this.FComponentState=rtl.excludeSet(this.FComponentState,8)))},this.ChangeName=function(t){this.FName=t},this.Loaded=function(){this.FComponentState=rtl.excludeSet(this.FComponentState,0)},this.Notification=function(t,e){var i=0;if(1===e&&this.RemoveFreeNotification(t),null!=this.FComponents)for(i=this.FComponents.FCount-1;i>=0;)rtl.getObject(this.FComponents.Get(i)).Notification(t,e),(i-=1)>=this.FComponents.FCount&&(i=this.FComponents.FCount-1)},this.SetDesigning=function(t,e){var i=0;if(this.FComponentState=t?rtl.includeSet(this.FComponentState,4):rtl.excludeSet(this.FComponentState,4),null!=this.FComponents&&e)for(var s=0,n=this.FComponents.FCount-1;s<=n;s++)i=s,rtl.getObject(this.FComponents.Get(i)).SetDesigning(t,!0)},this.SetName=function(e){if(this.FName!==e){if(""!==e&&!pas.SysUtils.IsValidIdent(e,!1,!1))throw t.EComponentError.$create("CreateFmt",[pas.RTLConsts.SInvalidName,[e]]);null!=this.FOwner?this.FOwner.ValidateRename(this,this.FName,e):this.ValidateRename(null,this.FName,e),this.ChangeName(e)}},this.ValidateRename=function(e,i,s){if(null!==e&&0!==pas.SysUtils.CompareText(i,s)&&e.FOwner===this&&null!==this.FindComponent(s))throw t.EComponentError.$create("CreateFmt",[pas.RTLConsts.SDuplicateName,[s]]);4 in this.FComponentState&&null!==this.FOwner&&this.FOwner.ValidateRename(e,i,s)},this.ValidateContainer=function(t){t.ValidateInsert(this)},this.ValidateInsert=function(t){},this.Create$1=function(t){this.FComponentStyle=rtl.createSet(0),null!=t&&t.InsertComponent(this)},this.Destroy=function(){var t=0,e=null;if(this.Destroying(),null!=this.FFreeNotifies){for(t=this.FFreeNotifies.FCount-1;t>=0;)e=rtl.getObject(this.FFreeNotifies.Get(t)),this.FFreeNotifies.Delete(t),e.Notification(this,1),null===this.FFreeNotifies?t=0:t>this.FFreeNotifies.FCount&&(t=this.FFreeNotifies.FCount),t-=1;pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FFreeNotifies},set:function(t){this.p.FFreeNotifies=t}})}this.DestroyComponents(),null!==this.FOwner&&this.FOwner.RemoveComponent(this),pas.System.TObject.Destroy.call(this)},this.BeforeDestruction=function(){3 in this.FComponentState||this.Destroying()},this.DestroyComponents=function(){for(var t=null;null!=this.FComponents;)t=rtl.getObject(this.FComponents.Last()),this.Remove(t),t.$destroy("Destroy")},this.Destroying=function(){var t=0;if(!(3 in this.FComponentState)&&(this.FComponentState=rtl.includeSet(this.FComponentState,3),null!=this.FComponents))for(var e=0,i=this.FComponents.FCount-1;e<=i;e++)t=e,rtl.getObject(this.FComponents.Get(t)).Destroying()},this.FindComponent=function(t){var e=null,i=0;if(e=null,""===t||null==this.FComponents)return e;for(var s=0,n=this.FComponents.FCount-1;s<=n;s++)if(i=s,0===pas.SysUtils.CompareText(rtl.getObject(this.FComponents.Get(i)).FName,t))return e=rtl.getObject(this.FComponents.Get(i));return e},this.RemoveFreeNotification=function(t){this.RemoveNotification(t),t.RemoveNotification(this)},this.InsertComponent=function(t){t.ValidateContainer(this),this.ValidateRename(t,"",t.FName),this.Insert(t),4 in this.FComponentState&&t.SetDesigning(!0,!0),this.Notification(t,0)},this.RemoveComponent=function(t){this.Notification(t,1),this.Remove(t),t.SetDesigning(!1,!0),this.ValidateRename(t,t.FName,"")};var e=this.$rtti;e.addProperty("Name",6,rtl.string,"FName","SetName"),e.addProperty("Tag",0,rtl.nativeint,"FTag","FTag")}),t.$init=function(){e.ClassList=Object.create(null)}},["JS"],function(){"use strict";this.$impl.ClassList=null}),rtl.module("Math",["System","SysUtils"],function(){"use strict";this.Floor=function(t){return pas.System.Trunc(Math.floor(t))}}),rtl.module("Graphics",["System","JS","Web","Classes","SysUtils","Types"],function(){"use strict";var t=this;t.$rtti.$Int("TFontCharSet",{minvalue:0,maxvalue:255,ordtype:3}),this.TFontStyle={0:"fsBold",fsBold:0,1:"fsItalic",fsItalic:1,2:"fsUnderline",fsUnderline:2,3:"fsStrikeOut",fsStrikeOut:3},t.$rtti.$Enum("TFontStyle",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TFontStyle}),t.$rtti.$Set("TFontStyles",{comptype:t.$rtti.TFontStyle}),this.TPenStyle={0:"psSolid",psSolid:0,1:"psDash",psDash:1,2:"psDot",psDot:2,3:"psDashDot",psDashDot:3,4:"psDashDotDot",psDashDotDot:4,5:"psInsideFrame",psInsideFrame:5,6:"psPattern",psPattern:6,7:"psClear",psClear:7},t.$rtti.$Enum("TPenStyle",{minvalue:0,maxvalue:7,ordtype:1,enumtype:this.TPenStyle}),this.TBrushStyle={0:"bsSolid",bsSolid:0,1:"bsClear",bsClear:1,2:"bsHorizontal",bsHorizontal:2,3:"bsVertical",bsVertical:3,4:"bsFDiagonal",bsFDiagonal:4,5:"bsBDiagonal",bsBDiagonal:5,6:"bsCross",bsCross:6,7:"bsDiagCross",bsDiagCross:7,8:"bsImage",bsImage:8,9:"bsPattern",bsPattern:9},t.$rtti.$Enum("TBrushStyle",{minvalue:0,maxvalue:9,ordtype:1,enumtype:this.TBrushStyle}),this.TTextLayout={0:"tlTop",tlTop:0,1:"tlCenter",tlCenter:1,2:"tlBottom",tlBottom:2},this.TTextStyle=function(t){t?(this.Alignment=t.Alignment,this.Layout=t.Layout,this.SingleLine=t.SingleLine,this.Clipping=t.Clipping,this.ShowPrefix=t.ShowPrefix,this.Wordbreak=t.Wordbreak,this.Opaque=t.Opaque):(this.Alignment=0,this.Layout=0,this.SingleLine=!1,this.Clipping=!1,this.ShowPrefix=!1,this.Wordbreak=!1,this.Opaque=!1),this.$equal=function(t){return this.Alignment===t.Alignment&&this.Layout===t.Layout&&this.SingleLine===t.SingleLine&&this.Clipping===t.Clipping&&this.ShowPrefix===t.ShowPrefix&&this.Wordbreak===t.Wordbreak&&this.Opaque===t.Opaque}},this.TDefaultColorType={0:"dctBrush",dctBrush:0,1:"dctFont",dctFont:1},this.TGradientDirection={0:"gdVertical",gdVertical:0,1:"gdHorizontal",gdHorizontal:1},rtl.createClass(t,"TFont",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FCharSet=0,this.FColor=0,this.FIsDefault=!1,this.FName="",this.FSize=0,this.FStyle={},this.FUpdateCount=0,this.FOnChange=null},this.$final=function(){this.FStyle=void 0,this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.GetHeight=function(){return Math.round(96*this.FSize/72)},this.SetCharSet=function(t){this.FCharSet!==t&&(this.FCharSet=t,this.Changed())},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.Changed())},this.SetHeight=function(t){this.SetSize(Math.round(72*t/96))},this.SetName=function(t){this.FName!==t&&(this.FName=t,this.Changed())},this.SetSize=function(t){this.FSize!==t&&(this.FSize=t,this.Changed())},this.SetStyle=function(t){rtl.neSet(this.FStyle,t)&&(this.FStyle=rtl.refSet(t),this.Changed())},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){pas.System.TObject.Create.call(this),this.FColor=0,this.FIsDefault=!0,this.FName=t.ffMonospace,this.FSize=16,this.FStyle={},this.FUpdateCount=0},this.Assign=function(e){var i=null;if(null!=e&&t.TFont.isPrototypeOf(e)){this.BeginUpdate();try{i=e,this.FCharSet=i.FCharSet,this.FColor=i.FColor,this.FIsDefault=i.IsDefault(),this.FName=i.FName,this.FSize=i.FSize,this.FStyle=rtl.refSet(i.FStyle)}finally{this.EndUpdate()}}else pas.Classes.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1,0===this.FUpdateCount&&this.Changed())},this.IsDefault=function(){return this.FIsDefault},this.IsEqual=function(t){return null!=t&&(this.FCharSet!==t.FCharSet||this.FColor!==t.FColor||this.FName!==t.FName||this.FSize!==t.FSize||rtl.neSet(this.FStyle,t.FStyle))};var e=this.$rtti;e.addProperty("CharSet",2,t.$rtti.TFontCharSet,"FCharSet","SetCharSet"),e.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("Name",2,rtl.string,"FName","SetName"),e.addProperty("Size",2,rtl.longint,"FSize","SetSize"),e.addProperty("Style",2,t.$rtti.TFontStyles,"FStyle","SetStyle"),e.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange")}),rtl.createClass(t,"TPen",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FColor=0,this.FStyle=0,this.FWidth=0,this.FUpdateCount=0,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.Changed())},this.SetStyle=function(t){this.FStyle!==t&&(this.FStyle=t,this.Changed())},this.SetWidth=function(t){this.FWidth!==t&&(this.FWidth=t,this.Changed())},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){pas.System.TObject.Create.call(this),this.FColor=0,this.FStyle=0,this.FWidth=1,this.FUpdateCount=0},this.Assign=function(e){var i=null;if(null!=e&&t.TPen.isPrototypeOf(e)){this.BeginUpdate();try{i=e,this.FColor=i.FColor,this.FStyle=i.FStyle,this.FWidth=i.FWidth}finally{this.EndUpdate()}}else pas.Classes.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1,0===this.FUpdateCount&&this.Changed())};var e=this.$rtti;e.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),e.addProperty("Style",2,t.$rtti.TPenStyle,"FStyle","SetStyle"),e.addProperty("Width",2,rtl.longint,"FWidth","SetWidth"),e.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange")}),rtl.createClass(t,"TBrush",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FColor=0,this.FStyle=0,this.FUpdateCount=0,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.Changed())},this.SetStyle=function(t){this.FStyle===t&&(this.FStyle=t,this.Changed())},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){pas.System.TObject.Create.call(this),this.FColor=16777215,this.FStyle=0,this.FUpdateCount=0},this.Assign=function(e){var i=null;if(null!=e&&t.TBrush.isPrototypeOf(e)){this.BeginUpdate();try{i=e,this.FColor=i.FColor,this.FStyle=i.FStyle}finally{this.EndUpdate()}}else pas.Classes.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1,0===this.FUpdateCount&&this.Changed())};var e=this.$rtti;e.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),e.addProperty("Style",2,t.$rtti.TBrushStyle,"FStyle","SetStyle"),e.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange")}),rtl.createClass(t,"TCanvas",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FBrush=null,this.FFont=null,this.FPen=null,this.FTextStyle=new t.TTextStyle,this.FCanvasElement=null,this.FContextElement=null},this.$final=function(){this.FBrush=void 0,this.FFont=void 0,this.FPen=void 0,this.FTextStyle=void 0,this.FCanvasElement=void 0,this.FContextElement=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetPixel=function(e,i,s){null!=this.FContextElement&&(this.FContextElement.fillStyle=t.JSColor(s),this.FContextElement.fillRect(e,i,1,1))},this.PrepareStyle=function(){this.FContextElement.fillStyle=t.JSColor(this.FBrush.FColor),this.FContextElement.lineWidth=this.FPen.FWidth,this.FContextElement.strokeStyle=t.JSColor(this.FPen.FColor);var e=this.FPen.FStyle;2===e?this.FContextElement.setLineDash([1,2]):1===e?this.FContextElement.setLineDash([8,2]):3===e?this.FContextElement.setLineDash([6,2,2,2]):4===e?this.FContextElement.setLineDash([6,2,2,2]):7===e?this.FContextElement.setLineDash([0,65535]):this.FContextElement.setLineDash([])},this.PrepareText=function(){this.FContextElement.font=t.JSFont(this.FFont),this.FContextElement.fillStyle=t.JSColor(this.FFont.FColor),this.FContextElement.textBaseline="hanging"},this.Create$1=function(){pas.System.TObject.Create.call(this),this.FCanvasElement=document.createElement("canvas"),this.FContextElement=this.FCanvasElement.getContext("2d"),this.FBrush=t.TBrush.$create("Create$1"),this.FFont=t.TFont.$create("Create$1"),this.FPen=t.TPen.$create("Create$1");var e=this.FTextStyle;e.Alignment=0,e.Layout=0,e.Wordbreak=!1,e.SingleLine=!0,e.Clipping=!0,e.ShowPrefix=!1,e.Opaque=!1},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FBrush},set:function(t){this.p.FBrush=t}}),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FFont},set:function(t){this.p.FFont=t}}),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPen},set:function(t){this.p.FPen=t}}),pas.System.TObject.Destroy.call(this)},this.FillRect=function(t,e,i,s){this.Rectangle(t,e,i,s)},this.FillRect$1=function(t){this.Rectangle$1(t)},this.GradientFill=function(t,e,i,s){},this.Line=function(t,e,i,s){null!=this.FContextElement&&(this.PrepareStyle(),this.FContextElement.beginPath(),this.FContextElement.moveTo(t,e),this.FContextElement.lineTo(i,s),this.FContextElement.stroke())},this.LineTo=function(t,e){null!=this.FContextElement&&(this.PrepareStyle(),this.FContextElement.lineTo(t,e),7!==this.FPen.FStyle&&this.FContextElement.stroke())},this.MoveTo=function(t,e){null!=this.FContextElement&&(this.FContextElement.beginPath(),this.PrepareStyle(),this.FContextElement.moveTo(t,e))},this.Polygon=function(t){var e,i=0,s=new pas.Types.TPoint;if(e=rtl.length(t),null!=this.FContextElement&&e>0){this.PrepareStyle(),this.FContextElement.beginPath(),this.FContextElement.moveTo(t[0].x,t[0].y);for(var n=0,r=e-1;n<=r;n++)i=n,s=new pas.Types.TPoint(t[i]),this.FContextElement.lineTo(s.x,s.y);this.FContextElement.closePath(),1!==this.FBrush.FStyle&&this.FContextElement.fill(),7!==this.FPen.FStyle&&this.FContextElement.stroke()}},this.Rectangle=function(t,e,i,s){null!=this.FContextElement&&(this.PrepareStyle(),this.FContextElement.beginPath(),this.FContextElement.rect(t,e,i,s),1!==this.FBrush.FStyle&&this.FContextElement.fill(),7!==this.FPen.FStyle&&this.FContextElement.stroke())},this.Rectangle$1=function(t){this.Rectangle(t.Left,t.Top,t.Right-t.Left,t.Bottom-t.Top)},this.TextExtent=function(t){var e=new pas.Types.TSize;return null!=this.FContextElement&&(this.PrepareText(),e.cx=Math.round(this.FContextElement.measureText(t).width),e.cy=this.FFont.GetHeight()),e},this.TextFitInfo=function(t,e){var i=0,s=0,n=0;return i=0,null!=this.FContextElement&&(s=t.length,n=Math.round(Math.floor(this.TextWidth(t)/s)),s<(i=pas.System.Trunc(Math.floor(e/n)))&&(i=s)),i},this.TextHeight=function(t){return this.TextExtent(t).cy},this.TextOut=function(t,e,i){null!=this.FContextElement&&(this.PrepareText(),this.FContextElement.fillText(i,t,e))},this.TextWidth=function(t){return this.TextExtent(t).cx}}),this.clBlack=0,this.clGray=8421504,this.clSilver=12632256,this.clWhite=16777215,this.clNone=536870911,this.clDefault=536870912,this.clBase=2147483648,this.clScrollBar=2147483648,this.clBackground=2147483649,this.clActiveCaption=2147483650,this.clInactiveCaption=2147483651,this.clMenu=2147483652,this.clWindow=2147483653,this.clWindowFrame=2147483654,this.clMenuText=2147483655,this.clWindowText=2147483656,this.clCaptionText=2147483657,this.clActiveBorder=2147483658,this.clInactiveBorder=2147483659,this.clAppWorkspace=2147483660,this.clHighlight=2147483661,this.clHighlightText=2147483662,this.clBtnFace=2147483663,this.clBtnShadow=2147483664,this.clGrayText=2147483665,this.clBtnText=2147483666,this.clInactiveCaptionText=2147483667,this.clBtnHighlight=2147483668,this.cl3DDkShadow=2147483669,this.cl3DLight=2147483670,this.clInfoText=2147483671,this.clInfoBk=2147483672,this.clHotLight=2147483674,this.clGradientActiveCaption=2147483675,this.clGradientInactiveCaption=2147483676,this.clMenuHighlight=2147483677,this.clMenuBar=2147483678,this.clForm=2147483679,this.ffMonospace="Consolas, monaco, monospace",this.JSColor=function(t){var e="",i=0,s=0,n=0;return 2147483648===t?e="Scrollbar":2147483649===t?e="Background":2147483650===t?e="ActiveCaption":2147483651===t?e="InactiveCaption":2147483652===t?e="Menu":2147483653===t?e="Window":2147483654===t?e="WindowFrame":2147483655===t?e="MenuText":2147483656===t?e="WindowText":2147483657===t?e="CaptionText":2147483658===t?e="ActiveBorder":2147483659===t?e="InactiveBorder":2147483660===t?e="AppWorkspace":2147483661===t?e="Highlight":2147483662===t?e="HighlightText":2147483663===t?e="ButtonFace":2147483664===t?e="ButtonShadow":2147483665===t?e="GrayText":2147483666===t?e="ButtonText":2147483667===t?e="InactiveCaptionText":2147483668===t?e="ButtonHighlight":2147483669===t?e="ThreeDDarkShadow":2147483670===t?e="ThreeDHighlight":2147483671===t?e="InfoText":2147483672===t?e="InfoBackground":(i=255&t,s=t>>>8&255,n=t>>>16&255,e="#"+pas.SysUtils.IntToHex(i,2)+pas.SysUtils.IntToHex(s,2)+pas.SysUtils.IntToHex(n,2)),e},this.JSFont=function(t){var e="";return e="",null!=t&&(0 in t.FStyle&&(e+="bold "),1 in t.FStyle&&(e+="italic "),e=e+pas.SysUtils.IntToStr(t.FSize)+"px "+t.FName),e},this.ColorToRGB=function(t){return t}}),rtl.module("WebExtra",["System","JS","Web","Classes","SysUtils","Math"],function(){"use strict";this.IfThen=function(t,e,i){return t?e:i}}),rtl.module("Controls",["System","JS","Web","Classes","SysUtils","Types","Math","Graphics"],function(){"use strict";var t=this;this.mrNone=0,this.crDefault=0,this.crNone=-1,this.crCross=-3,this.crIBeam=-4,this.crSize=-22,this.crSizeNESW=-6,this.crSizeNS=-7,this.crSizeNWSE=-8,this.crSizeWE=-9,this.crSizeNW=-23,this.crSizeN=-24,this.crSizeNE=-25,this.crSizeW=-26,this.crSizeE=-27,this.crSizeSW=-28,this.crSizeS=-29,this.crSizeSE=-30,this.crHourGlass=-11,this.crNoDrop=-13,this.crHSplit=-14,this.crVSplit=-15,this.crSQLWait=-17,this.crNo=-18,this.crAppStart=-19,this.crHelp=-20,this.crHandPoint=-21,t.$rtti.$Class("TWinControl"),this.TAlign={0:"alNone",alNone:0,1:"alTop",alTop:1,2:"alBottom",alBottom:2,3:"alLeft",alLeft:3,4:"alRight",alRight:4,5:"alClient",alClient:5,6:"alCustomd",alCustomd:6},t.$rtti.$Enum("TAlign",{minvalue:0,maxvalue:6,ordtype:1,enumtype:this.TAlign}),this.TBevelCut={0:"bvNone",bvNone:0,1:"bvLowered",bvLowered:1,2:"bvRaised",bvRaised:2,3:"bvSpace",bvSpace:3},this.TFormBorderStyle={0:"bsNone",bsNone:0,1:"bsSingle",bsSingle:1,2:"bsSizeable",bsSizeable:2,3:"bsDialog",bsDialog:3,4:"bsToolWindow",bsToolWindow:4,5:"bsSizeToolWin",bsSizeToolWin:5},this.TShiftStateEnum={0:"ssShift",ssShift:0,1:"ssAlt",ssAlt:1,2:"ssCtrl",ssCtrl:2,3:"ssLeft",ssLeft:3,4:"ssRight",ssRight:4,5:"ssMIDdle",ssMIDdle:5,6:"ssDouble",ssDouble:6},t.$rtti.$Enum("TShiftStateEnum",{minvalue:0,maxvalue:6,ordtype:1,enumtype:this.TShiftStateEnum}),t.$rtti.$Set("TShiftState",{comptype:t.$rtti.TShiftStateEnum}),t.$rtti.$MethodVar("TKeyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Key",rtl.word,1],["Shift",t.$rtti.TShiftState]]),methodkind:0}),t.$rtti.$MethodVar("TKeyPressEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Key",rtl.char,1]]),methodkind:0}),this.TMouseButton={0:"mbLeft",mbLeft:0,1:"mbRight",mbRight:1,2:"mbMiddle",mbMiddle:2},t.$rtti.$Enum("TMouseButton",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMouseButton}),t.$rtti.$MethodVar("TMouseEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Button",t.$rtti.TMouseButton],["Shift",t.$rtti.TShiftState],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),t.$rtti.$MethodVar("TMouseMoveEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",t.$rtti.TShiftState],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),t.$rtti.$MethodVar("TMouseWheelEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",t.$rtti.TShiftState],["WheelDelta",rtl.longint],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.TFocusSearchDirection={0:"fsdFirst",fsdFirst:0,1:"fsdLast",fsdLast:1,2:"fsdNext",fsdNext:2,3:"fsdPrev",fsdPrev:3},t.$rtti.$inherited("TImageIndex",rtl.longint,{}),t.$rtti.$inherited("TTranslateString",rtl.string,{}),t.$rtti.$inherited("TCaption",rtl.string,{}),t.$rtti.$Int("TCursor",{minvalue:-32768,maxvalue:32767,ordtype:2}),this.TControlStyleType={0:"csAcceptsControls",csAcceptsControls:0,1:"csCaptureMouse",csCaptureMouse:1,2:"csDesignInteractive",csDesignInteractive:2,3:"csClickEvents",csClickEvents:3,4:"csFramed",csFramed:4,5:"csSetCaption",csSetCaption:5,6:"csOpaque",csOpaque:6,7:"csDoubleClicks",csDoubleClicks:7,8:"csTripleClicks",csTripleClicks:8,9:"csQuadClicks",csQuadClicks:9,10:"csFixedWidth",csFixedWidth:10,11:"csFixedHeight",csFixedHeight:11,12:"csNoDesignVisible",csNoDesignVisible:12,13:"csReplicatable",csReplicatable:13,14:"csNoStdEvents",csNoStdEvents:14,15:"csDisplayDragImage",csDisplayDragImage:15,16:"csReflector",csReflector:16,17:"csActionClient",csActionClient:17,18:"csMenuEvents",csMenuEvents:18,19:"csNoFocus",csNoFocus:19,20:"csNeedsBorderPaint",csNeedsBorderPaint:20,21:"csParentBackground",csParentBackground:21,22:"csDesignNoSmoothResize",csDesignNoSmoothResize:22,23:"csDesignFixedBounds",csDesignFixedBounds:23,24:"csHasDefaultAction",csHasDefaultAction:24,25:"csHasCancelAction",csHasCancelAction:25,26:"csNoDesignSelectable",csNoDesignSelectable:26,27:"csOwnedChildrenNotSelectable",csOwnedChildrenNotSelectable:27,28:"csAutoSize0x0",csAutoSize0x0:28,29:"csAutoSizeKeepChildLeft",csAutoSizeKeepChildLeft:29,30:"csAutoSizeKeepChildTop",csAutoSizeKeepChildTop:30,31:"csRequiresKeyboardInput",csRequiresKeyboardInput:31},rtl.createClass(t,"TControlCanvas",pas.Graphics.TCanvas,function(){this.$init=function(){pas.Graphics.TCanvas.$init.call(this),this.FControl=null,this.FHeight=0,this.FWidth=0},this.$final=function(){this.FControl=void 0,pas.Graphics.TCanvas.$final.call(this)},this.SetControl=function(t){this.FControl!==t&&null!=t&&(this.FControl=t,this.FControl.FHandle.insertBefore(this.FCanvasElement,this.FControl.FHandle.firstChild),this.Refresh(),this.FFont.Assign(this.FControl.FFont))},this.Create$2=function(){pas.Graphics.TCanvas.Create$1.call(this),this.FControl=null,this.FHeight=0,this.FWidth=0},this.Refresh=function(){null!=this.FCanvasElement&&null!=this.FControl&&(this.FHeight=this.FControl.FHeight,this.FWidth=this.FControl.FWidth,this.FCanvasElement.height=this.FHeight,this.FCanvasElement.width=this.FControl.FWidth,this.FCanvasElement.style.setProperty("position","fixed"))}}),rtl.createClass(t,"TControlBorderSpacing",pas.Classes.TPersistent,function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FAround=0,this.FBottom=0,this.FLeft=0,this.FRight=0,this.FTop=0,this.FUpdateCount=0,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetBottom=function(t){this.FBottom!==t&&(this.FBottom=t,this.Changed())},this.SetRight=function(t){this.FRight!==t&&(this.FRight=t,this.Changed())},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){pas.System.TObject.Create.call(this),this.FBottom=0,this.FLeft=0,this.FRight=0,this.FTop=0,this.FUpdateCount=0},this.Assign=function(e){var i=null;if(null!=e&&t.TControlBorderSpacing.isPrototypeOf(e)){this.BeginUpdate();try{i=e,this.FAround=i.FAround,this.FBottom=i.FBottom,this.FLeft=i.FLeft,this.FRight=i.FRight,this.FTop=i.FTop}finally{this.EndUpdate()}}else pas.Classes.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1,0===this.FUpdateCount&&this.Changed())}}),rtl.createClass(t,"TControl",pas.Classes.TComponent,function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FAlign=0,this.FAutoSize=!1,this.FBorderSpacing=null,this.FBorderStyle=t.TFormBorderStyle.bsNone,this.FCaption="",this.FColor=0,this.FControlStyle={},this.FCursor=0,this.FEnabled=!1,this.FFont=null,this.FHandle=null,this.FHandleClass="",this.FHandleId="",this.FHeight=0,this.FHint="",this.FLeft=0,this.FParent=null,this.FParentColor=!1,this.FParentFont=!1,this.FParentShowHint=!1,this.FShowHint=!1,this.FTabOrder=0,this.FTabStop=!1,this.FTop=0,this.FUpdateCount=0,this.FVisible=!1,this.FWidth=0,this.FOnClick=null,this.FOnDblClick=null,this.FOnMouseDown=null,this.FOnMouseEnter=null,this.FOnMouseLeave=null,this.FOnMouseMove=null,this.FOnMouseUp=null,this.FOnMouseWheel=null,this.FOnResize=null,this.FOnScroll=null},this.$final=function(){this.FBorderSpacing=void 0,this.FControlStyle=void 0,this.FFont=void 0,this.FHandle=void 0,this.FParent=void 0,this.FOnClick=void 0,this.FOnDblClick=void 0,this.FOnMouseDown=void 0,this.FOnMouseEnter=void 0,this.FOnMouseLeave=void 0,this.FOnMouseMove=void 0,this.FOnMouseUp=void 0,this.FOnMouseWheel=void 0,this.FOnResize=void 0,this.FOnScroll=void 0,pas.Classes.TComponent.$final.call(this)},this.GetText=function(){return this.RealGetText()},this.SetAlign=function(t){this.FAlign!==t&&(this.FAlign=t,this.ReAlign())},this.SetAutoSize=function(t){this.FAutoSize!==t&&(this.FAutoSize=t,this.FAutoSize&&this.AdjustSize())},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.FParentColor=!1,this.Changed(),this.Invalidate())},this.SetCursor=function(t){this.FCursor!==t&&(this.FCursor=t,this.Changed())},this.SetFont=function(t){this.FFont.IsEqual(t)||this.FFont.Assign(t)},this.SetHandleClass=function(t){this.FHandleClass!==t&&(this.FHandleClass=t,this.Changed())},this.SetHandleId=function(t){this.FHandleId!==t&&(this.FHandleId=t,this.Changed())},this.SetHeight=function(t){this.SetBounds(this.FLeft,this.FTop,this.FWidth,t)},this.SetHint=function(t){this.FHint!==t&&(this.FHint=t,this.Changed())},this.SetLeft=function(t){this.SetBounds(t,this.FTop,this.FWidth,this.FHeight)},this.SetParentFont=function(t){this.FParentFont!==t&&(this.FParentFont=t,null!=this.FParent&&this.FParentFont&&(this.FFont.IsEqual(this.FParent.FFont)||this.FFont.Assign(this.FParent.FFont)))},this.SetParentShowHint=function(t){this.FParentShowHint!==t&&(this.FParentShowHint=t,this.FParentShowHint&&null!=this.FParent&&(this.FShowHint=this.FParent.FShowHint,this.Changed()))},this.SetShowHint=function(t){this.FShowHint!==t&&(this.FShowHint=t,this.FParentShowHint=!1,this.Changed())},this.SetTabOrder=function(t){this.FTabOrder!==t&&(this.FTabOrder=t,null!=this.FParent&&this.FParent.UpdateTabOrder(this))},this.SetTabStop=function(t){this.FTabStop!==t&&(this.FTabStop=t,this.Changed())},this.SetText=function(t){this.RealSetText(t)},this.SetTop=function(t){this.SetBounds(this.FLeft,t,this.FWidth,this.FHeight)},this.SetVisible=function(t){this.FVisible!==t&&(this.FVisible=t,this.ReAlign())},this.SetWidth=function(t){this.SetBounds(this.FLeft,this.FTop,t,this.FHeight)},this.GetClientHeight=function(){return this.GetClientRect().Bottom},this.GetClientRect=function(){new pas.Types.TRect;return new pas.Types.TRect(pas.Types.Rect(0,0,this.FWidth,this.FHeight))},this.GetClientWidth=function(){return this.GetClientRect().Right},this.SetClientHeight=function(t){this.SetClientSize(new pas.Types.TPoint(pas.Types.Point(this.GetClientWidth(),t)))},this.SetClientSize=function(t){var e=new pas.Types.TRect;e=new pas.Types.TRect(this.GetClientRect()),this.SetBounds(this.FLeft,this.FTop,this.FWidth-e.Right+t.x,this.FHeight-e.Bottom+t.y)},this.SetClientWidth=function(t){this.SetClientSize(new pas.Types.TPoint(pas.Types.Point(t,this.GetClientHeight())))},this.SetEnabled=function(t){this.FEnabled!==t&&(this.FEnabled=t,this.Changed(),this.Invalidate())},this.SetParent=function(t){if(this.CheckNewParent(t),null!=this.FParent&&this.FParent.RemoveControl(this),this.FParent=t,null!=this.FParent){this.FParent.InsertControl(this),this.BeginUpdate();try{this.FParentColor&&(this.FColor=this.FParent.FColor),this.FParentFont&&this.FFont.Assign(this.FParent.FFont),this.FParentShowHint&&(this.FShowHint=this.FParent.FShowHint)}finally{this.EndUpdate()}this.Invalidate()}},this.Click=function(){null!=this.FOnClick&&this.FOnClick(this)},this.DblClick=function(){null!=this.FOnDblClick&&this.FOnDblClick(this)},this.DoResize=function(){null!=this.FOnResize&&this.FOnResize(this)},this.DoScroll=function(){null!=this.FOnScroll&&this.FOnScroll(this)},this.MouseDown=function(t,e,i,s){null!=this.FOnMouseDown&&this.FOnMouseDown(this,t,rtl.refSet(e),i,s)},this.MouseEnter=function(){null!=this.FOnMouseEnter&&this.FOnMouseEnter(this)},this.MouseLeave=function(){null!=this.FOnMouseLeave&&this.FOnMouseLeave(this)},this.MouseMove=function(t,e,i){null!=this.FOnMouseMove&&this.FOnMouseMove(this,rtl.refSet(t),e,i)},this.MouseUp=function(t,e,i,s){null!=this.FOnMouseUp&&this.FOnMouseUp(this,t,rtl.refSet(e),i,s)},this.MouseWeel=function(t,e,i,s){null!=this.FOnMouseWheel&&this.FOnMouseWheel(this,rtl.refSet(t),e,new pas.Types.TPoint(i),s)},this.HandleClick=function(t){return t.stopPropagation(),this.Click(),!0,!0},this.HandleDblClick=function(t){return t.stopPropagation(),this.DblClick(),!0,!0},this.HandleMouseDown=function(e){var i,s,n,r,o=new pas.Types.TRect;return e.stopPropagation(),o=new pas.Types.TRect(t.OffSets(this.FHandle)),i=t.ExtractMouseButton(e),s=rtl.refSet(t.ExtractShiftState$1(e)),n=pas.System.Trunc(e.clientX-o.Left),r=pas.System.Trunc(e.clientY-o.Top),this.MouseDown(i,rtl.refSet(s),n,r),!0,!0},this.HandleMouseEnter=function(t){return t.stopPropagation(),this.MouseEnter(),!0,!0},this.HandleMouseLeave=function(t){return t.stopPropagation(),this.MouseLeave(),!0,!0},this.HandleMouseMove=function(e){var i,s,n,r=new pas.Types.TRect;return e.stopPropagation(),r=new pas.Types.TRect(t.OffSets(this.FHandle)),i=rtl.refSet(t.ExtractShiftState$1(e)),s=pas.System.Trunc(e.clientX-r.Left),n=pas.System.Trunc(e.clientY-r.Top),this.MouseMove(rtl.refSet(i),s,n),!0,!0},this.HandleMouseUp=function(e){var i,s,n,r,o=new pas.Types.TRect;return e.stopPropagation(),o=new pas.Types.TRect(t.OffSets(this.FHandle)),i=t.ExtractMouseButton(e),s=rtl.refSet(t.ExtractShiftState$1(e)),n=pas.System.Trunc(e.clientX-o.Left),r=pas.System.Trunc(e.clientY-o.Top),this.MouseUp(i,rtl.refSet(s),n,r),!0,!0},this.HandleMouseWheel=function(e){var i,s,n=!1,r=new pas.Types.TPoint,o=new pas.Types.TRect;return e.stopPropagation(),i=pas.System.Trunc(-e.deltaY),n=!1,o=new pas.Types.TRect(t.OffSets(this.FHandle)),r=new pas.Types.TPoint(pas.Types.Point(o.Left,o.Top)),s=rtl.refSet(t.ExtractShiftState$1(e)),this.MouseWeel(rtl.refSet(s),i,new pas.Types.TPoint(r),{get:function(){return n},set:function(t){n=t}}),!0,!0},this.HandleResize=function(t){return t.stopPropagation(),this.DoResize(),!0,!0},this.HandleScroll=function(t){return t.stopPropagation(),this.DoScroll(),!0,!0},this.AlignControls=function(){var e=null,i=null,s=null,n=0,r=0,o=0,a=0,l=0,h=0;if(t.TWinControl.isPrototypeOf(this)){e=this,this.BeginUpdate();try{r=0,o=0,a=e.FWidth,l=e.FHeight,h=e.FWidth;for(var u=0,c=e.GetControlCount()-1;u<=c;u++)if(n=u,null!=(i=e.GetControl(n))&&1===i.FAlign&&i.FVisible){i.BeginUpdate();try{s=i.FBorderSpacing,i.SetLeft(r+s.FLeft+s.FAround),i.SetTop(o+s.FTop+s.FAround),i.SetWidth(h-s.FLeft-s.FRight-2*s.FAround),i.SetHeight(i.FHeight)}finally{i.EndUpdate()}o=o+i.FHeight+s.FTop+s.FBottom+2*s.FAround}o<0&&(o=0);for(var d=0,S=e.GetControlCount()-1;d<=S;d++)if(n=d,null!=(i=e.GetControl(n))&&2===i.FAlign&&i.FVisible){i.BeginUpdate();try{s=i.FBorderSpacing,i.SetLeft(r+s.FLeft+s.FAround),i.SetTop(l-i.FHeight-s.FBottom-s.FAround),i.SetWidth(h-s.FLeft-s.FRight-2*s.FAround),i.SetHeight(i.FHeight)}finally{i.EndUpdate()}l=l-i.FHeight-s.FTop-s.FBottom-2*s.FAround}l<0&&(l=0);for(var C=0,F=e.GetControlCount()-1;C<=F;C++)if(n=C,null!=(i=e.GetControl(n))&&3===i.FAlign&&i.FVisible){i.BeginUpdate();try{s=i.FBorderSpacing,i.SetLeft(r+s.FLeft+s.FAround),i.SetTop(o+s.FTop+s.FAround),i.SetWidth(i.FWidth),i.SetHeight(l-o-s.FTop-s.FBottom-2*s.FAround)}finally{i.EndUpdate()}r=r+i.FWidth+s.FLeft+s.FRight+2*s.FAround}r<0&&(r=0);for(var p=0,f=e.GetControlCount()-1;p<=f;p++)if(n=p,null!=(i=e.GetControl(n))&&4===i.FAlign&&i.FVisible){i.BeginUpdate();try{s=i.FBorderSpacing,i.SetLeft(a-i.FWidth-s.FRight-s.FAround),i.SetTop(o+s.FTop+s.FAround),i.SetWidth(i.FWidth),i.SetHeight(l-o-s.FTop-s.FBottom-2*s.FAround)}finally{i.EndUpdate()}a=a-i.FWidth-s.FLeft-s.FRight-2*s.FAround}a<0&&(a=0);for(var T=0,y=e.GetControlCount()-1;T<=y;T++)if(n=T,null!=(i=e.GetControl(n))&&5===i.FAlign&&i.FVisible){i.BeginUpdate();try{s=i.FBorderSpacing,i.SetLeft(r+s.FLeft+s.FAround),i.SetTop(o+s.FTop+s.FAround),i.SetWidth(a-r-s.FLeft-s.FRight-2*s.FAround),i.SetHeight(l-o-s.FTop-s.FBottom-2*s.FAround)}finally{i.EndUpdate()}}}finally{this.EndUpdate()}}},this.BorderSpacingChanged=function(t){null!=this.FParent&&this.FParent.AlignControls()},this.Changed=function(){this.IsUpdating()||(""!==this.FHandleId?this.FHandle.setAttribute("id",this.FHandleId):this.FHandle.removeAttribute("id"),""!==this.FHandleClass?this.FHandle.setAttribute("class",this.FHandleClass):this.FHandle.removeAttribute("class"),""===this.FHandleClass&&""===this.FHandleId&&(this.FHandle.style.setProperty("color",pas.Graphics.JSColor(this.FFont.FColor)),this.FHandle.style.setProperty("font-family",this.FFont.FName),this.FHandle.style.setProperty("font-size",pas.SysUtils.IntToStr(this.FFont.FSize)+"px"),this.FHandle.style.setProperty("font-style","normal"),this.FHandle.style.setProperty("font-weight",""+pas.WebExtra.IfThen(0 in this.FFont.FStyle,"bold","normal")),this.FHandle.style.setProperty("text-decoration",""+pas.WebExtra.IfThen(2 in this.FFont.FStyle,"underline","normal")),this.FColor in rtl.createSet(536870912,536870911)?this.FHandle.style.removeProperty("background-color"):this.FHandle.style.setProperty("background-color",pas.Graphics.JSColor(this.FColor))),this.FHandle.style.setProperty("left",pas.SysUtils.IntToStr(this.FLeft)+"px"),this.FHandle.style.setProperty("top",pas.SysUtils.IntToStr(this.FTop)+"px"),this.FHandle.style.setProperty("width",pas.SysUtils.IntToStr(this.FWidth)+"px"),this.FHandle.style.setProperty("height",pas.SysUtils.IntToStr(this.FHeight)+"px"),this.FHandle.style.setProperty("cursor",t.JSCursor(this.FCursor)),this.FEnabled?(this.FHandle.removeAttribute("disabled"),this.FHandle.style.removeProperty("opacity")):(this.FHandle.setAttribute("disabled","true"),this.FHandle.style.setProperty("opacity","0.5")),this.FVisible?(this.FHandle.style.setProperty("visibility","visible"),this.FHandle.style.setProperty("display","block")):(this.FHandle.style.setProperty("visibility","hidden"),this.FHandle.style.setProperty("display","none")),""!==this.FHint&&this.FShowHint?this.FHandle.setAttribute("title",this.FHint):this.FHandle.removeAttribute("title"),0===this.FBorderStyle?this.FHandle.style.setProperty("border-style","none"):this.FHandle.style.removeProperty("border-style"),this.FHandle.setAttribute("tabindex",""+pas.WebExtra.IfThen(this.FTabStop,"1","-1")),this.FHandle.style.setProperty("position","absolute"),this.FHandle.style.setProperty("overflow","hidden"),this.FHandle.style.setProperty("-webkit-box-sizing","border-box"),this.FHandle.style.setProperty("-moz-box-sizing","border-box"),this.FHandle.style.setProperty("box-sizing","border-box"))},this.CheckChildClassAllowed=function(e){return null!=e&&e.InheritsFrom(t.TControl)},this.CheckNewParent=function(t){if(null!=t&&!t.CheckChildClassAllowed(this.$class.ClassType()))throw new Error(pas.SysUtils.Format("Control of class '%s' can't have control of class '%s' as a child",[t.$class.ClassType(),this.$classname]));if(pas.Forms.TCustomForm.isPrototypeOf(this)&&pas.Forms.TCustomForm.isPrototypeOf(t))throw new Error('A "Form" can\'t have another "Form" as parent');if(this===t)throw new Error('A "Control" can\'t have itself as a Parent')},this.CreateHandle=function(){throw new Error(pas.SysUtils.Format("%s.CreateHandleElement=nil",[this.$classname]))},this.FontChanged=function(t){this.Changed(),this.FAutoSize&&this.AdjustSize()},this.RealGetText=function(){return this.FCaption},this.RealSetText=function(t){this.FCaption!==t&&(this.FCaption=t,this.Invalidate())},this.RegisterHandleEvents=function(){this.FHandle.addEventListener("click",rtl.createCallback(this,"HandleClick")),this.FHandle.addEventListener("dblclick",rtl.createCallback(this,"HandleDblClick")),this.FHandle.addEventListener("mousedown",rtl.createCallback(this,"HandleMouseDown")),this.FHandle.addEventListener("mouseenter",rtl.createCallback(this,"HandleMouseEnter")),this.FHandle.addEventListener("mouseleave",rtl.createCallback(this,"HandleMouseLeave")),this.FHandle.addEventListener("mousemove",rtl.createCallback(this,"HandleMouseMove")),this.FHandle.addEventListener("mouseup",rtl.createCallback(this,"HandleMouseUp")),this.FHandle.addEventListener("scroll",rtl.createCallback(this,"HandleScroll")),this.FHandle.addEventListener("resize",rtl.createCallback(this,"HandleResize")),this.FHandle.addEventListener("wheel",rtl.createCallback(this,"HandleMouseWheel"))},this.UnRegisterHandleEvents=function(){this.FHandle.removeEventListener("click",rtl.createCallback(this,"HandleClick")),this.FHandle.removeEventListener("dblclick",rtl.createCallback(this,"HandleDblClick")),this.FHandle.removeEventListener("mousedown",rtl.createCallback(this,"HandleMouseDown")),this.FHandle.removeEventListener("mouseenter",rtl.createCallback(this,"HandleMouseEnter")),this.FHandle.removeEventListener("mouseleave",rtl.createCallback(this,"HandleMouseLeave")),this.FHandle.removeEventListener("mousemove",rtl.createCallback(this,"HandleMouseMove")),this.FHandle.removeEventListener("mouseup",rtl.createCallback(this,"HandleMouseUp")),this.FHandle.removeEventListener("scroll",rtl.createCallback(this,"HandleScroll")),this.FHandle.removeEventListener("resize",rtl.createCallback(this,"HandleResize")),this.FHandle.removeEventListener("wheel",rtl.createCallback(this,"HandleMouseWheel"))},this.GetControlClassDefaultSize=function(){var t=new pas.Types.TSize;return t.cx=75,t.cy=50,t},this.GetDefaultColor=function(t){var e=0;if(this.FParentColor&&null!=this.FParent)e=this.FParent.GetDefaultColor(t);else{0===t?e=16777215:1===t&&(e=0)}return e},this.GetColorResolvingParent=function(){return 536870912===this.FColor?this.GetDefaultColor(0):this.FColor},this.GetRGBColorResolvingParent=function(){return pas.Graphics.ColorToRGB(this.GetColorResolvingParent())},this.Create$1=function(e){pas.Classes.TComponent.Create$1.call(this,e),this.FHandle=this.CreateHandle(),this.FHandleClass="",this.FHandleId="",this.RegisterHandleEvents(),this.FBorderSpacing=t.TControlBorderSpacing.$create("Create$1"),this.FBorderSpacing.FOnChange=rtl.createCallback(this,"BorderSpacingChanged"),this.FFont=pas.Graphics.TFont.$create("Create$1"),this.FFont.FOnChange=rtl.createCallback(this,"FontChanged"),this.FBorderStyle=1,this.FAlign=0,this.FAutoSize=!1,this.FCaption="",this.FColor=536870912,this.FCursor=0,this.FEnabled=!0,this.FParent=null,this.FParentColor=!1,this.FParentFont=!0,this.FParentShowHint=!0,this.FShowHint=!1,this.FTabOrder=0,this.FTabStop=!0,this.FUpdateCount=0,this.FVisible=!0;var i=this.$class.GetControlClassDefaultSize();this.FLeft=0,this.FTop=0,this.FWidth=i.cx,this.FHeight=i.cy},this.Destroy=function(){this.UnRegisterHandleEvents(),null!=this.FParent&&t.TWinControl.isPrototypeOf(this.FParent)&&this.FParent.RemoveControl(this),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FBorderSpacing},set:function(t){this.p.FBorderSpacing=t}}),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FFont},set:function(t){this.p.FFont=t}}),pas.Classes.TComponent.Destroy.call(this)},this.AdjustSize=function(){},this.BeginUpdate=function(){this.FUpdateCount+=1},this.BringToFront=function(){var t=null;null!=(t=this.FHandle.parentElement)&&(t.removeChild(this.FHandle),t.appendChild(this.FHandle))},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1,0===this.FUpdateCount&&this.Changed())},this.Invalidate=function(){},this.IsUpdating=function(){return this.FUpdateCount>0},this.ReAlign=function(){this.AlignControls(),null!=this.FParent&&this.FParent.ReAlign(),this.Invalidate()},this.SetBounds=function(t,e,i,s){this.FLeft===t&&this.FTop===e&&this.FWidth===i&&this.FHeight===s||(this.FLeft=t,this.FTop=e,this.FWidth=i,this.FHeight=s,this.ReAlign())};var e=this.$rtti;e.addProperty("Cursor",2,t.$rtti.TCursor,"FCursor","SetCursor"),e.addProperty("Height",2,rtl.longint,"FHeight","SetHeight"),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("Left",2,rtl.longint,"FLeft","SetLeft"),e.addProperty("Top",2,rtl.longint,"FTop","SetTop"),e.addProperty("Width",2,rtl.longint,"FWidth","SetWidth")}),rtl.createClass(t,"TWinControl",t.TControl,function(){this.$init=function(){t.TControl.$init.call(this),this.FControls=null,this.FOnEnter=null,this.FOnExit=null,this.FOnKeyDown=null,this.FOnKeyPress=null,this.FOnKeyUp=null},this.$final=function(){this.FControls=void 0,this.FOnEnter=void 0,this.FOnExit=void 0,this.FOnKeyDown=void 0,this.FOnKeyPress=void 0,this.FOnKeyUp=void 0,t.TControl.$final.call(this)},this.GetControl=function(t){return rtl.getObject(this.FControls[t])},this.GetControlCount=function(){return this.FControls.length},this.DoEnter=function(){null!=this.FOnEnter&&this.FOnEnter(this)},this.DoExit=function(){null!=this.FOnExit&&this.FOnExit(this)},this.KeyDown=function(t,e){null!=this.FOnKeyDown&&this.FOnKeyDown(this,t,rtl.refSet(e))},this.KeyPress=function(t){null!=this.FOnKeyPress&&this.FOnKeyPress(this,t)},this.KeyUp=function(t,e){null!=this.FOnKeyUp&&this.FOnKeyUp(this,t,rtl.refSet(e))},this.HandleEnter=function(t){return t.stopPropagation(),this.DoEnter(),!0,!0},this.HandleExit=function(t){return t.stopPropagation(),this.DoExit(),!0,!0},this.HandleKeyDown=function(e){var i,s=null,n=null,r=0,o=null;for(o=this.FParent;null!=o;){if(pas.Forms.TCustomForm.isPrototypeOf(o)&&(n=o).FKeyPreview&&n.HandleKeyDown(e))return!0;o=o.FParent}(e.stopPropagation(),r=t.ExtractKeyCode(e),i=rtl.refSet(t.ExtractShiftState(e)),this.KeyDown({get:function(){return r},set:function(t){r=t}},rtl.refSet(i)),0===r)?e.preventDefault():9===r&&null!=this.FParent&&(0 in i?null==(s=this.FParent.FindFocusControl(this,3))&&(s=this.FParent.FindFocusControl(null,1)):null==(s=this.FParent.FindFocusControl(this,2))&&(s=this.FParent.FindFocusControl(null,0)),null!=s&&s.CanSetFocus()&&s.SetFocus(),e.preventDefault());return!0,!0},this.HandleKeyUp=function(e){var i,s=null,n=0,r=null;for(r=this.FParent;null!=r;){if(pas.Forms.TCustomForm.isPrototypeOf(r)&&(s=r).FKeyPreview&&s.HandleKeyUp(e))return!0;r=r.FParent}return e.stopPropagation(),n=t.ExtractKeyCode(e),i=rtl.refSet(t.ExtractShiftState(e)),this.KeyUp({get:function(){return n},set:function(t){n=t}},rtl.refSet(i)),0===n&&e.preventDefault(),!0,!0},this.HandleKeyPress=function(e){var i=null,s="",n=null;for(n=this.FParent;null!=n;){if(pas.Forms.TCustomForm.isPrototypeOf(n)&&(i=n).FKeyPreview&&i.HandleKeyPress(e))return!0;n=n.FParent}return e.stopPropagation(),"\0"===(s=t.ExtractKeyChar(e))?e.preventDefault():(this.KeyPress({get:function(){return s},set:function(t){s=t}}),"\0"===s&&e.preventDefault()),!0,!0},this.CompareTabOrder=function(e,i){return pas.System.Assigned(e)&&pas.System.Assigned(i)&&rtl.isExt(e,t.TControl,1)&&rtl.isExt(i,t.TControl,1)?rtl.getObject(e).FTabOrder-rtl.getObject(i).FTabOrder:0},this.FindFocusControl=function(e,i){var s=null,n=null,r=0,o=0;if(null,0===(n=this.TabOrderArray()).length)return null;try{(o=n.indexOf(e))<0&&(o=i in rtl.createSet(0)?n.length-1:0);var a=i;if(0===a){if(null!=(s=rtl.getObject(n[0]))&&t.TWinControl.isPrototypeOf(s)&&s.FEnabled&&s.FVisible&&s.FTabStop)return s}else if(1===a){if(null!=(s=rtl.getObject(n[n.length-1]))&&t.TWinControl.isPrototypeOf(s)&&s.FEnabled&&s.FVisible&&s.FTabStop)return s}else if(2===a){if(o<n.length-1)for(var l=o+1,h=n.length-1;l<=h;l++)if(r=l,null!=(s=rtl.getObject(n[r]))&&t.TWinControl.isPrototypeOf(s)&&s.FEnabled&&s.FVisible&&s.FTabStop)return s}else if(3===a&&o>0)for(var u=o-1;u>=0;u--)if(r=u,null!=(s=rtl.getObject(n[r]))&&t.TWinControl.isPrototypeOf(s)&&s.FEnabled&&s.FVisible&&s.FTabStop)return s}finally{n.length=0}return null},this.RegisterHandleEvents=function(){t.TControl.RegisterHandleEvents.call(this),this.FHandle.addEventListener("focus",rtl.createCallback(this,"HandleEnter")),this.FHandle.addEventListener("blur",rtl.createCallback(this,"HandleExit")),this.FHandle.addEventListener("keydown",rtl.createCallback(this,"HandleKeyDown")),this.FHandle.addEventListener("keypress",rtl.createCallback(this,"HandleKeyPress")),this.FHandle.addEventListener("keyup",rtl.createCallback(this,"HandleKeyUp"))},this.TabOrderArray=function(){return this.FControls.slice(0).sort(rtl.createCallback(this,"CompareTabOrder"))},this.UpdateTabOrder=function(t){var e=null,i=null,s=0;if(null!=t)for(var n=0,r=this.FControls.length-1;n<=r;n++)s=n,null!=(e=rtl.getObject(this.FControls[s]))&&e!==t&&e.FTabOrder>=t.FTabOrder&&(e.FTabOrder+=1);i=this.TabOrderArray();try{for(var o=0,a=i.length-1;o<=a;o++)s=o,null!=(e=rtl.getObject(i[s]))&&(e.FTabOrder=s)}finally{i.length=0}},this.UnRegisterHandleEvents=function(){t.TControl.UnRegisterHandleEvents.call(this),this.FHandle.removeEventListener("focus",rtl.createCallback(this,"HandleEnter")),this.FHandle.removeEventListener("blur",rtl.createCallback(this,"HandleExit")),this.FHandle.removeEventListener("keydown",rtl.createCallback(this,"HandleKeyDown")),this.FHandle.removeEventListener("keypress",rtl.createCallback(this,"HandleKeyPress")),this.FHandle.removeEventListener("keyup",rtl.createCallback(this,"HandleKeyUp"))},this.Create$1=function(e){this.FControls=new Array,t.TControl.Create$1.call(this,e)},this.Destroy=function(){this.DestroyComponents(),this.FControls.length=0,t.TControl.Destroy.call(this)},this.CanFocus=function(){var t,e=!1,i=null;if(e=!1,null!=(t=pas.Forms.GetParentForm(this,!0))){for(i=this;;){if(i===t)break;if(!i.FVisible&&i.FEnabled)return e;i=i.FParent}e=!0}return e},this.CanSetFocus=function(){var t=null;for(t=this;;){if(!t.FVisible&&t.FEnabled)return!1;if(null==t.FParent)break;t=t.FParent}return null!=t&&pas.Forms.TCustomForm.isPrototypeOf(t)},this.Focused=function(){return this.FHandle===document.activeElement},this.InsertControl=function(t){null!=t&&this.FControls.indexOf(t)<0&&(this.FControls.push(t),this.FHandle.contains(t.FHandle)||this.FHandle.appendChild(t.FHandle),this.ReAlign(),this.UpdateTabOrder(t))},this.RemoveControl=function(t){var e=0;null!=t&&(e=this.FControls.indexOf(t))>=0&&(this.FControls.splice(e,1),this.FHandle.contains(t.FHandle)||this.FHandle.removeChild(t.FHandle),this.ReAlign(),this.UpdateTabOrder(null))},this.SetFocus=function(){this.FHandle.focus()}}),rtl.createClass(t,"TCustomControl",t.TWinControl,function(){this.$init=function(){t.TWinControl.$init.call(this),this.FCanvas=null,this.FOnPaint=null},this.$final=function(){this.FCanvas=void 0,this.FOnPaint=void 0,t.TWinControl.$final.call(this)},this.GetCanvas=function(){return null==this.FCanvas&&(this.FCanvas=t.TControlCanvas.$create("Create$2"),this.FCanvas.SetControl(this)),this.FCanvas.Refresh(),this.FCanvas},this.Paint=function(){null!=this.FOnPaint&&this.FOnPaint(this)},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FCanvas},set:function(t){this.p.FCanvas=t}}),t.TWinControl.Destroy.call(this)},this.Invalidate=function(){t.TControl.Invalidate.call(this),this.Paint()}}),this.OffSets=function(t){var e=new pas.Types.TRect,i=null;if(e=new pas.Types.TRect(pas.Types.Rect(0,0,0,0)),null!=t){for(i=t;e.Left=pas.System.Trunc(e.Left+i.offsetLeft),e.Top=pas.System.Trunc(e.Top+i.offsetTop),null!=(i=i.offsetParent);)e.Left=pas.System.Trunc(e.Left+i.scrollLeft),e.Top=pas.System.Trunc(e.Top+i.scrollTop);e.Right=pas.System.Trunc(e.Left+t.offsetWidth),e.Bottom=pas.System.Trunc(e.Top+t.offsetHeight)}return e},this.ExtractKeyCode=function(t){var e,i,s=0;e=t.location,s=0;i=pas.SysUtils.LowerCase(t.key);if("backspace"===i?s=8:"tab"===i?s=9:"enter"===i?s=13:"shift"===i?s=16:"control"===i?s=17:"alt"===i?s=18:"altgraph"===i?s=18:"pause"===i?s=19:"capslock"===i?s=20:"escape"===i?s=27:"pageup"===i?s=33:"pagedown"===i?s=34:"end"===i?s=35:"home"===i?s=36:"arrowleft"===i?s=37:"arrowup"===i?s=38:"arrowright"===i?s=39:"arrowdown"===i?s=40:"insert"===i?s=45:"delete"===i?s=46:"f1"===i?s=112:"f2"===i?s=113:"f3"===i?s=114:"f4"===i?s=115:"f5"===i?s=116:"f6"===i?s=117:"f7"===i?s=118:"f8"===i?s=119:"f9"===i?s=120:"f10"===i?s=121:"f11"===i?s=122:"f12"===i?s=123:"f13"===i?s=124:"f14"===i?s=125:"f15"===i?s=126:"f16"===i?s=127:"f17"===i?s=128:"f18"===i?s=129:"f19"===i?s=130:"f20"===i?s=131:"numlock"===i?s=144:"scrolllock"===i&&(s=145),3===e){"0"===i?s=96:"1"===i?s=97:"2"===i?s=98:"3"===i?s=99:"4"===i?s=100:"5"===i?s=101:"6"===i?s=102:"7"===i?s=103:"8"===i?s=104:"9"===i?s=105:"*"===i?s=106:"+"===i?s=107:"-"===i?s=109:","===i?s=110:"/"===i?s=111:"."===i&&(s=194)}else{"0"===i?s=48:"1"===i?s=49:"2"===i?s=50:"3"===i?s=51:"4"===i?s=52:"5"===i?s=53:"6"===i?s=54:"7"===i?s=55:"8"===i?s=56:"9"===i?s=57:"Ã§"===i?s=63:"a"===i?s=65:"b"===i?s=66:"c"===i?s=67:"d"===i?s=68:"e"===i?s=69:"f"===i?s=70:"g"===i?s=71:"h"===i?s=72:"i"===i?s=73:"j"===i?s=74:"k"===i?s=75:"l"===i?s=76:"m"===i?s=77:"n"===i?s=78:"o"===i?s=79:"p"===i?s=80:"q"===i?s=81:"r"===i?s=82:"s"===i?s=83:"t"===i?s=84:"u"===i?s=85:"v"===i?s=86:"w"===i?s=87:"x"===i?s=88:"y"===i?s=89:"z"===i?s=90:"="===i?s=187:","===i?s=188:"-"===i?s=189:"."===i?s=190:"'"===i?s=192:"/"===i?s=193:"]"===i?s=220:"["===i&&(s=221)}return s},this.ExtractKeyChar=function(t){var e="",i="";if(e="\0",1===(i=pas.SysUtils.LowerCase(t.key)).length)e=i.charAt(0);else{"backspace"===i?e="\b":"tab"===i?e="\t":"enter"===i?e="\r":"escape"===i&&(e="")}return e},this.ExtractShiftState=function(t){var e={};return e={},t.altKey&&(e=rtl.includeSet(e,1)),t.ctrlKey&&(e=rtl.includeSet(e,2)),t.shiftKey&&(e=rtl.includeSet(e,0)),e},this.ExtractShiftState$1=function(t){var e={};return e={},t.altKey&&(e=rtl.includeSet(e,1)),t.ctrlKey&&(e=rtl.includeSet(e,2)),t.shiftKey&&(e=rtl.includeSet(e,0)),e},this.ExtractMouseButton=function(t){var e=t.button;return 1===e?2:2===e?1:0},this.JSCursor=function(t){return-1===t?"none":-3===t?"crosshair":-4===t?"text":-22===t?"move":-6===t?"nesw-resize":-7===t?"ns-resize":-8===t?"nwse-resize":-9===t?"ew-resize":-23===t?"nwse-resize":-24===t?"ns-resize":-25===t?"nesw-resize":-26===t?"col-resize":-27===t?"col-resize":-28===t?"nesw-resize":-29===t?"ns-resize":-30===t?"nwse-resize":-11===t?"wait":-13===t?"no-drop":-14===t?"col-resize":-15===t?"row-resize":-17===t?"progress":-18===t?"not-allowed":-19===t?"wait":-20===t?"help":-21===t?"pointer":""}},["WebExtra","Forms"]),rtl.module("Forms",["System","JS","Web","Classes","SysUtils","Types","Math","Graphics","Controls"],function(){"use strict";var t=this,e=t.$impl;this.TScrollBarKind={0:"sbHorizontal",sbHorizontal:0,1:"sbVertical",sbVertical:1},t.$rtti.$Enum("TScrollBarKind",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TScrollBarKind}),this.TFormType={0:"ftModalForm",ftModalForm:0,1:"ftWindow",ftWindow:1},this.TCloseAction={0:"caNone",caNone:0,1:"caHide",caHide:1,2:"caFree",caFree:2},t.$rtti.$Enum("TCloseAction",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TCloseAction}),t.$rtti.$MethodVar("TCloseEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["CloseAction",t.$rtti.TCloseAction,1]]),methodkind:0}),t.$rtti.$MethodVar("TCloseQueryEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["CanClose",rtl.boolean,1]]),methodkind:0}),t.$rtti.$Int("TModalResult",{minvalue:-2147483648,maxvalue:2147483647,ordtype:4}),rtl.createClass(t,"TCustomForm",pas.Controls.TCustomControl,function(){this.$init=function(){pas.Controls.TCustomControl.$init.call(this),this.FActiveControl=null,this.FAlphaBlend=!1,this.FAlphaBlendValue=0,this.FChildForm=null,this.FFormType=0,this.FKeyPreview=!1,this.FModalResult=0,this.FModalResultProc=null,this.FOverlay=null,this.FOnActivate=null,this.FOnClose=null,this.FOnCloseQuery=null,this.FOnCreate=null,this.FOnDeactivate=null,this.FOnDestroy=null,this.FOnHide=null,this.FOnResize$1=null,this.FOnShow=null},this.$final=function(){this.FActiveControl=void 0,this.FChildForm=void 0,this.FModalResultProc=void 0,this.FOverlay=void 0,this.FOnActivate=void 0,this.FOnClose=void 0,this.FOnCloseQuery=void 0,this.FOnCreate=void 0,this.FOnDeactivate=void 0,this.FOnDestroy=void 0,this.FOnHide=void 0,this.FOnResize$1=void 0,this.FOnShow=void 0,pas.Controls.TCustomControl.$final.call(this)},this.SetActiveControl=function(t){this.FActiveControl!==t&&(this.FActiveControl=t)},this.SetAlphaBlend=function(t){this.FAlphaBlend!==t&&(this.FAlphaBlend=t,this.Changed())},this.SetAlphaBlendValue=function(t){this.FAlphaBlendValue!==t&&(this.FAlphaBlendValue=t,this.Changed())},this.SetModalResult=function(t){this.FModalResult!==t&&(this.FModalResult=t,0!==this.FModalResult&&null!=this.FModalResultProc&&this.Close())},this.Activate=function(){null!=this.FOnActivate&&this.FOnActivate(this)},this.Deactivate=function(){null!=this.FOnDeactivate&&this.FOnDeactivate(this)},this.DoClose=function(t){null!=this.FOnClose&&this.FOnClose(this,t)},this.DoCreate=function(){null!=this.FOnCreate&&this.FOnCreate(this)},this.DoDestroy=function(){null!=this.FOnDestroy&&this.FOnDestroy(this)},this.DoHide=function(){null!=this.FOnHide&&this.FOnHide(this)},this.DoResize=function(){pas.Controls.TControl.DoResize.call(this),null!=this.FOnResize$1&&this.FOnResize$1(this)},this.DoShow=function(){null!=this.FOnShow&&this.FOnShow(this)},this.HandleEnter=function(t){var e,i=null;return e=pas.Controls.TWinControl.HandleEnter.call(this,t),null!=this.FChildForm&&0===this.FChildForm.FFormType?this.FChildForm.Show():(i=null!=this.FActiveControl?this.FActiveControl:this.FindFocusControl(null,0),this.FocusControl(i),this.Activate()),e},this.HandleExit=function(t){var e;return e=pas.Controls.TWinControl.HandleExit.call(this,t),this.Deactivate(),e},this.Changed=function(){pas.Controls.TControl.Changed.call(this),this.IsUpdating()||(this.FHandle.style.setProperty("outline","none"),this.FAlphaBlend?this.FHandle.style.setProperty("opacity",pas.SysUtils.FloatToStr(Math.floor(this.FAlphaBlendValue/255))):this.FHandle.style.removeProperty("opacity"),this.FHandle.style.setProperty("overflow","auto"))},this.CreateHandle=function(){return document.createElement("div")},this.GetControlClassDefaultSize=function(){var t=new pas.Types.TSize;return t.cx=320,t.cy=240,t},this.Create$1=function(t){pas.Controls.TWinControl.Create$1.call(this,t),this.FActiveControl=null,this.FAlphaBlend=!1,this.FAlphaBlendValue=255,this.FChildForm=null,this.FFormType=1,this.FKeyPreview=!1,this.FModalResult=0,this.FModalResultProc=null,this.FOverlay=null,this.BeginUpdate();try{this.SetParentFont(!1),this.SetParentShowHint(!1),this.SetVisible(!1)}finally{this.EndUpdate()}},this.Destroy=function(){this.FActiveControl=null,this.FChildForm=null,pas.Controls.TCustomControl.Destroy.call(this)},this.AfterConstruction=function(){pas.System.TObject.AfterConstruction.call(this),t.Application().UpdateMainForm(this),t.Application().RegisterModule(this),this.Loaded(),this.DoCreate()},this.BeforeDestruction=function(){pas.Classes.TComponent.BeforeDestruction.call(this),t.Application().UnRegisterModule(this),this.DoDestroy()},this.Close=function(){var e=0,i=0,s=null,n=null;if(this.CloseQuery()&&(e=1,this.DoClose({get:function(){return e},set:function(t){e=t}}),0!==e))if(t.Application().FMainForm===this)t.Application().Terminate();else if(this.Hide(),0===this.FFormType)null!=this.FOwner&&t.TCustomForm.isPrototypeOf(this.FOwner)&&((s=this.FOwner).FChildForm=null,null!=s.FOverlay&&(s.FOverlay.$destroy("Destroy"),s.FOverlay=null),s.Show()),null!=this.FModalResultProc&&this.FModalResultProc(this,this.FModalResult);else{for(var r=t.Application().GetModuleCount()-1;r>=0;r--)if(i=r,null!=(n=t.Application().GetModule(i))&&n!==this&&n.$class.InheritsFrom(t.TCustomForm)&&n.FVisible)return void n.Show();null!=t.Application().FMainForm&&t.Application().FMainForm.Show()}},this.CloseQuery=function(){var t=!1;return t=!0,null!=this.FOnCloseQuery&&this.FOnCloseQuery(this,{get:function(){return t},set:function(e){t=e}}),t},this.FocusControl=function(t){null!=t&&t.CanSetFocus()&&t.SetFocus()},this.Hide=function(){this.SetVisible(!1),this.DoHide()},this.Loaded=function(){pas.Classes.TComponent.Loaded.call(this)},this.Resize=function(){var t,e,i=0,s=0,n=0,r=0;e=window.innerWidth,t=window.innerHeight;var o=this.FFormType;0===o?(r=this.FWidth,i=this.FHeight,s=Math.floor((e-r)/2),n=Math.floor((t-i)/2),this.SetBounds(s,n,r,i)):1===o&&this.SetBounds(0,0,e,t),this.DoResize()},this.Show=function(){t.Application().FActiveForm=this,t.Application().SetTitle(this.GetText()),this.BeginUpdate();try{this.SetVisible(!0),this.Resize()}finally{this.EndUpdate()}this.BringToFront(),this.SetFocus(),this.DoShow()}}),rtl.createClass(t,"TApplication",pas.Classes.TComponent,function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FModules=null,this.FActiveForm=null,this.FMainForm=null,this.FStopOnException=!1,this.FTerminated=!1,this.FTitle="",this.FOnResize=null,this.FOnUnload=null},this.$final=function(){this.FModules=void 0,this.FActiveForm=void 0,this.FMainForm=void 0,this.FOnResize=void 0,this.FOnUnload=void 0,pas.Classes.TComponent.$final.call(this)},this.GetApplicatioName=function(){return window.location.pathname},this.GetModule=function(t){return rtl.getObject(this.FModules[t])},this.GetModuleCount=function(){return this.FModules.length},this.SetTitle=function(t){this.FTitle!==t&&(this.FTitle=t,document.title=this.FTitle)},this.DoResize=function(){null!=this.FOnResize&&this.FOnResize(this)},this.DoUnload=function(){null!=this.FOnUnload&&this.FOnUnload(this)},this.LoadIcon=function(){var t=null;(t=document.head.appendChild(document.createElement("link"))).setAttribute("rel","icon"),t.setAttribute("type","image/icon"),t.setAttribute("href",this.GetApplicatioName().replace("html","ico"))},this.RegisterHandleEvents=function(){window.addEventListener("error",rtl.createCallback(this,"HandleError")),window.addEventListener("resize",rtl.createCallback(this,"HandleResize")),window.addEventListener("unload",rtl.createCallback(this,"HandleUnload"))},this.UnRegisterHandleEvents=function(){window.removeEventListener("error",rtl.createCallback(this,"HandleError")),window.removeEventListener("resize",rtl.createCallback(this,"HandleResize")),window.removeEventListener("unload",rtl.createCallback(this,"HandleUnload"))};var e="Error Message: %s "+pas.System.LineEnding+"Line Nro: %d "+pas.System.LineEnding+"Column Nro: %d "+pas.System.LineEnding;this.HandleError=function(t){var i="";return i=t.message.toLowerCase().indexOf("script error",0)>-1?"Script Error: See Browser Console for Detail":pas.SysUtils.Format(e,[t.message,t.lineno,t.colno]),null!=this.FActiveForm?window.alert(i):(window.alert(i),this.FStopOnException&&this.Terminate()),t.stopPropagation(),!1,!1},this.HandleResize=function(e){var i=null,s=null,n=0;e.stopPropagation(),this.DoResize();for(var r=0,o=this.FModules.length-1;r<=o;r++)n=r,null!=(i=rtl.getObject(this.FModules[n]))&&i.$class.InheritsFrom(t.TCustomForm)&&(s=i).FVisible&&s.Resize();return!0},this.HandleUnload=function(t){t.stopPropagation();try{this.DoUnload()}finally{this.Terminate()}return!0},this.Create$1=function(t){pas.Classes.TComponent.Create$1.call(this,t),this.FModules=new Array,this.FMainForm=null,this.FStopOnException=!0,this.FTerminated=!1,this.FTitle=""},this.Destroy=function(){this.FModules.length=0,pas.Classes.TComponent.Destroy.call(this)},this.CreateForm=function(t,e){try{e.set(t.$create("Create$1",[this]))}catch(t){if(!pas.SysUtils.Exception.isPrototypeOf(t))throw t;e.set(null)}},this.Initialize=function(){},this.Run=function(){this.RegisterHandleEvents(),this.LoadIcon(),null!=this.FMainForm&&this.FMainForm.Show()},this.Terminate=function(){var t=0,e=null;if(!this.FTerminated){this.UnRegisterHandleEvents(),this.FTerminated=!0;for(var i=this.FModules.length-1;i>=0;i--)t=i,e=rtl.getObject(this.FModules[t]),pas.SysUtils.FreeAndNil({get:function(){return e},set:function(t){e=t}})}},this.UpdateMainForm=function(t){null==this.FMainForm&&(this.FMainForm=t,this.FActiveForm=t)},this.RegisterModule=function(t){var e=null;null!=t&&-1===this.FModules.indexOf(t)&&(this.FModules.push(t),t.$class.InheritsFrom(pas.Controls.TControl)&&(e=t,document.body.contains(e.FHandle)||document.body.appendChild(e.FHandle)))},this.UnRegisterModule=function(t){var e=0,i=null;null!=t&&(e=this.FModules.indexOf(t))>=0&&(this.FModules.splice(e,1),t.$class.InheritsFrom(pas.Controls.TControl)&&(i=t,document.body.contains(i.FHandle)&&document.body.removeChild(i.FHandle)))}}),this.Application=function(){return null==e.VAppInstance&&(e.VAppInstance=t.TApplication.$create("Create$1",[null])),e.VAppInstance},this.GetParentForm=function(e,i){for(;null!=e&&null!=e.FParent&&(i||!t.TCustomForm.isPrototypeOf(e));)e=e.FParent;return t.TCustomForm.isPrototypeOf(e)?e:null}},null,function(){"use strict";this.$impl.VAppInstance=null}),rtl.module("ComCtrls",["System","JS","Web","Classes","SysUtils","Types","Graphics","Controls","Forms"],function(){"use strict";var t=this;this.TCTabControlOption={0:"nboShowCloseButtons",nboShowCloseButtons:0,1:"nboMultiLine",nboMultiLine:1,2:"nboHidePageListPopup",nboHidePageListPopup:2,3:"nboKeyboardTabSwitch",nboKeyboardTabSwitch:3,4:"nboShowAddTabButton",nboShowAddTabButton:4,5:"nboDoChangeOnSetIndex",nboDoChangeOnSetIndex:5},t.$rtti.$Int("TWidth",{minvalue:0,maxvalue:2147483647,ordtype:5}),rtl.createClass(t,"TListColumn",pas.Classes.TCollectionItem,function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FAlignment=0,this.FAutoSize=!1,this.FCaption="",this.FMinWidth=0,this.FMaxWidth=0,this.FVisible=!1,this.FWidth=0,this.FImageIndex=0,this.FTag=0},this.GetWidth=function(){return this.FWidth},this.SetVisible=function(t){this.FVisible!==t&&(this.FVisible=t,this.Changed(!1))},this.SetAutoSize=function(t){this.FAutoSize!==t&&(this.FAutoSize=t,this.Changed(!1))},this.SetMinWidth=function(t){this.FMinWidth!==t&&(this.FMinWidth=t,this.Changed(!1))},this.SetMaxWidth=function(t){this.FMaxWidth!==t&&(this.FMaxWidth=t,this.Changed(!1))},this.SetWidth=function(t){this.FWidth!==t&&(this.FWidth=t,this.Changed(!1))},this.SetCaption=function(t){this.FCaption!==t&&(this.FCaption=t,this.Changed(!1))},this.SetAlignment=function(t){this.FAlignment!==t&&(this.FAlignment=t,this.Changed(!1))},this.SetImageIndex=function(t){this.FImageIndex!==t&&(this.FImageIndex=t,this.Changed(!1))},this.Create$1=function(t){this.FAlignment=0,this.FCaption="",this.FWidth=50,this.FVisible=!0,this.FMinWidth=0,this.FMaxWidth=0,this.FAutoSize=!1,this.FTag=0,this.FImageIndex=-1,pas.Classes.TCollectionItem.Create$1.call(this,t)},this.Assign=function(e){var i=null;null!=e&&t.TListColumn.isPrototypeOf(e)?(i=e,this.FAlignment=i.FAlignment,this.FAutoSize=i.FAutoSize,this.FCaption=i.FCaption,this.FMaxWidth=i.FMaxWidth,this.FMinWidth=i.FMinWidth,this.FVisible=i.FVisible,this.FWidth=i.GetWidth(),this.Changed(!1)):pas.Classes.TPersistent.Assign.call(this,e)};var e=this.$rtti;e.addProperty("Alignment",2,pas.Classes.$rtti.TAlignment,"FAlignment","SetAlignment"),e.addProperty("AutoSize",2,rtl.boolean,"FAutoSize","SetAutoSize"),e.addProperty("Caption",2,pas.Controls.$rtti.TTranslateString,"FCaption","SetCaption"),e.addProperty("ImageIndex",2,pas.Controls.$rtti.TImageIndex,"FImageIndex","SetImageIndex"),e.addProperty("MaxWidth",2,t.$rtti.TWidth,"FMaxWidth","SetMaxWidth"),e.addProperty("MinWidth",2,t.$rtti.TWidth,"FMinWidth","SetMinWidth"),e.addProperty("Tag",0,rtl.nativeint,"FTag","FTag"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible"),e.addProperty("Width",3,t.$rtti.TWidth,"GetWidth","SetWidth")}),rtl.createClass(t,"TListColumns",pas.Classes.TCollection,function(){this.$init=function(){pas.Classes.TCollection.$init.call(this),this.FOwner=null},this.$final=function(){this.FOwner=void 0,pas.Classes.TCollection.$final.call(this)},this.GetItem$1=function(t){return pas.Classes.TCollection.GetItem.call(this,t)},this.Create$2=function(e){this.FOwner=e,pas.Classes.TCollection.Create$1.call(this,t.TListColumn)},this.Add$1=function(){return pas.Classes.TCollection.Add.call(this)},this.Assign=function(e){var i=null,s=0;if(null!=e&&t.TListColumns.isPrototypeOf(e))for(var n=0,r=(i=e).GetCount()-1;n<=r;n++)s=n,this.Add$1().Assign(i.GetItem$1(s));else pas.Classes.TCollection.Assign.call(this,e)}}),this.TViewStyle={0:"vsIcon",vsIcon:0,1:"vsSmallIcon",vsSmallIcon:1,2:"vsList",vsList:2,3:"vsReport",vsReport:3},t.$rtti.$Enum("TViewStyle",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TViewStyle}),rtl.createClass(t,"TCustomListView",pas.Controls.TCustomControl,function(){})}),rtl.module("StdCtrls",["System","Classes","SysUtils","Controls"],function(){"use strict";this.TScrollStyle={0:"ssNone",ssNone:0,1:"ssHorizontal",ssHorizontal:1,2:"ssVertical",ssVertical:2,3:"ssBoth",ssBoth:3,4:"ssAutoHorizontal",ssAutoHorizontal:4,5:"ssAutoVertical",ssAutoVertical:5,6:"ssAutoBoth",ssAutoBoth:6},this.$rtti.$Enum("TScrollStyle",{minvalue:0,maxvalue:6,ordtype:1,enumtype:this.TScrollStyle}),this.TCheckBoxState={0:"cbUnchecked",cbUnchecked:0,1:"cbChecked",cbChecked:1,2:"cbGrayed",cbGrayed:2},this.$rtti.$Enum("TCheckBoxState",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TCheckBoxState})}),rtl.module("ExtCtrls",["System","Classes","SysUtils","Controls"],function(){"use strict"}),rtl.module("CustomDrawnDrawers",["System","Classes","SysUtils","Types","Controls","Graphics","ComCtrls","ExtCtrls"],function(){"use strict";var t=this,e=t.$impl;this.cddTestStr="Å¹Ã",this.TCDEDIT_LEFT_TEXT_SPACING=1024,this.TCDEDIT_RIGHT_TEXT_SPACING=1025,this.TCDEDIT_TOP_TEXT_SPACING=1026,this.TCDEDIT_BOTTOM_TEXT_SPACING=1027,this.TCDCHECKBOX_SQUARE_HALF_HEIGHT=1280,this.TCDCHECKBOX_SQUARE_HEIGHT=1281,this.TCDRADIOBUTTON_CIRCLE_HEIGHT=1537,this.TCDCOMBOBOX_DEFAULT_HEIGHT=2049,this.TCDSCROLLBAR_BUTTON_WIDTH=2304,this.TCDSCROLLBAR_LEFT_SPACING=2305,this.TCDSCROLLBAR_RIGHT_SPACING=2306,this.TCDSCROLLBAR_LEFT_BUTTON_POS=2307,this.TCDSCROLLBAR_RIGHT_BUTTON_POS=2308,this.TCDTRACKBAR_LEFT_SPACING=4096,this.TCDTRACKBAR_RIGHT_SPACING=4097,this.TCDTRACKBAR_TOP_SPACING=4098,this.TCDTRACKBAR_FRAME_HEIGHT=4099,this.TCDLISTVIEW_COLUMN_LEFT_SPACING=4608,this.TCDLISTVIEW_COLUMN_RIGHT_SPACING=4609,this.TCDLISTVIEW_COLUMN_TEXT_LEFT_SPACING=4610,this.TCDLISTVIEW_LINE_TOP_SPACING=4611,this.TCDLISTVIEW_LINE_BOTTOM_SPACING=4612,this.TCDTOOLBAR_ITEM_SPACING=4864,this.TCDTOOLBAR_ITEM_ARROW_WIDTH=4865,this.TCDTOOLBAR_ITEM_BUTTON_DEFAULT_WIDTH=4867,this.TCDTOOLBAR_ITEM_ARROW_RESERVED_WIDTH=4868,this.TCDTOOLBAR_ITEM_SEPARATOR_DEFAULT_WIDTH=4869,this.TCDTOOLBAR_DEFAULT_HEIGHT=4870,this.TCDCTABCONTROL_CLOSE_TAB_BUTTON_WIDTH=9728,this.TCDCTABCONTROL_CLOSE_TAB_BUTTON_EXTRA_SPACING=9729,this.TCDCONTROL_CAPTION_WIDTH=256,this.TCDCONTROL_CAPTION_HEIGHT=257,this.TCDCTABCONTROL_TAB_HEIGHT=9728,this.TCDCTABCONTROL_TAB_WIDTH=9729,this.TCDCTABCONTROL_TAB_LEFT_POS=9730,this.TCDCTABCONTROL_CLOSE_BUTTON_POS_X=9731,this.TCDCTABCONTROL_CLOSE_BUTTON_POS_Y=9732,this.TCDDrawStyle={0:"dsDefault",dsDefault:0,1:"dsCommon",dsCommon:1,2:"dsWinCE",dsWinCE:2,3:"dsWin2000",dsWin2000:3,4:"dsWinXP",dsWinXP:4,5:"dsWindows7",dsWindows7:5,6:"dsKDEPlastique",dsKDEPlastique:6,7:"dsGNOME",dsGNOME:7,8:"dsMacOSX",dsMacOSX:8,9:"dsAndroid",dsAndroid:9,10:"dsExtra1",dsExtra1:10,11:"dsExtra2",dsExtra2:11,12:"dsExtra3",dsExtra3:12,13:"dsExtra4",dsExtra4:13,14:"dsExtra5",dsExtra5:14,15:"dsExtra6",dsExtra6:15,16:"dsExtra7",dsExtra7:16,17:"dsExtra8",dsExtra8:17,18:"dsExtra9",dsExtra9:18,19:"dsExtra10",dsExtra10:19},t.$rtti.$Enum("TCDDrawStyle",{minvalue:0,maxvalue:19,ordtype:1,enumtype:this.TCDDrawStyle}),this.TCDControlStateFlag={0:"csfEnabled",csfEnabled:0,1:"csfRaised",csfRaised:1,2:"csfSunken",csfSunken:2,3:"csfHasFocus",csfHasFocus:3,4:"csfReadOnly",csfReadOnly:4,5:"csfMouseOver",csfMouseOver:5,6:"csfOn",csfOn:6,7:"csfOff",csfOff:7,8:"csfPartiallyOn",csfPartiallyOn:8,9:"csfHorizontal",csfHorizontal:9,10:"csfVertical",csfVertical:10,11:"csfRightToLeft",csfRightToLeft:11,12:"csfTopDown",csfTopDown:12,13:"csfLeftArrow",csfLeftArrow:13,14:"csfRightArrow",csfRightArrow:14,15:"csfDownArrow",csfDownArrow:15,16:"csfUpArrow",csfUpArrow:16},rtl.createClass(t,"TCDControlStateEx",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.ParentRGBColor=0,this.RGBColor=0,this.Caption="",this.Font=null,this.AutoSize=!1},this.$final=function(){this.Font=void 0,pas.System.TObject.$final.call(this)}}),rtl.createClass(t,"TCDButtonStateEx",t.TCDControlStateEx,function(){}),rtl.createClass(t,"TCDEditStateEx",t.TCDControlStateEx,function(){this.$init=function(){t.TCDControlStateEx.$init.call(this),this.CaretIsVisible=!1,this.CaretPos=new pas.Types.TPoint,this.SelStart=new pas.Types.TPoint,this.SelLength=0,this.VisibleTextStart=new pas.Types.TPoint,this.EventArrived=!1,this.MultiLine=!1,this.Lines=null,this.FullyVisibleLinesCount=0,this.LineHeight=0,this.PasswordChar="",this.LeftTextMargin=0,this.RightTextMargin=0,this.ExtraButtonState={}},this.$final=function(){this.CaretPos=void 0,this.SelStart=void 0,this.VisibleTextStart=void 0,this.Lines=void 0,this.ExtraButtonState=void 0,t.TCDControlStateEx.$final.call(this)}}),rtl.createClass(t,"TCDPanelStateEx",t.TCDControlStateEx,function(){this.$init=function(){t.TCDControlStateEx.$init.call(this),this.BevelInner=0,this.BevelOuter=0,this.BevelWidth=0}}),rtl.createClass(t,"TCDPositionedCStateEx",t.TCDControlStateEx,function(){this.$init=function(){t.TCDControlStateEx.$init.call(this),this.PosCount=0,this.Position=0,this.FloatPos=0,this.FloatPageSize=0}}),rtl.createClass(t,"TCDProgressBarStateEx",t.TCDControlStateEx,function(){this.$init=function(){t.TCDControlStateEx.$init.call(this),this.PercentPosition=0}}),rtl.createClass(t,"TCDListItems",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.Caption="",this.ImageIndex=0,this.StateIndex=0,this.Childs=null},this.$final=function(){this.Childs=void 0,pas.System.TObject.$final.call(this)},this.DoFreeItem=function(t,e){},this.Create$1=function(){pas.System.TObject.Create.call(this),this.Childs=pas.Classes.TFPList.$create("Create")},this.Destroy=function(){this.Childs.ForEachCall(rtl.createCallback(this,"DoFreeItem"),null),rtl.free(this,"Childs"),pas.System.TObject.Destroy.call(this)},this.Add=function(e,i,s){var n=null;return(n=t.TCDListItems.$create("Create$1")).Caption=e,n.ImageIndex=i,n.StateIndex=s,this.Childs.Add(n),n},this.GetItem=function(t){return rtl.getObject(this.Childs.Get(t))},this.GetItemCount=function(){return this.Childs.FCount}}),rtl.createClass(t,"TCDListViewStateEx",t.TCDControlStateEx,function(){this.$init=function(){t.TCDControlStateEx.$init.call(this),this.Columns=null,this.Items=null,this.ViewStyle=0,this.FirstVisibleColumn=0,this.ShowColumnHeader=!1},this.$final=function(){this.Columns=void 0,this.Items=void 0,t.TCDControlStateEx.$final.call(this)}}),this.TCDToolbarItemKind={0:"tikButton",tikButton:0,1:"tikCheckButton",tikCheckButton:1,2:"tikDropDownButton",tikDropDownButton:2,3:"tikSeparator",tikSeparator:3,4:"tikDivider",tikDivider:4},this.TCDToolbarItemSubpartKind={0:"tiskMain",tiskMain:0,1:"tiskArrow",tiskArrow:1},rtl.createClass(t,"TCDToolBarItem",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.Kind=0,this.SubpartKind=0,this.Width=0,this.State={}},this.$final=function(){this.State=void 0,pas.System.TObject.$final.call(this)}}),rtl.createClass(t,"TCDToolBarStateEx",t.TCDControlStateEx,function(){this.$init=function(){t.TCDControlStateEx.$init.call(this),this.Items=null,this.ToolBarHeight=0},this.$final=function(){this.Items=void 0,t.TCDControlStateEx.$final.call(this)}}),rtl.createClass(t,"TCDCTabControlStateEx",t.TCDControlStateEx,function(){this.$init=function(){t.TCDControlStateEx.$init.call(this),this.LeftmostTabVisibleIndex=0,this.Tabs=null,this.TabIndex=0,this.TabCount=0,this.Options={},this.CurTabIndex=0,this.CurStartLeftPos=0},this.$final=function(){this.Tabs=void 0,this.Options=void 0,t.TCDControlStateEx.$final.call(this)}}),this.TCDControlID={0:"cidControl",cidControl:0,1:"cidMenu",cidMenu:1,2:"cidPopUp",cidPopUp:2,3:"cidButton",cidButton:3,4:"cidEdit",cidEdit:4,5:"cidCheckBox",cidCheckBox:5,6:"cidRadioButton",cidRadioButton:6,7:"cidListBox",cidListBox:7,8:"cidComboBox",cidComboBox:8,9:"cidScrollBar",cidScrollBar:9,10:"cidGroupBox",cidGroupBox:10,11:"cidPanel",cidPanel:11,12:"cidStaticText",cidStaticText:12,13:"cidTrackBar",cidTrackBar:13,14:"cidProgressBar",cidProgressBar:14,15:"cidListView",cidListView:15,16:"cidToolBar",cidToolBar:16,17:"cidCTabControl",cidCTabControl:17},rtl.createClass(t,"TCDColorPalette",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.ScrollBar=0,this.Background=0,this.ActiveCaption=0,this.InactiveCaption=0,this.Menu=0,this.Window=0,this.WindowFrame=0,this.MenuText=0,this.WindowText=0,this.CaptionText=0,this.ActiveBorder=0,this.InactiveBorder=0,this.AppWorkspace=0,this.Highlight=0,this.HighlightText=0,this.BtnFace=0,this.BtnShadow=0,this.GrayText=0,this.BtnText=0,this.InactiveCaptionText=0,this.BtnHighlight=0,this.color3DDkShadow=0,this.color3DLight=0,this.InfoText=0,this.InfoBk=0,this.HotLight=0,this.GradientActiveCaption=0,this.GradientInactiveCaption=0,this.MenuHighlight=0,this.MenuBar=0,this.Form=0},this.Assign=function(t){this.ScrollBar=t.ScrollBar,this.Background=t.Background,this.ActiveCaption=t.ActiveCaption,this.InactiveCaption=t.InactiveCaption,this.Menu=t.Menu,this.Window=t.Window,this.WindowFrame=t.WindowFrame,this.MenuText=t.MenuText,this.WindowText=t.WindowText,this.CaptionText=t.CaptionText,this.ActiveBorder=t.ActiveBorder,this.InactiveBorder=t.InactiveBorder,this.AppWorkspace=t.AppWorkspace,this.Highlight=t.Highlight,this.HighlightText=t.HighlightText,this.BtnFace=t.BtnFace,this.BtnShadow=t.BtnShadow,this.GrayText=t.GrayText,this.BtnText=t.BtnText,this.InactiveCaptionText=t.InactiveCaptionText,this.BtnHighlight=t.BtnHighlight,this.color3DDkShadow=t.color3DDkShadow,this.color3DLight=t.color3DLight,this.InfoText=t.InfoText,this.InfoBk=t.InfoBk,this.HotLight=t.HotLight,this.GradientActiveCaption=t.GradientActiveCaption,this.GradientInactiveCaption=t.GradientInactiveCaption,this.MenuHighlight=t.MenuHighlight,this.MenuBar=t.MenuBar,this.Form=t.Form}}),this.TCDPaletteKind={0:"palDefault",palDefault:0,1:"palNative",palNative:1,2:"palFallback",palFallback:2,3:"palUserConfig",palUserConfig:3,4:"palCustom",palCustom:4},rtl.createClass(t,"TCDDrawer",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this),this.Palette=null,this.FallbackPalette=null,this.PaletteKind=0},this.$final=function(){this.Palette=void 0,this.FallbackPalette=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(){pas.System.TObject.Create.call(this),this.Palette=t.TCDColorPalette.$create("Create"),this.LoadFallbackPaletteColors(),this.FallbackPalette=t.TCDColorPalette.$create("Create"),this.FallbackPalette.Assign(this.Palette),this.PaletteKind=0,this.CreateResources(),this.LoadResources()},this.Destroy=function(){this.FreeResources(),rtl.free(this,"Palette"),rtl.free(this,"FallbackPalette"),pas.System.TObject.Destroy.call(this)},this.CreateResources=function(){},this.LoadResources=function(){},this.FreeResources=function(){},this.LoadPalette=function(){var t=this.PaletteKind;0===t?this.PalDefaultUsesNativePalette()?this.LoadNativePaletteColors():this.LoadFallbackPaletteColors():1===t?this.LoadNativePaletteColors():2===t&&this.LoadFallbackPaletteColors()},this.LoadNativePaletteColors=function(){this.Palette.ScrollBar=pas.Graphics.ColorToRGB(2147483648),this.Palette.Background=pas.Graphics.ColorToRGB(2147483649),this.Palette.ActiveCaption=pas.Graphics.ColorToRGB(2147483650),this.Palette.InactiveCaption=pas.Graphics.ColorToRGB(2147483651),this.Palette.Menu=pas.Graphics.ColorToRGB(2147483652),this.Palette.Window=pas.Graphics.ColorToRGB(2147483653),this.Palette.WindowFrame=pas.Graphics.ColorToRGB(2147483654),this.Palette.MenuText=pas.Graphics.ColorToRGB(2147483655),this.Palette.WindowText=pas.Graphics.ColorToRGB(2147483656),this.Palette.CaptionText=pas.Graphics.ColorToRGB(2147483657),this.Palette.ActiveBorder=pas.Graphics.ColorToRGB(2147483658),this.Palette.InactiveBorder=pas.Graphics.ColorToRGB(2147483659),this.Palette.AppWorkspace=pas.Graphics.ColorToRGB(2147483660),this.Palette.Highlight=pas.Graphics.ColorToRGB(2147483661),this.Palette.HighlightText=pas.Graphics.ColorToRGB(2147483662),this.Palette.BtnFace=pas.Graphics.ColorToRGB(2147483663),this.Palette.BtnShadow=pas.Graphics.ColorToRGB(2147483664),this.Palette.GrayText=pas.Graphics.ColorToRGB(2147483665),this.Palette.BtnText=pas.Graphics.ColorToRGB(2147483666),this.Palette.InactiveCaptionText=pas.Graphics.ColorToRGB(2147483667),this.Palette.BtnHighlight=pas.Graphics.ColorToRGB(2147483668),this.Palette.color3DDkShadow=pas.Graphics.ColorToRGB(2147483669),this.Palette.color3DLight=pas.Graphics.ColorToRGB(2147483670),this.Palette.InfoText=pas.Graphics.ColorToRGB(2147483671),this.Palette.InfoBk=pas.Graphics.ColorToRGB(2147483672),this.Palette.HotLight=pas.Graphics.ColorToRGB(2147483674),this.Palette.GradientActiveCaption=pas.Graphics.ColorToRGB(2147483675),this.Palette.GradientInactiveCaption=pas.Graphics.ColorToRGB(2147483676),this.Palette.MenuHighlight=pas.Graphics.ColorToRGB(2147483677),this.Palette.MenuBar=pas.Graphics.ColorToRGB(2147483678),this.Palette.Form=pas.Graphics.ColorToRGB(2147483679)},this.LoadFallbackPaletteColors=function(){},this.PalDefaultUsesNativePalette=function(){return!1,!1},this.VisibleText=function(t,e){return"\0"===e?t:pas.System.StringOfChar(e,t.length)},this.GetControlDefaultColor=function(t){var e=t;return 0===e?this.Palette.Form:3===e?this.Palette.BtnFace:4===e?this.Palette.Window:5===e?this.Palette.Form:10===e?this.Palette.Form:12===e?this.Palette.Form:13===e?this.Palette.Form:14===e?this.Palette.Form:15===e?this.Palette.Window:this.Palette.Form},this.DrawControl=function(t,e,i,s,n,r){var o=s;0===o?this.DrawControl$1(t,new pas.Types.TSize(i),rtl.refSet(n),r):3===o?this.DrawButton(t,new pas.Types.TPoint(e),new pas.Types.TSize(i),rtl.refSet(n),r):4===o?this.DrawEdit(t,new pas.Types.TSize(i),rtl.refSet(n),r):5===o?this.DrawCheckBox(t,new pas.Types.TSize(i),rtl.refSet(n),r):6===o?this.DrawRadioButton(t,new pas.Types.TSize(i),rtl.refSet(n),r):8===o?this.DrawComboBox(t,new pas.Types.TSize(i),rtl.refSet(n),r):9===o?this.DrawScrollBar(t,new pas.Types.TSize(i),rtl.refSet(n),r):10===o?this.DrawGroupBox(t,new pas.Types.TPoint(e),new pas.Types.TSize(i),rtl.refSet(n),r):11===o?this.DrawPanel(t,new pas.Types.TSize(i),rtl.refSet(n),r):12===o?this.DrawStaticText(t,new pas.Types.TSize(i),rtl.refSet(n),r):13===o?this.DrawTrackBar(t,new pas.Types.TSize(i),rtl.refSet(n),r):14===o?this.DrawProgressBar(t,new pas.Types.TSize(i),rtl.refSet(n),r):15===o?this.DrawListView(t,new pas.Types.TSize(i),rtl.refSet(n),r):16===o?this.DrawToolBar(t,new pas.Types.TSize(i),rtl.refSet(n),r):17===o&&this.DrawCTabControl(t,new pas.Types.TSize(i),rtl.refSet(n),r)}}),this.RegisterDrawer=function(t,i){null!==e.RegisteredDrawers[i]&&rtl.free(e.RegisteredDrawers,i),e.RegisteredDrawers[i]=t},this.GetDrawer=function(i){var s=0;return s=0===i?t.DefaultStyle:i,e.RegisteredDrawers[s]},this.DefaultStyle=1},null,function(){"use strict";this.$impl.RegisteredDrawers=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]}),rtl.module("CustomDrawn_Common",["System","Classes","SysUtils","Types","Math","Graphics","Controls","StdCtrls","ComCtrls","ExtCtrls","Forms","CustomDrawnDrawers","JS","Web"],function(){"use strict";var t=this;t.$impl;rtl.createClass(t,"TCDDrawerCommon",pas.CustomDrawnDrawers.TCDDrawer,function(){this.PalDefaultUsesNativePalette=function(){return!1,!1},this.LoadFallbackPaletteColors=function(){this.Palette.ScrollBar=13160660,this.Palette.Background=9981440,this.Palette.ActiveCaption=14898176,this.Palette.InactiveCaption=14653050,this.Palette.Menu=16777215,this.Palette.Window=16777215,this.Palette.WindowFrame=0,this.Palette.MenuText=0,this.Palette.WindowText=0,this.Palette.CaptionText=16777215,this.Palette.ActiveBorder=13160660,this.Palette.InactiveBorder=13160660,this.Palette.AppWorkspace=8421504,this.Palette.Highlight=12937777,this.Palette.HighlightText=16777215,this.Palette.BtnFace=14215660,this.Palette.BtnShadow=10070188,this.Palette.GrayText=10070188,this.Palette.BtnText=0,this.Palette.InactiveCaptionText=16311512,this.Palette.BtnHighlight=16777215,this.Palette.color3DDkShadow=6582129,this.Palette.color3DLight=14872561,this.Palette.InfoText=0,this.Palette.InfoBk=14811135,this.Palette.HotLight=8388608,this.Palette.GradientActiveCaption=16749885,this.Palette.GradientInactiveCaption=15448477,this.Palette.MenuHighlight=12937777,this.Palette.MenuBar=14215660,this.Palette.Form=14215660},this.GetMeasures=function(t){var e=t;return 1024===e?6:1025===e?3:1026===e?3:1027===e?3:1280===e?pas.Math.Floor(this.GetMeasures(1281)/2):1281===e?this.DPIAdjustment(15):2049===e?21:1537===e?15:2304===e?17:2305===e?17:2306===e?17:2307===e?0:2308===e?-17:4096===e?9:4097===e?9:4098===e?5:4099===e?this.DPIAdjustment(17):4608===e?10:4609===e?10:4610===e?5:4611===e?3:4612===e?3:4864===e?2:4865===e?7:4867===e?23:4868===e?12:4869===e?8:4870===e?26:9728===e?10:9729===e?10:0};this.GetMeasuresEx=function(t,e,i,s){var n=0,r="",o=0,a=0,l=0,h=!1;t.FFont.Assign(s.Font);var u=e;if(256===u)n=t.TextWidth(s.Caption);else if(257===u)n=t.TextHeight(pas.CustomDrawnDrawers.cddTestStr);else if(9728===u)n=t.TextHeight(pas.CustomDrawnDrawers.cddTestStr)+10;else if(9729===u)s.CurTabIndex<s.TabCount?(r=s.Tabs.Get(s.CurTabIndex),n=t.TextWidth(r)+20,0 in s.Options&&(n=n+this.GetMeasures(9728)+this.GetMeasures(9729))):n=t.TextWidth("+")+20;else if(9730===u){n=0;for(var c=0,d=s.CurTabIndex-1;c<=d;c++)(a=c)===s.LeftmostTabVisibleIndex&&(h=!0),h&&(l=s.CurTabIndex,s.CurTabIndex=a,n+=this.GetMeasuresEx(t,9729,rtl.refSet(i),s),s.CurTabIndex=l)}else 9731===u?(o=this.GetMeasuresEx(t,9729,rtl.refSet(i),s),n=this.GetMeasuresEx(t,9730,rtl.refSet(i),s)+o-this.GetMeasures(9728)-this.GetMeasures(9729)):n=9732===u?s.TabIndex===s.CurTabIndex?8:10:0;return n},this.DPIAdjustment=function(t){return t},this.DrawFocusRect=function(t,e,i){t.FPen.SetColor(16777215),t.FPen.SetStyle(0),t.FBrush.SetStyle(1),t.Rectangle(e.x,e.y,e.x+i.cx,e.y+i.cy),t.FPen.SetColor(0),t.FPen.SetStyle(2),t.Rectangle(e.x,e.y,e.x+i.cx,e.y+i.cy)},this.DrawRaisedFrame=function(t,e,i){t.FPen.SetStyle(0),t.FBrush.SetStyle(1),t.FPen.SetColor(16777215),t.MoveTo(e.x,e.y+i.cy-1),t.LineTo(e.x,e.y),t.LineTo(e.x+i.cx-1,e.y),t.FPen.SetColor(14872561),t.MoveTo(e.x+1,e.y+i.cy-2),t.LineTo(e.x+1,e.y+1),t.LineTo(e.x+i.cx-1,e.y+1),t.FPen.SetColor(6582129),t.MoveTo(e.x,e.y+i.cy-1),t.LineTo(e.x+i.cx-1,e.y+i.cy-1),t.LineTo(e.x+i.cx-1,e.y),t.FPen.SetColor(10070188),t.MoveTo(e.x+1,e.y+i.cy-2),t.LineTo(e.x+i.cx-2,e.y+i.cy-2),t.LineTo(e.x+i.cx-2,e.y-1)},this.DrawFrame3D=function(t,e,i,s,n){var r=new pas.Types.TRect;r=new pas.Types.TRect(pas.Types.Bounds(e.x,e.y,i.cx,i.cy));for(var o=0,a=s-1;o<=a;o++){o;var l=n;1===l?(t.FPen.SetStyle(0),t.FBrush.SetStyle(1),t.FPen.SetColor(10070188),t.MoveTo(r.Left,r.Bottom),t.LineTo(r.Left,r.Top),t.LineTo(r.Right,r.Top),t.FPen.SetColor(16777215),t.MoveTo(r.Left,r.Bottom),t.LineTo(r.Right,r.Bottom),t.LineTo(r.Right,r.Top)):2===l&&(t.FPen.SetStyle(0),t.FBrush.SetStyle(1),t.FPen.SetColor(16777215),t.MoveTo(r.Left,r.Bottom),t.LineTo(r.Left,r.Top),t.LineTo(r.Right,r.Top),t.FPen.SetColor(10070188),t.MoveTo(r.Left,r.Bottom),t.LineTo(r.Right,r.Bottom),t.LineTo(r.Right,r.Top)),pas.Types.InflateRect({get:function(){return r},set:function(t){r=t}},-1,-1)}},this.DrawSunkenFrame=function(t,e,i){t.FPen.SetStyle(0),t.FPen.SetColor(10070188),t.MoveTo(e.x,e.y+i.cy-1),t.LineTo(e.x,e.y),t.LineTo(e.x+i.cx-1,e.y),t.FPen.SetColor(6582129),t.MoveTo(e.x+1,e.y+i.cy-2),t.LineTo(e.x+1,e.y+1),t.LineTo(e.x+i.cx-2,e.y+1),t.FPen.SetColor(14872561),t.MoveTo(e.x+1,e.y+i.cy-2),t.LineTo(e.x+i.cx-2,e.y+i.cy-2),t.LineTo(e.x+i.cx-2,e.y),t.FPen.SetColor(16777215),t.MoveTo(e.x+1,e.y+i.cy-1),t.LineTo(e.x+i.cx-1,e.y+i.cy-1),t.LineTo(e.x+i.cx-1,e.y)},this.DrawShallowSunkenFrame=function(t,e,i){t.FPen.SetStyle(0),t.FPen.SetColor(10070188),t.MoveTo(e.x,e.y+i.cy),t.LineTo(e.x,e.y),t.LineTo(e.x+i.cx,e.y),t.FPen.SetColor(16777215),t.MoveTo(e.x,e.y+i.cy-1),t.LineTo(e.x+i.cx-1,e.y+i.cy-1),t.LineTo(e.x+i.cx-1,e.y-1)},this.DrawTickmark=function(t,e,i){var s,n,r,o=0;8 in i?t.FPen.SetColor(10070188):t.FPen.SetColor(0),t.FPen.SetStyle(0),s=this.DPIAdjustment(5),n=this.DPIAdjustment(4)-1,r=this.DPIAdjustment(9)-1;for(var a=0,l=n;a<=l;a++)o=a,t.Line(e.x+2+o,e.y+2+o,e.x+2+o,e.y+s+o);for(var h=n+1,u=r;h<=u;h++)o=h,t.Line(e.x+2+o,e.y+2+2*n-o,e.x+2+o,e.y+2+2*n+s-o)},this.DrawSlider=function(t,e,i,s){var n,r,o=rtl.arraySetLength(null,pas.Types.TPoint,5),a=0;n=Math.floor((i.cx-1)/2),r=i.cx-1,t.FBrush.SetColor(this.Palette.BtnFace),t.FBrush.SetStyle(0),t.FPen.SetColor(16777215),9 in s?(a=e.y+i.cy,o[0]=new pas.Types.TPoint(pas.Types.Point(e.x+n,a)),o[1]=new pas.Types.TPoint(pas.Types.Point(e.x,a-n)),o[2]=new pas.Types.TPoint(pas.Types.Point(e.x,e.y)),o[3]=new pas.Types.TPoint(pas.Types.Point(e.x+r,e.y)),o[4]=new pas.Types.TPoint(pas.Types.Point(e.x+r,a-n)),t.Polygon(o),t.FPen.SetColor(14872561),t.MoveTo(e.x+n,a-1),t.LineTo(e.x+1,a-n),t.LineTo(e.x+1,e.y+1),t.LineTo(e.x+r-1,e.y+1),t.FPen.SetColor(10070188),t.MoveTo(e.x+n,a-1),t.LineTo(e.x+r-1,a-n),t.LineTo(e.x+r-1,e.y),t.FPen.SetColor(6582129),t.MoveTo(e.x+n,a),t.LineTo(e.x+r,a-n),t.LineTo(e.x+r,e.y-1)):(a=e.y+i.cy,o[0]=new pas.Types.TPoint(pas.Types.Point(a,e.x+n)),o[1]=new pas.Types.TPoint(pas.Types.Point(a-n,e.x)),o[2]=new pas.Types.TPoint(pas.Types.Point(e.y,e.x)),o[3]=new pas.Types.TPoint(pas.Types.Point(e.y,e.x+r)),o[4]=new pas.Types.TPoint(pas.Types.Point(a-n,e.x+r)),t.Polygon(o),t.FPen.SetColor(14872561),t.MoveTo(a-1,e.x+n),t.LineTo(a-n,e.x+1),t.LineTo(e.y+1,e.x+1),t.LineTo(e.y+1,e.x+r-1),t.FPen.SetColor(10070188),t.MoveTo(a-1,e.x+n),t.LineTo(a-n,e.x+r-1),t.LineTo(e.y,e.x+r-1),t.FPen.SetColor(6582129),t.MoveTo(a,e.x+n),t.LineTo(a-n,e.x+r),t.LineTo(e.y-1,e.x+r))},this.DrawArrow=function(t,e,i,s){var n,r,o=rtl.arraySetLength(null,pas.Types.TPoint,3),a=new pas.Types.TPoint;a=new pas.Types.TPoint(e),n=s-1,r=Math.floor(s/2),2 in i&&(a=new pas.Types.TPoint(pas.Types.Point(a.x+1,a.y+1))),13 in i?(o[0]=new pas.Types.TPoint(pas.Types.Point(a.x,a.y+r)),o[1]=new pas.Types.TPoint(pas.Types.Point(a.x+r,a.y+n)),o[2]=new pas.Types.TPoint(pas.Types.Point(a.x+r,a.y))):14 in i?(o[0]=new pas.Types.TPoint(pas.Types.Point(a.x+1,a.y)),o[1]=new pas.Types.TPoint(pas.Types.Point(a.x+1,a.y+n)),o[2]=new pas.Types.TPoint(pas.Types.Point(a.x+1+r,a.y+r))):16 in i?(o[0]=new pas.Types.TPoint(pas.Types.Point(a.x+r,a.y)),o[1]=new pas.Types.TPoint(pas.Types.Point(a.x,a.y+r)),o[2]=new pas.Types.TPoint(pas.Types.Point(a.x+n,a.y+r))):(o[0]=new pas.Types.TPoint(pas.Types.Point(a.x,a.y+1)),o[1]=new pas.Types.TPoint(pas.Types.Point(a.x+n,a.y+1)),o[2]=new pas.Types.TPoint(pas.Types.Point(a.x+r,a.y+1+r))),t.FBrush.SetStyle(0),t.FBrush.SetColor(0),t.FPen.SetStyle(0),t.FPen.SetColor(0),t.Polygon(o)},this.DrawSmallCloseButton=function(t,e){t.FPen.SetStyle(0),t.FPen.SetColor(8421504),t.FPen.SetWidth(4),t.Line(e.x,e.y,e.x+10,e.y+10),t.Line(e.x+9,e.y,e.x-1,e.y+10),t.FPen.SetWidth(1)},this.DrawButtonWithArrow=function(t,e,i,s){t.FBrush.SetColor(14215660),t.FBrush.SetStyle(0),t.FillRect$1(pas.Types.Bounds(e.x,e.y,i.cx,i.cy)),2 in s?this.DrawSunkenFrame(t,new pas.Types.TPoint(e),new pas.Types.TSize(i)):this.DrawRaisedFrame(t,new pas.Types.TPoint(e),new pas.Types.TSize(i)),this.DrawArrow(t,new pas.Types.TPoint(pas.Types.Point(e.x+Math.floor(i.cy/4),e.y+Math.floor(3*i.cy/8))),rtl.refSet(s),Math.floor(i.cy/2))},this.DrawControl$1=function(t,e,i,s){var n;n=s.RGBColor,t.FBrush.SetColor(n),t.FBrush.SetStyle(0),t.FPen.SetStyle(0),t.FPen.SetColor(n),t.FillRect(0,0,e.cx,e.cy)},this.DrawButton=function(t,e,i,s,n){var r="",o=new pas.Types.TPoint,a=0;t.FBrush.SetStyle(0),t.FBrush.SetColor(n.RGBColor),t.FPen.SetColor(16777215),t.FPen.SetStyle(0),t.Rectangle(0,0,i.cx-1,i.cy-1),t.FPen.SetColor(16777215),t.Line(0,0,i.cx-1,0),t.Line(0,0,0,i.cy-1),t.FPen.SetColor(8421504),t.Line(0,i.cy-1,i.cx-1,i.cy-1),t.Line(i.cx-1,i.cy-1,i.cx-1,-1),t.FPen.SetColor(10070188),t.Line(1,i.cy-2,i.cx-2,i.cy-2),t.Line(i.cx-2,i.cy-2,i.cx-2,0),t.FPen.SetColor(14872561),t.Line(1,1,i.cx-2,1),t.Line(1,1,1,i.cy-2),2 in s?(t.FBrush.SetStyle(0),t.FBrush.SetColor(n.RGBColor),t.FPen.SetColor(16777215),t.FPen.SetStyle(0),t.Rectangle(0,0,i.cx-1,i.cy-1),t.FPen.SetColor(8421504),t.Line(0,0,i.cx-1,0),t.Line(0,0,0,i.cy-1),t.FPen.SetColor(16777215),t.Line(0,i.cy-1,i.cx-1,i.cy-1),t.Line(i.cx-1,i.cy-1,i.cx-1,-1),t.FPen.SetColor(14872561),t.Line(1,i.cy-2,i.cx-2,i.cy-2),t.Line(i.cx-2,i.cy-2,i.cx-2,0),t.FPen.SetColor(10070188),t.Line(1,1,i.cx-2,1),t.Line(1,1,1,i.cy-2)):3 in s&&pas.Graphics.TCanvas.isPrototypeOf(t)&&this.DrawFocusRect(t,new pas.Types.TPoint(pas.Types.Point(3,3)),new pas.Types.TSize(pas.Types.Size(i.cx-7,i.cy-7))),pas.Graphics.TCanvas.isPrototypeOf(t)&&(t.FFont.Assign(n.Font),r=n.Caption,a=Math.max(t.TextHeight(r),0),o.x=Math.floor((i.cx-t.TextWidth(r)-0)/2),o.y=Math.floor((i.cy-a)/2),o.x=Math.max(o.x,5),o.y=Math.max(o.y,5),o.x=o.x+0,o.y=Math.floor((i.cy-t.TextHeight(r))/2),t.FBrush.SetStyle(1),t.FPen.SetStyle(0),0 in s?(2 in s&&(o.x+=1,o.y+=1),t.TextOut(o.x,o.y,r)):(t.FFont.SetColor(16777215),o.x+=1,o.y+=1,t.TextOut(o.x,o.y,r),t.FFont.SetColor(10070188),o.x-=1,o.y-=1,t.TextOut(o.x,o.y,r)))},this.DrawEditBackground=function(t,e,i,s,n){t.FBrush.SetColor(16777215),t.FBrush.SetStyle(0),t.FPen.SetColor(16777215),t.FPen.SetStyle(0),t.Rectangle(0,0,i.cx,i.cy)},this.DrawEditFrame=function(t,e,i,s,n){t.FPen.SetStyle(0),t.FPen.SetColor(10070188),t.MoveTo(0,i.cy-1),t.LineTo(0,0),t.LineTo(i.cx-1,0),t.FPen.SetColor(6582129),t.MoveTo(1,i.cy-2),t.LineTo(1,1),t.LineTo(i.cx-2,1),t.FPen.SetColor(14872561),t.MoveTo(1,i.cy-2),t.LineTo(i.cx-2,i.cy-2),t.LineTo(i.cx-2,0)},this.DrawCaret=function(t,e,i,s,n){var r,o,a,l,h,u=0,c="",d="";n.CaretIsVisible&&(c=0===n.Lines.GetCount()?"":n.Lines.Get(n.CaretPos.y),o=this.GetMeasuresEx(t,257,rtl.refSet(s),n),l=this.GetMeasures(1027),r=this.GetMeasures(1026),u=t.TextHeight(pas.CustomDrawnDrawers.cddTestStr)+2,u=Math.min(i.cy-l,u),a=r+n.CaretPos.y*u,d=pas.System.Copy(c,n.VisibleTextStart.x,n.CaretPos.x-n.VisibleTextStart.x+1),d=this.$class.VisibleText(d,n.PasswordChar),h=t.TextWidth(d)+this.GetMeasures(1024)+n.LeftTextMargin,t.FPen.SetColor(0),t.FPen.SetStyle(0),t.Line(h,a,h,a+o))},this.DrawEdit=function(t,e,i,s){var n,r,o,a="",l="",h=0,u=0,c=0,d=0,S=0,C=0,F=0,p=0,f=0,T=0;this.DrawEditBackground(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),rtl.refSet(i),s),p=0 in i?s.Font.FColor:10070188,t.FBrush.SetStyle(1),t.FFont.Assign(s.Font),t.FFont.SetColor(p),n=this.GetMeasures(1024),r=this.GetMeasures(1026),o=this.GetMeasures(1027),S=t.TextHeight(pas.CustomDrawnDrawers.cddTestStr)+2,S=Math.min(e.cy-o,S),s.LineHeight=S,s.FullyVisibleLinesCount=e.cy-r-o,s.FullyVisibleLinesCount=Math.floor(s.FullyVisibleLinesCount/S),s.FullyVisibleLinesCount=Math.min(s.FullyVisibleLinesCount,s.Lines.GetCount()),T=s.MultiLine?s.FullyVisibleLinesCount+1:1;for(var y=0,m=(T=Math.min(T,s.Lines.GetCount()))-1;y<=m;y++)f=y,l=s.Lines.Get(s.VisibleTextStart.y+f),F=(l=this.$class.VisibleText(l,s.PasswordChar)).length,C=r+f*S,t.FPen.SetStyle(7),t.FBrush.SetStyle(1),0===s.SelLength||s.SelStart.y!==s.VisibleTextStart.y+f?(pas.JS.isInteger(s.VisibleTextStart.x)||(s.VisibleTextStart.x=0),a=pas.System.Copy(l,s.VisibleTextStart.x,F),t.TextOut(n,C,a)):(h=s.SelStart.x,s.SelLength<0&&(h+=s.SelLength),s.SelStart.x,s.SelLength>0&&s.SelLength,(c=s.SelLength)<0&&(c*=-1),a=pas.System.Copy(l,s.VisibleTextStart.x,h-s.VisibleTextStart.x+1),t.TextOut(n,C,a),u=t.TextWidth(a)+n,a=pas.System.Copy(l,h+1,c),d=t.TextWidth(a),t.FBrush.SetColor(12937777),t.FBrush.SetStyle(0),t.Rectangle$1(pas.Types.Bounds(u,C,d,S)),t.FBrush.SetStyle(1),t.FFont.SetColor(16777215),t.TextOut(u,C,a),u+=d,t.FBrush.SetColor(16777215),t.FFont.SetColor(p),a=pas.System.Copy(l,h+c+1,F),t.TextOut(u,C,a));this.DrawCaret(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),rtl.refSet(i),s),this.DrawEditFrame(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),rtl.refSet(i),s)},this.DrawCheckBoxSquare=function(t,e,i,s,n){var r,o,a;r=Math.floor(i.cy/2),o=this.GetMeasures(1280),a=this.GetMeasures(1281),t.FPen.SetStyle(7),t.FBrush.SetStyle(0),8 in s?t.FBrush.SetColor(15529206):t.FBrush.SetColor(this.Palette.Window),t.Rectangle$1(pas.Types.Bounds(1,r-o,a,a)),this.DrawSunkenFrame(t,new pas.Types.TPoint(pas.Types.Point(1,r-o)),new pas.Types.TSize(pas.Types.Size(a,a)))},this.DrawCheckBox=function(t,e,i,s){var n,r,o,a=0;r=this.GetMeasures(1281),o=this.DPIAdjustment(3),n=s.ParentRGBColor,t.FBrush.SetColor(n),t.FBrush.SetStyle(0),t.FPen.SetStyle(7),t.FillRect(0,0,e.cx,e.cy),this.DrawCheckBoxSquare(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),rtl.refSet(i),s),(6 in i||8 in i)&&this.DrawTickmark(t,new pas.Types.TPoint(pas.Types.Point(o,Math.floor(e.cy/2)-this.GetMeasures(1280)+o)),rtl.refSet(i)),3 in i&&this.DrawFocusRect(t,new pas.Types.TPoint(pas.Types.Point(r+4,0)),new pas.Types.TSize(pas.Types.Size(e.cx-r-4,e.cy))),t.FBrush.SetStyle(1),t.FPen.SetStyle(7),t.FFont.Assign(s.Font),a=r>t.TextHeight(pas.CustomDrawnDrawers.cddTestStr)?Math.floor((r-t.TextHeight(pas.CustomDrawnDrawers.cddTestStr))/2):0,a=Math.max(0,a-1),t.TextOut(r+5,a,s.Caption)},this.DrawRadioButtonCircle=function(t,e,i,s,n){var r,o;o=this.GetMeasures(1537),r=Math.floor(o/3),t.FPen.SetStyle(7),t.FBrush.SetStyle(0),t.FBrush.SetColor(this.Palette.Window),t.Rectangle$1(pas.Types.Bounds(e.x,e.y+r-1,o-2,r)),t.Rectangle$1(pas.Types.Bounds(e.x+r-1,e.y,r,o-2)),t.FPen.SetStyle(0),t.SetPixel(e.x+4,e.y,10070188),t.SetPixel(e.x+5,e.y,10070188),t.SetPixel(e.x+6,e.y,10070188),t.SetPixel(e.x+7,e.y,10070188),t.SetPixel(e.x+8,e.y+1,10070188),t.SetPixel(e.x+9,e.y+1,10070188),t.SetPixel(e.x+3,e.y+1,10070188),t.SetPixel(e.x+2,e.y+1,10070188),t.SetPixel(e.x+1,e.y+2,10070188),t.SetPixel(e.x+1,e.y+3,10070188),t.SetPixel(e.x,e.y+4,10070188),t.SetPixel(e.x,e.y+5,10070188),t.SetPixel(e.x,e.y+6,10070188),t.SetPixel(e.x,e.y+7,10070188),t.SetPixel(e.x+1,e.y+8,10070188),t.SetPixel(e.x+1,e.y+9,10070188),t.SetPixel(e.x+4,e.y+1,6582129),t.SetPixel(e.x+5,e.y+1,6582129),t.SetPixel(e.x+6,e.y+1,6582129),t.SetPixel(e.x+7,e.y+1,6582129),t.SetPixel(e.x+8,e.y+2,6582129),t.SetPixel(e.x+9,e.y+2,6582129),t.SetPixel(e.x+3,e.y+2,6582129),t.SetPixel(e.x+2,e.y+2,6582129),t.SetPixel(e.x+2,e.y+3,6582129),t.SetPixel(e.x+1,e.y+4,6582129),t.SetPixel(e.x+1,e.y+5,6582129),t.SetPixel(e.x+1,e.y+6,6582129),t.SetPixel(e.x+1,e.y+7,6582129),t.SetPixel(e.x+2,e.y+8,6582129),t.SetPixel(e.x+9,e.y+3,14872561),t.SetPixel(e.x+10,e.y+4,14872561),t.SetPixel(e.x+10,e.y+5,14872561),t.SetPixel(e.x+10,e.y+6,14872561),t.SetPixel(e.x+10,e.y+7,14872561),t.SetPixel(e.x+9,e.y+8,14872561),t.SetPixel(e.x+9,e.y+9,14872561),t.SetPixel(e.x+8,e.y+9,14872561),t.SetPixel(e.x+7,e.y+10,14872561),t.SetPixel(e.x+6,e.y+10,14872561),t.SetPixel(e.x+5,e.y+10,14872561),t.SetPixel(e.x+4,e.y+10,14872561),t.SetPixel(e.x+3,e.y+9,14872561),t.SetPixel(e.x+2,e.y+9,14872561),t.SetPixel(e.x+10,e.y+2,16777215),t.SetPixel(e.x+10,e.y+3,16777215),t.SetPixel(e.x+10,e.y+8,16777215),t.SetPixel(e.x+10,e.y+9,16777215),t.SetPixel(e.x+9,e.y+10,16777215),t.SetPixel(e.x+8,e.y+10,16777215),t.SetPixel(e.x+3,e.y+10,16777215),t.SetPixel(e.x+2,e.y+10,16777215),t.SetPixel(e.x+3,e.y+3,16777215),t.SetPixel(e.x+3,e.y+8,16777215),t.SetPixel(e.x+8,e.y+3,16777215),t.SetPixel(e.x+8,e.y+8,16777215),6 in s&&(t.FPen.SetStyle(0),t.FPen.SetColor(0),t.Rectangle(e.x+4,e.y+5,e.x+8,e.y+7),t.Rectangle(e.x+5,e.y+4,e.x+7,e.y+8))},this.DrawRadioButton=function(t,e,i,s){var n,r,o=0;r=this.GetMeasures(1537),n=s.ParentRGBColor,t.FBrush.SetColor(n),t.FBrush.SetStyle(0),t.FPen.SetStyle(7),t.FillRect(0,0,e.cx,e.cy),this.DrawRadioButtonCircle(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),rtl.refSet(i),s),3 in i&&this.DrawFocusRect(t,new pas.Types.TPoint(pas.Types.Point(r+3,0)),new pas.Types.TSize(pas.Types.Size(e.cx-r-3,e.cy))),t.FBrush.SetStyle(1),t.FFont.Assign(s.Font),o=r>t.TextHeight(pas.CustomDrawnDrawers.cddTestStr)?Math.floor((r-t.TextHeight(pas.CustomDrawnDrawers.cddTestStr))/2):0,o=Math.max(0,o-1),t.TextOut(r+5,o,s.Caption)},this.DrawComboBox=function(t,e,i,s){s.RightTextMargin=e.cy,this.DrawEdit(t,new pas.Types.TSize(e),rtl.refSet(i),s),this.DrawButtonWithArrow(t,new pas.Types.TPoint(pas.Types.Point(e.cx-e.cy,0)),new pas.Types.TSize(pas.Types.Size(e.cy,e.cy)),rtl.refSet(s.ExtraButtonState))},this.DrawScrollBar=function(t,e,i,s){var n=new pas.Types.TPoint,r=new pas.Types.TSize,o={};t.FBrush.SetColor(15529206),t.FBrush.SetStyle(0),t.FPen.SetStyle(0),t.FPen.SetColor(15529206),t.Rectangle(0,0,e.cx,e.cy),n=new pas.Types.TPoint(pas.Types.Point(0,0)),r=9 in i?new pas.Types.TSize(pas.Types.Size(this.GetMeasures(2304),e.cy)):new pas.Types.TSize(pas.Types.Size(e.cx,this.GetMeasures(2304))),t.FBrush.SetColor(this.Palette.BtnFace),t.FBrush.SetStyle(0),t.Rectangle$1(pas.Types.Bounds(n.x,n.y,r.cx,r.cy)),13 in i?(this.DrawSunkenFrame(t,new pas.Types.TPoint(n),new pas.Types.TSize(r)),o=rtl.createSet(2)):(this.DrawRaisedFrame(t,new pas.Types.TPoint(n),new pas.Types.TSize(r)),o={}),9 in i?this.DrawArrow(t,new pas.Types.TPoint(pas.Types.Point(n.x+5,n.y+5)),rtl.unionSet(rtl.createSet(13),o),7):this.DrawArrow(t,new pas.Types.TPoint(pas.Types.Point(n.x+5,n.y+5)),rtl.unionSet(rtl.createSet(16),o),7),9 in i?n.x=n.x+e.cx-this.GetMeasures(2304):n.y=n.y+e.cy-this.GetMeasures(2304),t.FBrush.SetColor(this.Palette.BtnFace),t.FBrush.SetStyle(0),t.Rectangle$1(pas.Types.Bounds(n.x,n.y,r.cx,r.cy)),14 in i?(this.DrawSunkenFrame(t,new pas.Types.TPoint(n),new pas.Types.TSize(r)),o=rtl.createSet(2)):(this.DrawRaisedFrame(t,new pas.Types.TPoint(n),new pas.Types.TSize(r)),o={}),9 in i?this.DrawArrow(t,new pas.Types.TPoint(pas.Types.Point(n.x+5,n.y+5)),rtl.unionSet(rtl.createSet(14),o),7):this.DrawArrow(t,new pas.Types.TPoint(pas.Types.Point(n.x+5,n.y+5)),rtl.unionSet(rtl.createSet(15),o),7),n=new pas.Types.TPoint(pas.Types.Point(0,0)),9 in i?(s.FloatPageSize>0&&(r.cx=Math.round(s.FloatPageSize*(e.cx-2*this.GetMeasures(2304)))),r.cx<5&&(r.cx=5),n.x=Math.round(this.GetMeasures(2304)+s.FloatPos*(e.cx-2*this.GetMeasures(2304)-r.cx))):(s.FloatPageSize>0&&(r.cy=Math.round(s.FloatPageSize*(e.cy-2*this.GetMeasures(2304)))),r.cy<5&&(r.cy=5),n.y=Math.round(this.GetMeasures(2304)+s.FloatPos*(e.cy-2*this.GetMeasures(2304)-r.cy))),t.FBrush.SetColor(this.Palette.BtnFace),t.FBrush.SetStyle(0),t.Rectangle$1(pas.Types.Bounds(n.x,n.y,r.cx,r.cy)),this.DrawRaisedFrame(t,new pas.Types.TPoint(n),new pas.Types.TSize(r))},this.DrawGroupBox=function(t,e,i,s,n){var r,o=0,a=new pas.Types.TSize;pas.Graphics.TCanvas.isPrototypeOf(t)&&(o=Math.floor(rtl.as(t,pas.Graphics.TCanvas).TextHeight(pas.CustomDrawnDrawers.cddTestStr)/2)),0===o&&(o=Math.floor(n.Font.FSize/2)),0===o&&(o=5),t.FBrush.SetColor(n.ParentRGBColor),t.FBrush.SetStyle(0),t.FPen.SetStyle(0),t.FPen.SetColor(n.ParentRGBColor),t.Rectangle(0,0,i.cx,i.cy),t.FPen.SetColor(16777215),t.FPen.SetStyle(0),t.FBrush.SetStyle(1),t.Rectangle$1(pas.Types.Bounds(1,1+o,i.cx-1,i.cy-1-o)),t.FPen.SetColor(10070188),t.Rectangle$1(pas.Types.Bounds(0,o,i.cx-1,i.cy-1-o)),pas.Graphics.TCanvas.isPrototypeOf(t)&&(rtl.as(t,pas.Graphics.TCanvas).SetPixel(0,i.cy-1,16777215),rtl.as(t,pas.Graphics.TCanvas).SetPixel(i.cx-1,o,16777215)),r=n.Caption,a=pas.Graphics.TCanvas.isPrototypeOf(t)?new pas.Types.TSize(rtl.as(t,pas.Graphics.TCanvas).TextExtent(r)):new pas.Types.TSize(pas.Types.Size(50,n.Font.FSize)),t.FBrush.SetStyle(0),t.FBrush.SetColor(n.ParentRGBColor),t.FPen.SetStyle(7),t.Rectangle$1(pas.Types.Bounds(o,0,a.cx+5,a.cy)),t.FPen.SetStyle(7),t.FBrush.SetStyle(1),pas.Graphics.TCanvas.isPrototypeOf(t)&&t.TextOut(o+3,0,r)},this.DrawPanel=function(t,e,i,s){var n=0;t.FBrush.SetColor(this.Palette.BtnFace),t.FBrush.SetStyle(0),t.FPen.SetStyle(7),t.FillRect(0,0,e.cx,e.cy),0!==s.BevelOuter&&(n=s.BevelWidth,this.DrawFrame3D(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),s.BevelWidth,s.BevelOuter)),e.cx=e.cx-2*n,e.cy=e.cy-2*n,0!==s.BevelInner&&this.DrawFrame3D(t,new pas.Types.TPoint(pas.Types.Point(n,n)),new pas.Types.TSize(e),s.BevelWidth,s.BevelInner)},this.DrawStaticText=function(t,e,i,s){var n;n=s.ParentRGBColor,t.FBrush.SetColor(n),t.FBrush.SetStyle(0),t.FPen.SetStyle(7),t.FillRect(0,0,e.cx,e.cy),t.FBrush.SetStyle(1),t.FFont.Assign(s.Font),t.TextOut(0,0,s.Caption)},this.DrawTrackBar=function(t,e,i,s){var n,r,o,a,l,h=0,u=0,c=0,d=0,S=new pas.Types.TPoint,C=new pas.Types.TSize,F=new pas.Types.TSize;a=this.DPIAdjustment(5),l=this.DPIAdjustment(11),F=9 in i?new pas.Types.TSize(e):new pas.Types.TSize(pas.Types.Size(e.cy,e.cx)),o=this.GetMeasures(4096)+this.GetMeasures(4097),c=(n=s.PosCount)>0?(F.cx-o)/(n-1):0,t.FBrush.SetColor(s.ParentRGBColor),t.FBrush.SetStyle(0),t.FPen.SetStyle(0),t.FPen.SetColor(s.ParentRGBColor),t.Rectangle(0,0,e.cx,e.cy),9 in i?(S=new pas.Types.TPoint(pas.Types.Point(this.GetMeasures(4096),this.GetMeasures(4098))),C=new pas.Types.TSize(pas.Types.Size(e.cx-o,this.GetMeasures(4099)))):(S=new pas.Types.TPoint(pas.Types.Point(this.GetMeasures(4098),this.GetMeasures(4096))),C=new pas.Types.TSize(pas.Types.Size(this.GetMeasures(4099),e.cy-o))),t.FBrush.SetColor(this.Palette.Window),t.FPen.SetStyle(7),t.Rectangle$1(pas.Types.Bounds(S.x,S.y,C.cx,C.cy)),this.DrawSunkenFrame(t,new pas.Types.TPoint(S),new pas.Types.TSize(C)),d=u=this.GetMeasures(4096),r=this.GetMeasures(4098)+this.GetMeasures(4099)+5,t.FPen.SetStyle(0);for(var p=0,f=n-1;p<=f;p++)h=p,t.FPen.SetColor(0),9 in i?t.Line(u,r,u,r+3):t.Line(r,u,r+3,u),h===s.Position&&this.DrawSlider(t,new pas.Types.TPoint(pas.Types.Point(u-a,this.GetMeasures(4098)-2)),new pas.Types.TSize(pas.Types.Size(l,this.GetMeasures(4099)+a)),rtl.refSet(i)),d+=c,u=Math.round(d);3 in i&&this.DrawFocusRect(t,new pas.Types.TPoint(pas.Types.Point(1,1)),new pas.Types.TSize(pas.Types.Size(e.cx-2,e.cy-2)))},this.DrawProgressBar=function(t,e,i,s){var n=new pas.Types.TPoint,r=new pas.Types.TPoint,o=new pas.Types.TSize,a=0;t.FBrush.SetColor(14215660),t.FBrush.SetStyle(0),t.FPen.SetStyle(7),t.Rectangle(0,0,e.cx,e.cy),this.DrawShallowSunkenFrame(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e)),o=new pas.Types.TSize(pas.Types.Size(e.cx-4,e.cy-4)),9 in i?(n=new pas.Types.TPoint(pas.Types.Point(2,2)),r=new pas.Types.TPoint(pas.Types.Point(1,0)),a=o.cx):10 in i?(n=new pas.Types.TPoint(pas.Types.Point(2,e.cy-2)),r=new pas.Types.TPoint(pas.Types.Point(0,-1)),a=o.cy):11 in i?(n=new pas.Types.TPoint(pas.Types.Point(e.cx-2,2)),r=new pas.Types.TPoint(pas.Types.Point(-1,0)),a=o.cx):(n=new pas.Types.TPoint(pas.Types.Point(2,2)),r=new pas.Types.TPoint(pas.Types.Point(0,1)),a=o.cy),a=Math.round(a*s.PercentPosition),t.FPen.SetColor(12937777),t.FPen.SetStyle(0),t.FBrush.SetColor(12937777),t.FBrush.SetStyle(0),t.Rectangle(n.x,n.y,n.x+a*r.x+o.cx*Math.abs(r.y),n.y+a*r.y+o.cy*Math.abs(r.x))},this.DrawListView=function(t,e,i,s){t.FBrush.SetColor(this.Palette.Window),t.FBrush.SetStyle(0),t.FPen.SetStyle(7),t.Rectangle(0,0,e.cx,e.cy),this.DrawSunkenFrame(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e)),3===s.ViewStyle&&this.DrawReportListView(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),rtl.refSet(i),s)},this.DrawReportListView=function(t,e,i,s,n){var r,o=null,a=0,l=0,h=new pas.Types.TPoint,u=new pas.Types.TSize,c=null;h=new pas.Types.TPoint(pas.Types.Point(2,2)),r=n.Items.GetItemCount();for(var d=n.FirstVisibleColumn,S=n.Columns.GetCount()-1;d<=S;d++){a=d,o=n.Columns.GetItem$1(a),h.y=2,o.FAutoSize?(u.cx=t.TextWidth(o.FCaption)+this.GetMeasures(4608)+this.GetMeasures(4609),o.FMinWidth>0&&u.cx<o.FMinWidth?u.cx=o.FMinWidth:o.FMaxWidth>0&&u.cx>o.FMaxWidth&&(u.cx=o.FMaxWidth)):u.cx=o.GetWidth(),u.cy=t.TextHeight(pas.CustomDrawnDrawers.cddTestStr)+this.GetMeasures(4611)+this.GetMeasures(4612),n.ShowColumnHeader&&(t.FBrush.SetStyle(0),t.FBrush.SetColor(this.Palette.BtnFace),t.FPen.SetStyle(7),t.FillRect$1(pas.Types.Bounds(h.x,h.y,u.cx,u.cy)),this.DrawRaisedFrame(t,new pas.Types.TPoint(h),new pas.Types.TSize(u)),t.FBrush.SetStyle(1),t.FPen.SetStyle(7),t.TextOut(h.x+this.GetMeasures(4610),h.y+this.GetMeasures(4611),o.FCaption),h.y+=u.cy);for(var C=0,F=r-1;C<=F;C++)l=C,c=null,0===a?c=n.Items.GetItem(l):n.Items.GetItem(l).GetItemCount()>=a&&(c=n.Items.GetItem(l).GetItem(a-1)),null!==c&&(this.DrawReportListViewItem(t,new pas.Types.TPoint(h),new pas.Types.TSize(u),c,rtl.refSet(s),n),h.y+=u.cy);h.x+=u.cx}},this.DrawReportListViewItem=function(t,e,i,s,n,r){t.FBrush.SetStyle(1),t.FPen.SetStyle(7),t.TextOut(e.x+this.GetMeasures(4610),e.y+this.GetMeasures(4611),s.Caption)},this.DrawToolBar=function(t,e,i,s){var n,r=0,o=0,a=new pas.Types.TSize,l=0,h=null;t.FPen.SetStyle(0),t.FPen.SetColor(s.ParentRGBColor),t.FBrush.SetStyle(0),t.FBrush.SetColor(s.ParentRGBColor),t.Rectangle(0,0,e.cx,e.cy),r=this.GetMeasures(4864),n=this.GetMeasures(4864),a.cy=s.ToolBarHeight-2*this.GetMeasures(4864);for(var u=0,c=s.Items.FCount-1;u<=c;u++)l=u,2===(h=rtl.getObject(s.Items.Get(l))).Kind?a.cx=h.Width-this.GetMeasures(4868):a.cx=h.Width,h.SubpartKind=0,this.DrawToolBarItem(t,new pas.Types.TSize(a),h,r,n,rtl.refSet(h.State),s),2===h.Kind&&(h.SubpartKind=1,o=r+h.Width-this.GetMeasures(4868),a.cx=this.GetMeasures(4868),this.DrawToolBarItem(t,new pas.Types.TSize(a),h,o,n,rtl.refSet(h.State),s)),r+=h.Width},this.DrawToolBarItem=function(t,e,i,s,n,r,o){var a=0,l=0,h=0;function u(){t.FPen.SetStyle(0),t.FPen.SetColor(11513775),t.FBrush.SetStyle(1),t.Rectangle$1(pas.Types.Bounds(s,n,e.cx,e.cy))}var c=i.Kind;if(3===c||4===c)a=s,4===i.Kind&&(a=s+Math.floor(e.cx/2)-1),l=n,h=n+e.cy,t.FPen.SetStyle(0),t.FPen.SetColor(14474977),t.Line(a+1,l,a+1,h),t.Line(a+3,l,a+3,h),t.FPen.SetStyle(0),t.FPen.SetColor(9672606),t.Line(a+2,l,a+2,h);else if(0===c||1===c||2===c){if(1===i.SubpartKind)return a=s+Math.floor(e.cx/2)-Math.floor(this.GetMeasures(4865)/2),l=n+Math.floor(e.cy/2)-Math.floor(this.GetMeasures(4865)/2),void this.DrawArrow(t,new pas.Types.TPoint(pas.Types.Point(a,l)),rtl.createSet(15),this.GetMeasures(4865));2 in r?(t.GradientFill(new pas.Types.TRect(pas.Types.Bounds(s,n,e.cx,e.cy)),12895428,14408667,0),u()):5 in r&&(t.GradientFill(new pas.Types.TRect(pas.Types.Bounds(s,n,e.cx,e.cy)),14935011,16250871,0),u())}},this.DrawCTabControl=function(t,e,i,s){t.FPen.SetStyle(0),t.FPen.SetColor(s.ParentRGBColor),t.FBrush.SetStyle(0),t.FBrush.SetColor(s.ParentRGBColor),t.Rectangle(0,0,e.cx,e.cy),this.DrawCTabControlFrame(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),rtl.refSet(i),s),t.FFont.Assign(s.Font),this.DrawTabs(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(e),rtl.refSet(i),s)},this.DrawCTabControlFrame=function(t,e,i,s,n){var r=0;r=0===n.TabCount?0:this.GetMeasuresEx(t,9728,rtl.refSet(s),n),this.DrawRaisedFrame(t,new pas.Types.TPoint(pas.Types.Point(0,r)),new pas.Types.TSize(pas.Types.Size(i.cx,i.cy-r)))},this.DrawTabs=function(t,e,i,s,n){var r=!1,o=0;n.CurStartLeftPos=0;for(var a=0,l=(4 in n.Options?n.Tabs.GetCount():n.Tabs.GetCount()-1);a<=l;a++)(o=a)===n.LeftmostTabVisibleIndex&&(r=!0),r&&(n.CurTabIndex=o,this.DrawTab(t,new pas.Types.TPoint(e),new pas.Types.TSize(i),rtl.refSet(s),n),n.CurStartLeftPos=n.CurStartLeftPos+this.GetMeasuresEx(t,9729,rtl.refSet(s),n))},this.DrawTab=function(t,e,i,s,n){var r,o,a,l,h,u=[],c="",d=0,S=0,C=new pas.Types.TPoint;r=n.TabIndex===n.CurTabIndex,o=n.CurTabIndex===n.Tabs.GetCount(),r||(d=3),r&&(S=1),h=d,l=this.GetMeasuresEx(t,9728,rtl.refSet(s),n)-d,a=this.GetMeasuresEx(t,9729,rtl.refSet(s),n),t.FPen.SetStyle(0),t.FPen.SetColor(16777215),t.FBrush.SetStyle(0),t.FBrush.SetColor(n.RGBColor),(u=rtl.arraySetLength(u,pas.Types.TPoint,6))[0]=new pas.Types.TPoint(pas.Types.Point(n.CurStartLeftPos,h+l)),u[1]=new pas.Types.TPoint(pas.Types.Point(n.CurStartLeftPos,h+2)),u[2]=new pas.Types.TPoint(pas.Types.Point(n.CurStartLeftPos+2,h)),u[3]=new pas.Types.TPoint(pas.Types.Point(n.CurStartLeftPos+a-3,h)),u[4]=new pas.Types.TPoint(pas.Types.Point(n.CurStartLeftPos+a-1,h+2)),u[5]=new pas.Types.TPoint(pas.Types.Point(n.CurStartLeftPos+a-1,h+l)),t.Polygon(u),t.FPen.SetStyle(0),t.FBrush.SetStyle(1),t.FPen.SetColor(14872561),t.MoveTo(n.CurStartLeftPos+1,h+l-1),t.LineTo(n.CurStartLeftPos+1,h+2),t.LineTo(n.CurStartLeftPos+2,h+1),t.LineTo(n.CurStartLeftPos+a-3,h+1),t.FPen.SetColor(10070188),t.MoveTo(n.CurStartLeftPos+a-2,h+2),t.LineTo(n.CurStartLeftPos+a-2,h+l+S),t.FPen.SetColor(6582129),t.MoveTo(n.CurStartLeftPos+a-1,h+2),t.LineTo(n.CurStartLeftPos+a-1,h+l+S),t.SetPixel(n.CurStartLeftPos+a-2,h+1,6582129),r&&(this.DrawFocusRect(t,new pas.Types.TPoint(pas.Types.Point(n.CurStartLeftPos+3,h+3)),new pas.Types.TSize(pas.Types.Size(a-8,l-6))),t.FPen.SetStyle(0),t.FPen.SetColor(n.RGBColor),t.Line(n.CurStartLeftPos+1,h+l,n.CurStartLeftPos+a-2,h+l),t.Line(n.CurStartLeftPos+1,h+l+1,n.CurStartLeftPos+a-2,h+l+1)),c=o?"+":n.Tabs.Get(n.CurTabIndex),t.TextOut(n.CurStartLeftPos+5,h+5,c),!o&&0 in n.Options&&(C.x=this.GetMeasuresEx(t,9731,rtl.refSet(s),n),C.y=this.GetMeasuresEx(t,9732,rtl.refSet(s),n),this.DrawSmallCloseButton(t,new pas.Types.TPoint(C)))}}),t.$init=function(){pas.CustomDrawnDrawers.RegisterDrawer(t.TCDDrawerCommon.$create("Create$1"),1)}},null,function(){"use strict";var t=this.$impl;t.WIN2000_FRAME_WHITE=16777215,t.WIN2000_FRAME_LIGHT_GRAY=14872561,t.WIN2000_FRAME_GRAY=10070188,t.WIN2000_FRAME_DARK_GRAY=6582129,t.WIN2000_DISABLED_TEXT=10070188,t.WIN2000_SELECTION_BACKGROUND=12937777,t.WIN2000_SCROLLBAR_BACKGROUND=15529206,t.WIN2000_LIGHTGRAY_BACKGROUND=15529206,t.WIN2000_PROGRESSBAR_BLUE=12937777,t.WIN2000_BTNFACE=14215660,t.WIN2000_FORM=14215660}),rtl.module("timer",["System","JS","Web","Classes"],function(){"use strict";rtl.createClass(this,"TTimer",pas.Classes.TComponent,function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FEnabled=!1,this.FInterval=0,this.FOnTimer=null,this.FID=0},this.$final=function(){this.FOnTimer=void 0,pas.Classes.TComponent.$final.call(this)},this.SetEnabled=function(t){t!==this.FEnabled&&(t?this.DoUpdateTimer():this.DoClearTimer(),this.FEnabled=t)},this.SetInterval=function(t){if(t!==this.FInterval)if(this.FEnabled){this.SetEnabled(!1);try{this.FInterval=t}finally{this.SetEnabled(!0)}}else this.FInterval=t},this.DoUpdateTimer=function(){this.FID=window.setInterval(rtl.createCallback(this,"DoTimer"),this.FInterval)},this.DoClearTimer=function(){0!==this.FID&&(window.clearInterval(this.FID),this.FID=0)},this.DoTimer=function(){null!=this.FOnTimer&&this.FOnTimer(this)},this.Create$1=function(t){pas.Classes.TComponent.Create$1.call(this,t),this.FEnabled=!0,this.FInterval=1e3,this.DoUpdateTimer()},this.Destroy=function(){this.SetEnabled(!1),pas.Classes.TComponent.Destroy.call(this)};var t=this.$rtti;t.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),t.addProperty("Interval",2,rtl.longint,"FInterval","SetInterval",{Default:1e3}),t.addProperty("Tag",0,rtl.nativeint,"FTag","FTag"),t.addProperty("OnTimer",0,pas.Classes.$rtti.TNotifyEvent,"FOnTimer","FOnTimer")})}),rtl.module("CustomDrawnControls",["System","Classes","SysUtils","Math","Types","Forms","Graphics","Controls","StdCtrls","ExtCtrls","ComCtrls","CustomDrawnDrawers","JS","Web","timer"],function(){"use strict";var t=this;rtl.createClass(t,"TCDControl",pas.Controls.TCustomControl,function(){this.$init=function(){pas.Controls.TCustomControl.$init.call(this),this.FDrawStyle=0,this.FDrawer=null,this.FState={},this.FStateEx=null},this.$final=function(){this.FDrawer=void 0,this.FState=void 0,this.FStateEx=void 0,pas.Controls.TCustomControl.$final.call(this)},this.SetState=function(t){rtl.neSet(t,this.FState)&&(this.FState=rtl.refSet(t),this.Invalidate())},this.PrepareCurrentDrawer=function(){var t;if(t=this.FDrawer,this.FDrawer=pas.CustomDrawnDrawers.GetDrawer(this.FDrawStyle),null===this.FDrawer&&(this.FDrawer=pas.CustomDrawnDrawers.GetDrawer(1)),null===this.FDrawer)throw pas.SysUtils.Exception.$create("Create$1",["[TCDControl.PrepareCurrentDrawer] No registered drawers were found. Please add the unit customdrawn_common to your uses clause and also the units of any other utilized drawers."]);t!==this.FDrawer&&this.FDrawer.LoadPalette()},this.SetDrawStyle=function(t){this.FDrawStyle!==t&&(this.FDrawStyle=t,this.Invalidate(),this.PrepareCurrentDrawer())},this.GetClientRect=function(){new pas.Types.TRect;return new pas.Types.TRect(pas.Controls.TControl.GetClientRect.call(this))},this.GetControlId=function(){return 0,0},this.CreateControlStateEx=function(){this.FStateEx=pas.CustomDrawnDrawers.TCDControlStateEx.$create("Create")},this.PrepareControlState=function(){this.Focused()?this.FState=rtl.unionSet(this.FState,rtl.createSet(3)):this.FState=rtl.diffSet(this.FState,rtl.createSet(3)),this.FEnabled?this.FState=rtl.unionSet(this.FState,rtl.createSet(0)):this.FState=rtl.diffSet(this.FState,rtl.createSet(0))},this.PrepareControlStateEx=function(){null!==this.FParent?this.FStateEx.ParentRGBColor=this.FParent.GetRGBColorResolvingParent():this.FStateEx.ParentRGBColor=12632256,536870912===this.FColor?this.FStateEx.RGBColor=this.FDrawer.GetControlDefaultColor(this.GetControlId()):this.FStateEx.RGBColor=this.GetRGBColorResolvingParent(),this.FStateEx.Caption=this.GetText(),this.FStateEx.Font=this.FFont,this.FStateEx.AutoSize=this.FAutoSize},this.DoEnter=function(){this.Invalidate(),pas.Controls.TWinControl.DoEnter.call(this)},this.DoExit=function(){this.Invalidate(),pas.Controls.TWinControl.DoExit.call(this)},this.MouseEnter=function(){this.FState=rtl.unionSet(this.FState,rtl.createSet(5)),pas.Controls.TControl.MouseEnter.call(this)},this.MouseLeave=function(){this.FState=rtl.diffSet(this.FState,rtl.createSet(5)),pas.Controls.TControl.MouseLeave.call(this)},this.MouseDown=function(t,e,i,s){pas.Controls.TControl.MouseDown.call(this,t,rtl.refSet(e),i,s),this.CanFocus()&&this.SetFocus()},this.Changed=function(){pas.Controls.TControl.Changed.call(this),this.IsUpdating()||this.FHandle.style.setProperty("outline","none")},this.CreateHandle=function(){return document.createElement("div")},this.Create$1=function(t){pas.Controls.TWinControl.Create$1.call(this,t),this.CreateControlStateEx(),this.PrepareCurrentDrawer()},this.Destroy=function(){rtl.free(this,"FStateEx"),pas.Controls.TCustomControl.Destroy.call(this)},this.Paint=function(){pas.Controls.TCustomControl.Paint.call(this),this.DrawToCanvas(this.GetCanvas())},this.DrawToCanvas=function(t){var e,i=new pas.Types.TSize;this.PrepareCurrentDrawer(),i=new pas.Types.TSize(pas.Types.Size(this.FWidth,this.FHeight)),e=this.GetControlId(),this.PrepareControlState(),this.PrepareControlStateEx(),this.FDrawer.DrawControl(t,new pas.Types.TPoint(pas.Types.Point(0,0)),new pas.Types.TSize(i),e,rtl.refSet(this.FState),this.FStateEx)}}),rtl.createClass(t,"TCDScrollableControl",t.TCDControl,function(){this.$init=function(){t.TCDControl.$init.call(this),this.FRightScrollBar=null,this.FBottomScrollBar=null,this.FSpacer=null,this.FScrollBars=0},this.$final=function(){this.FRightScrollBar=void 0,this.FBottomScrollBar=void 0,this.FSpacer=void 0,t.TCDControl.$final.call(this)},this.SetScrollBars=function(t){if(this.FScrollBars!==t)if(this.FScrollBars=t,0===t)this.FSpacer.SetVisible(!1),this.FRightScrollBar.SetVisible(!1),this.FBottomScrollBar.SetVisible(!1);else if(t in rtl.createSet(1,4)){this.FSpacer.SetVisible(!1),this.FRightScrollBar.SetVisible(!1),this.FBottomScrollBar.BeginUpdate();try{this.FBottomScrollBar.FBorderSpacing.SetBottom(0),this.FBottomScrollBar.SetAlign(4),this.FBottomScrollBar.SetVisible(!0)}finally{this.FBottomScrollBar.EndUpdate()}}else if(t in rtl.createSet(2,5)){this.FSpacer.SetVisible(!1),this.FRightScrollBar.BeginUpdate();try{this.FRightScrollBar.FBorderSpacing.SetBottom(0),this.FRightScrollBar.SetAlign(4),this.FRightScrollBar.SetVisible(!0),this.FBottomScrollBar.SetVisible(!1)}finally{this.FBottomScrollBar.EndUpdate()}}else{this.FSpacer.SetVisible(!0),this.FRightScrollBar.BeginUpdate();try{this.FRightScrollBar.FBorderSpacing.SetBottom(0),this.FRightScrollBar.SetAlign(4),this.FRightScrollBar.SetVisible(!0)}finally{this.FRightScrollBar.EndUpdate()}this.FBottomScrollBar.BeginUpdate();try{this.FBottomScrollBar.FBorderSpacing.SetRight(this.FBottomScrollBar.FHeight),this.FBottomScrollBar.SetAlign(2),this.FBottomScrollBar.SetVisible(!0)}finally{this.FBottomScrollBar.EndUpdate()}}},this.Create$1=function(e){var i=0;t.TCDControl.Create$1.call(this,e),this.FRightScrollBar=t.TCDScrollBar.$create("Create$1",[null]),this.FRightScrollBar.BeginUpdate();try{this.FRightScrollBar.SetParent(this),this.FRightScrollBar.SetKind(1),this.FRightScrollBar.SetVisible(!1),i=this.FRightScrollBar.FWidth,this.FRightScrollBar.SetWidth(this.FRightScrollBar.FHeight),this.FRightScrollBar.SetHeight(i)}finally{this.FRightScrollBar.EndUpdate()}this.FBottomScrollBar=t.TCDScrollBar.$create("Create$1",[null]),this.FBottomScrollBar.BeginUpdate();try{this.FBottomScrollBar.SetKind(0),this.FBottomScrollBar.SetVisible(!1),this.FBottomScrollBar.SetParent(this)}finally{this.FBottomScrollBar.EndUpdate()}this.FSpacer=t.TCDControl.$create("Create$1",[null])},this.Destroy=function(){rtl.free(this,"FRightScrollBar"),rtl.free(this,"FBottomScrollBar"),rtl.free(this,"FSpacer"),t.TCDControl.Destroy.call(this)}}),rtl.createClass(t,"TCDButtonControl",t.TCDControl,function(){this.$init=function(){t.TCDControl.$init.call(this),this.FHasOnOffStates=!1,this.FIsGrouped=!1,this.FGroupIndex=0,this.FAllowGrayed=!1},this.KeyDown=function(t,e){pas.Controls.TWinControl.KeyDown.call(this,t,rtl.refSet(e)),32!==t.get()&&13!==t.get()||this.DoButtonDown()},this.KeyUp=function(t,e){32!==t.get()&&13!==t.get()||(this.DoButtonUp(),this.Click()),pas.Controls.TWinControl.KeyUp.call(this,t,rtl.refSet(e))},this.MouseDown=function(e,i,s,n){this.DoButtonDown(),t.TCDControl.MouseDown.call(this,e,rtl.refSet(i),s,n)},this.MouseUp=function(t,e,i,s){this.DoButtonUp(),pas.Controls.TControl.MouseUp.call(this,t,rtl.refSet(e),i,s)},this.MouseEnter=function(){this.Invalidate(),t.TCDControl.MouseEnter.call(this)},this.MouseLeave=function(){this.Invalidate(),t.TCDControl.MouseLeave.call(this)},this.DoUncheckButton=function(){var t;t=rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(7)),rtl.createSet(6,8)),this.SetState(t)},this.DoCheckIfFirstButtonInGroup=function(){var e={},i=0,s=null;if(e=rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(6)),rtl.createSet(7,8)),null!==this.FParent)for(var n=0,r=this.FParent.GetControlCount()-1;n<=r;n++)if(i=n,s=this.FParent.GetControl(i),t.TCDButtonControl.isPrototypeOf(s)&&s!==this&&s.FGroupIndex===this.FGroupIndex){e=rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(7)),rtl.createSet(6,8));break}this.SetState(e)},this.DoButtonDown=function(){var t={};t=rtl.refSet(this.FState),2 in this.FState||(t=rtl.unionSet(this.FState,rtl.createSet(2))),this.SetState(t)},this.DoButtonUp=function(){var e=0,i=null,s={};if(s=rtl.refSet(this.FState),2 in this.FState&&(s=rtl.diffSet(s,rtl.createSet(2))),this.FIsGrouped){if(s=rtl.diffSet(rtl.unionSet(s,rtl.createSet(6)),rtl.createSet(7,8)),null!==this.FParent)for(var n=0,r=this.FParent.GetControlCount()-1;n<=r;n++)e=n,i=this.FParent.GetControl(e),t.TCDButtonControl.isPrototypeOf(i)&&i!==this&&i.FGroupIndex===this.FGroupIndex&&i.DoUncheckButton()}else this.FHasOnOffStates&&(s=this.FAllowGrayed?6 in this.FState?rtl.diffSet(rtl.unionSet(s,rtl.createSet(7)),rtl.createSet(6,8)):8 in this.FState?rtl.diffSet(rtl.unionSet(s,rtl.createSet(6)),rtl.createSet(7,8)):rtl.diffSet(rtl.unionSet(s,rtl.createSet(8)),rtl.createSet(6,7)):6 in this.FState?rtl.diffSet(rtl.unionSet(s,rtl.createSet(7)),rtl.createSet(6)):rtl.diffSet(rtl.unionSet(s,rtl.createSet(6)),rtl.createSet(7)));this.SetState(s)},this.RealSetText=function(t){pas.Controls.TControl.RealSetText.call(this,t),this.Invalidate()},this.GetChecked=function(){return 6 in this.FState},this.SetChecked=function(t){var e={};this.FIsGrouped&&t?this.DoButtonUp():(e=t?rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(6)),rtl.createSet(7,8)):rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(7)),rtl.createSet(6,8)),this.SetState(e))},this.GetCheckedState=function(){return 6 in this.FState?1:8 in this.FState?this.FAllowGrayed?2:1:0},this.SetCheckedState=function(t){var e={},i=t;0===i?e=rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(7)),rtl.createSet(6,8)):1===i?e=rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(6)),rtl.createSet(7,8)):2===i&&(e=this.FAllowGrayed?rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(8)),rtl.createSet(6,7)):rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(6)),rtl.createSet(7,8))),this.SetState(e)}}),rtl.createClass(t,"TCDButton",t.TCDButtonControl,function(){this.$init=function(){t.TCDButtonControl.$init.call(this),this.FModalResult=0,this.FBState=null},this.$final=function(){this.FBState=void 0,t.TCDButtonControl.$final.call(this)},this.SetModalResult=function(t){t!==this.FModalResult&&(this.FModalResult=t)},this.Click=function(){var t=null;t=pas.Forms.GetParentForm(this,!0),0!==this.FModalResult&&null!==t&&t.SetModalResult(this.FModalResult),pas.Controls.TControl.Click.call(this)},this.GetControlId=function(){return 3,3},this.CreateControlStateEx=function(){this.FBState=pas.CustomDrawnDrawers.TCDButtonStateEx.$create("Create"),this.FStateEx=this.FBState},this.PrepareControlStateEx=function(){t.TCDControl.PrepareControlStateEx.call(this)},this.Create$1=function(e){t.TCDControl.Create$1.call(this,e),this.BeginUpdate();try{this.SetTabStop(!0),this.SetWidth(75),this.SetHeight(25),this.SetParentFont(!0)}finally{this.EndUpdate()}},this.Destroy=function(){t.TCDControl.Destroy.call(this)};var e=this.$rtti;e.addProperty("Align",2,pas.Controls.$rtti.TAlign,"FAlign","SetAlign"),e.addProperty("AutoSize",2,rtl.boolean,"FAutoSize","SetAutoSize"),e.addProperty("Caption",3,pas.Controls.$rtti.TCaption,"GetText","SetText"),e.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),e.addProperty("DrawStyle",2,pas.CustomDrawnDrawers.$rtti.TCDDrawStyle,"FDrawStyle","SetDrawStyle"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled"),e.addProperty("Font",2,pas.Graphics.$rtti.TFont,"FFont","SetFont"),e.addProperty("ModalResult",2,pas.Forms.$rtti.TModalResult,"FModalResult","SetModalResult",{Default:0}),e.addProperty("OnClick",0,pas.Classes.$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnEnter",0,pas.Classes.$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,pas.Classes.$rtti.TNotifyEvent,"FOnExit","FOnExit"),e.addProperty("OnKeyDown",0,pas.Controls.$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),e.addProperty("OnKeyPress",0,pas.Controls.$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),e.addProperty("OnKeyUp",0,pas.Controls.$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),e.addProperty("OnMouseDown",0,pas.Controls.$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseEnter",0,pas.Classes.$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnMouseLeave",0,pas.Classes.$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnMouseMove",0,pas.Controls.$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseUp",0,pas.Controls.$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseWheel",0,pas.Controls.$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),e.addProperty("OnResize",0,pas.Classes.$rtti.TNotifyEvent,"FOnResize","FOnResize"),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont"),e.addProperty("ParentShowHint",2,rtl.boolean,"FParentShowHint","SetParentShowHint"),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint"),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible")}),rtl.createClass(t,"TCDEdit",t.TCDControl,function(){this.$init=function(){t.TCDControl.$init.call(this),this.DragDropStarted=!1,this.FCaretTimer=null,this.FLines=null,this.FOnChange=null,this.FReadOnly=!1,this.FEditState=null},this.$final=function(){this.FCaretTimer=void 0,this.FLines=void 0,this.FOnChange=void 0,this.FEditState=void 0,t.TCDControl.$final.call(this)},this.GetMultiLine=function(){return this.FEditState.MultiLine},this.GetText$1=function(){return this.GetMultiLine()?this.FLines.GetTextStr():0===this.FLines.GetCount()?"":this.FLines.Get(0)},this.GetPasswordChar=function(){return this.FEditState.PasswordChar},this.HandleCaretTimer=function(t){this.FEditState.EventArrived?(this.FEditState.CaretIsVisible=!0,this.FEditState.EventArrived=!1):this.FEditState.CaretIsVisible=!this.FEditState.CaretIsVisible,this.Invalidate()},this.DoDeleteSelection=function(){var t=0,e=0,i="",s="",n="";this.IsSomethingSelected()&&(t=this.FEditState.SelStart.x,this.FEditState.SelLength<0&&(t+=this.FEditState.SelLength),this.FEditState.SelStart.x,this.FEditState.SelLength>0&&this.FEditState.SelLength,(e=this.FEditState.SelLength)<0&&(e*=-1),i=this.GetCurrentLine(),s=pas.System.Copy(i,this.FEditState.VisibleTextStart.x,t-this.FEditState.VisibleTextStart.x+1),n=pas.System.Copy(i,t+e+1,i.length),this.SetCurrentLine(s+n),this.FEditState.CaretPos.x=s.length),this.DoClearSelection()},this.DoClearSelection=function(){this.FEditState.SelStart.x=1,this.FEditState.SelStart.y=0,this.FEditState.SelLength=0},this.DoManageVisibleTextStart=function(){var t,e,i,s;this.FEditState.VisibleTextStart.x=Math.min(this.FEditState.CaretPos.x+1,this.FEditState.VisibleTextStart.x),e=this.GetCurrentLine(),t=pas.System.Copy(e,this.FEditState.VisibleTextStart.x,e.length),s=this.FWidth-this.FDrawer.GetMeasures(1024)-this.FDrawer.GetMeasures(1025),i=this.GetCanvas().TextFitInfo(t,s),this.FEditState.VisibleTextStart.x=Math.max(this.FEditState.CaretPos.x-i+1,this.FEditState.VisibleTextStart.x),this.FEditState.VisibleTextStart.y=Math.min(this.FEditState.CaretPos.y,this.FEditState.VisibleTextStart.y),this.FEditState.VisibleTextStart.y=Math.max(this.FEditState.CaretPos.y-this.FEditState.FullyVisibleLinesCount,this.FEditState.VisibleTextStart.y),this.FEditState.CaretPos.x=Math.min(this.FEditState.CaretPos.x,e.length),this.FEditState.CaretPos.y=Math.min(this.FEditState.CaretPos.y,this.FEditState.Lines.GetCount()-1),this.FEditState.CaretPos.y=Math.max(this.FEditState.CaretPos.y,0)},this.SetLines=function(t){this.FLines!==t&&(this.FLines.Assign(t),this.DoChange(),this.Invalidate())},this.SetMultiLine=function(t){this.FEditState.MultiLine!==t&&(this.FEditState.MultiLine=t,this.Invalidate())},this.SetText$1=function(t){this.RealSetText(t)},this.SetPasswordChar=function(t){t!==this.FEditState.PasswordChar&&(this.FEditState.PasswordChar=t,this.Invalidate())},this.MousePosToCaretPos=function(t,e){var i,s=new pas.Types.TPoint,n=0,r="",o="",a=0,l=4294967295,h=4294967295,u=0,c=0;if(a=e-this.FDrawer.GetMeasures(1026),s.y=Math.floor(a/this.FEditState.LineHeight),s.y=Math.min(s.y,this.FEditState.FullyVisibleLinesCount),s.y=Math.min(s.y,this.FEditState.Lines.GetCount()-1),s.y<0)return s.x=1,s.y=0,s;this.GetCanvas().FFont=this.FFont,r=this.FLines.Get(s.y),r=pas.System.Copy(r,this.FEditState.VisibleTextStart.x,r.length),i=(r=pas.CustomDrawnDrawers.TCDDrawer.VisibleText(r,this.FEditState.PasswordChar)).length,a=this.FDrawer.GetMeasures(1024),c=0;for(var d=0,S=i;d<=S&&(n=d,(u=t-a)<0&&(u*=-1),u<l&&(l=u,c=n),!(u>h));d++)h=u,n!==i&&(o=pas.System.Copy(r,n+1,1),a+=this.GetCanvas().TextWidth(o));return s.x=c+(this.FEditState.VisibleTextStart.x-1),s.x=Math.min(s.x,this.FEditState.VisibleTextStart.x+i-1),s},this.IsSomethingSelected=function(){return 0!==this.FEditState.SelLength},this.GetControlId=function(){return 4,4},this.CreateControlStateEx=function(){this.FEditState=pas.CustomDrawnDrawers.TCDEditStateEx.$create("Create"),this.FStateEx=this.FEditState},this.RealSetText=function(t){pas.Controls.TControl.RealSetText.call(this,t),this.FLines.SetTextStr(t),this.Invalidate()},this.DoChange=function(){null!=this.FOnChange&&this.FOnChange(this)},this.DoEnter=function(){this.FCaretTimer.SetEnabled(!0),this.FEditState.CaretIsVisible=!0,t.TCDControl.DoEnter.call(this)},this.DoExit=function(){this.FCaretTimer.SetEnabled(!1),this.FEditState.CaretIsVisible=!1,this.DoClearSelection(),t.TCDControl.DoExit.call(this)},this.KeyDown=function(t,e){var i,s,n="",r="",o=!0;pas.Controls.TWinControl.KeyDown.call(this,t,rtl.refSet(e)),s=(i=this.GetCurrentLine()).length,this.FEditState.SelStart.y=this.FEditState.CaretPos.y;var a=t.get();if(8===a)this.IsSomethingSelected()?this.DoDeleteSelection():this.FEditState.CaretPos.x>0&&(n=pas.System.Copy(i,1,this.FEditState.CaretPos.x-1),r=pas.System.Copy(i,this.FEditState.CaretPos.x+1,s),this.SetCurrentLine(n+r),this.FEditState.CaretPos.x-=1,this.DoManageVisibleTextStart(),this.Invalidate());else if(46===a)this.IsSomethingSelected()?this.DoDeleteSelection():this.FEditState.CaretPos.x<s&&(n=pas.System.Copy(i,1,this.FEditState.CaretPos.x),r=pas.System.Copy(i,this.FEditState.CaretPos.x+2,s),this.SetCurrentLine(n+r),this.Invalidate());else if(37===a)this.FEditState.CaretPos.x>0?(rtl.eqSet(rtl.createSet(0),e)?(0===this.FEditState.SelLength&&(this.FEditState.SelStart.x=this.FEditState.CaretPos.x),this.FEditState.SelLength-=1):this.FEditState.SelLength=0,this.FEditState.CaretPos.x-=1,this.DoManageVisibleTextStart(),this.FEditState.CaretIsVisible=!0,this.Invalidate()):rtl.neSet(rtl.createSet(0),e)&&(this.FEditState.SelLength=0,this.Invalidate());else if(36===a)this.FEditState.CaretPos.x>0?(rtl.eqSet(rtl.createSet(0),e)?0===this.FEditState.SelLength?(this.FEditState.SelStart.x=this.FEditState.CaretPos.x,this.FEditState.SelLength=-1*this.FEditState.CaretPos.x):this.FEditState.SelLength=-1*this.FEditState.SelStart.x:this.FEditState.SelLength=0,this.FEditState.CaretPos.x=0,this.DoManageVisibleTextStart(),this.FEditState.CaretIsVisible=!0,this.Invalidate()):0!==this.FEditState.SelLength&&rtl.neSet(rtl.createSet(0),e)&&(this.FEditState.SelLength=0,this.Invalidate());else if(39===a)this.FEditState.CaretPos.x<s?(rtl.eqSet(rtl.createSet(0),e)?(0===this.FEditState.SelLength&&(this.FEditState.SelStart.x=this.FEditState.CaretPos.x),this.FEditState.SelLength+=1):this.FEditState.SelLength=0,this.FEditState.CaretPos.x+=1,this.DoManageVisibleTextStart(),this.FEditState.CaretIsVisible=!0,this.Invalidate()):rtl.neSet(rtl.createSet(0),e)&&(this.FEditState.SelLength=0,this.Invalidate());else if(35===a)this.FEditState.CaretPos.x<s?(rtl.eqSet(rtl.createSet(0),e)?(0===this.FEditState.SelLength&&(this.FEditState.SelStart.x=this.FEditState.CaretPos.x),this.FEditState.SelLength=s-this.FEditState.SelStart.x):this.FEditState.SelLength=0,this.FEditState.CaretPos.x=s,this.DoManageVisibleTextStart(),this.FEditState.CaretIsVisible=!0,this.Invalidate()):0!==this.FEditState.SelLength&&rtl.neSet(rtl.createSet(0),e)&&(this.FEditState.SelLength=0,this.Invalidate());else if(38===a)this.FEditState.CaretPos.y>0?(this.FEditState.SelLength=0,this.FEditState.CaretPos.y-=1,this.DoManageVisibleTextStart(),this.FEditState.CaretIsVisible=!0,this.Invalidate()):rtl.neSet(rtl.createSet(0),e)&&(this.FEditState.SelLength=0,this.Invalidate());else if(40===a)this.FEditState.CaretPos.y<this.FLines.GetCount()-1?(this.FEditState.SelLength=0,this.FEditState.CaretPos.y+=1,this.DoManageVisibleTextStart(),this.FEditState.CaretIsVisible=!0,this.Invalidate()):rtl.neSet(rtl.createSet(0),e)&&(this.FEditState.SelLength=0,this.Invalidate());else if(13===a){if(!this.GetMultiLine())return;this.IsSomethingSelected()&&this.DoDeleteSelection(),0===this.FLines.GetCount()?(this.FLines.Add(""),this.FLines.Add(""),this.FEditState.CaretPos=new pas.Types.TPoint(pas.Types.Point(0,1))):(n=pas.System.Copy(i,1,this.FEditState.CaretPos.x),r=pas.System.Copy(i,this.FEditState.CaretPos.x+1,s),this.SetCurrentLine(n),this.FLines.Insert(this.FEditState.CaretPos.y+1,r),this.FEditState.CaretPos=new pas.Types.TPoint(pas.Types.Point(0,this.FEditState.CaretPos.y+1))),this.Invalidate()}else o=!1;o&&(this.FEditState.EventArrived=!0,t.set(0))},this.KeyUp=function(t,e){if(pas.Controls.TWinControl.KeyUp.call(this,t,rtl.refSet(e)),rtl.eqSet(e,rtl.createSet(2)))t.get()},this.KeyPress=function(t){var e,i,s;pas.Controls.TWinControl.KeyPress.call(this,t),this.FReadOnly||(this.DoDeleteSelection(),s=this.GetCurrentLine(),e=pas.System.Copy(s,1,this.FEditState.CaretPos.x),i=pas.System.Copy(s,this.FEditState.CaretPos.x+1,s.length),this.SetCurrentLine(e+t.get()+i),this.FEditState.CaretPos.x+=1,this.DoManageVisibleTextStart(),this.FEditState.EventArrived=!0,this.FEditState.CaretIsVisible=!0,this.Invalidate())},this.MouseDown=function(e,i,s,n){t.TCDControl.MouseDown.call(this,e,rtl.refSet(i),s,n),this.DragDropStarted=!0,this.FEditState.CaretPos=new pas.Types.TPoint(this.MousePosToCaretPos(s,n)),this.FEditState.SelLength=0,this.FEditState.SelStart.x=this.FEditState.CaretPos.x,this.FEditState.SelStart.y=this.FEditState.CaretPos.y,this.FEditState.EventArrived=!0,this.FEditState.CaretIsVisible=!0,this.Invalidate()},this.MouseMove=function(t,e,i){pas.Controls.TControl.MouseMove.call(this,rtl.refSet(t),e,i),this.DragDropStarted&&(this.FEditState.CaretPos=new pas.Types.TPoint(this.MousePosToCaretPos(e,i)),this.FEditState.SelLength=this.FEditState.CaretPos.x-this.FEditState.SelStart.x,this.FEditState.EventArrived=!0,this.FEditState.CaretIsVisible=!0,this.Invalidate())},this.MouseUp=function(t,e,i,s){pas.Controls.TControl.MouseUp.call(this,t,rtl.refSet(e),i,s),this.DragDropStarted=!1},this.MouseEnter=function(){t.TCDControl.MouseEnter.call(this)},this.MouseLeave=function(){t.TCDControl.MouseLeave.call(this),this.DragDropStarted=!1},this.LinesChange=function(t){this.Invalidate()},this.Create$1=function(e){t.TCDControl.Create$1.call(this,e),this.FControlStyle=rtl.unionSet(rtl.diffSet(this.FControlStyle,rtl.createSet(0)),rtl.createSet(31)),this.FLines=pas.Classes.TStringList.$create("Create$1"),this.FLines.FOnChange=rtl.createCallback(this,"LinesChange"),this.FEditState.VisibleTextStart=new pas.Types.TPoint(pas.Types.Point(1,0)),this.FEditState.Lines=this.FLines,this.FCaretTimer=pas.timer.TTimer.$create("Create$1",[this]),this.FCaretTimer.FOnTimer=rtl.createCallback(this,"HandleCaretTimer"),this.FCaretTimer.SetInterval(500),this.FCaretTimer.SetEnabled(!1),this.FEditState.PasswordChar="\0",this.BeginUpdate();try{this.SetWidth(80),this.SetHeight(25),this.SetTabStop(!0)}finally{this.EndUpdate()}},this.Destroy=function(){t.TCDControl.Destroy.call(this),rtl.free(this,"FLines")},this.GetCurrentLine=function(){return 0===this.FEditState.Lines.GetCount()||this.FEditState.CaretPos.y>=this.FEditState.Lines.GetCount()?"":this.FLines.Get(this.FEditState.CaretPos.y)},this.SetCurrentLine=function(t){0===this.FEditState.Lines.GetCount()||this.FEditState.CaretPos.y>=this.FEditState.Lines.GetCount()?(this.FEditState.Lines.SetTextStr(t),this.FEditState.VisibleTextStart.x=1,this.FEditState.VisibleTextStart.y=0,this.FEditState.CaretPos.x=0,this.FEditState.CaretPos.y=0):this.FLines.Put(this.FEditState.CaretPos.y,t),this.DoChange()};var e=this.$rtti;e.addProperty("Align",2,pas.Controls.$rtti.TAlign,"FAlign","SetAlign"),e.addProperty("AutoSize",2,rtl.boolean,"FAutoSize","SetAutoSize"),e.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),e.addProperty("DrawStyle",2,pas.CustomDrawnDrawers.$rtti.TCDDrawStyle,"FDrawStyle","SetDrawStyle"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled"),e.addProperty("Lines",2,pas.Classes.$rtti.TStrings,"FLines","SetLines"),e.addProperty("MultiLine",3,rtl.boolean,"GetMultiLine","SetMultiLine",{Default:!1}),e.addProperty("PasswordChar",3,rtl.char,"GetPasswordChar","SetPasswordChar",{Default:"\0"}),e.addProperty("ReadOnly",0,rtl.boolean,"FReadOnly","FReadOnly",{Default:!1}),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("Text",7,rtl.string,"GetText$1","SetText$1"),e.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange")}),rtl.createClass(t,"TCDCheckBox",t.TCDButtonControl,function(){this.GetControlId=function(){return 5,5},this.Create$1=function(e){t.TCDControl.Create$1.call(this,e),this.FControlStyle=rtl.diffSet(this.FControlStyle,rtl.createSet(0)),this.FHasOnOffStates=!0,this.FState=rtl.unionSet(this.FState,rtl.createSet(7)),this.BeginUpdate();try{this.SetWidth(75),this.SetHeight(17),this.SetTabStop(!0),this.SetAutoSize(!0)}finally{this.EndUpdate()}},this.Destroy=function(){t.TCDControl.Destroy.call(this)};var e=this.$rtti;e.addProperty("AllowGrayed",0,rtl.boolean,"FAllowGrayed","FAllowGrayed",{Default:!1}),e.addProperty("Checked",3,rtl.boolean,"GetChecked","SetChecked",{Default:!1}),e.addProperty("DrawStyle",2,pas.CustomDrawnDrawers.$rtti.TCDDrawStyle,"FDrawStyle","SetDrawStyle"),e.addProperty("Caption",3,pas.Controls.$rtti.TCaption,"GetText","SetText"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("State",3,pas.StdCtrls.$rtti.TCheckBoxState,"GetCheckedState","SetCheckedState",{Default:pas.StdCtrls.TCheckBoxState.cbUnchecked})}),rtl.createClass(t,"TCDRadioButton",t.TCDButtonControl,function(){this.GetControlId=function(){return 6,6},this.Create$1=function(e){t.TCDControl.Create$1.call(this,e),this.FControlStyle=rtl.diffSet(this.FControlStyle,rtl.createSet(0)),this.FHasOnOffStates=!0,this.FIsGrouped=!0,this.FGroupIndex=-2,this.BeginUpdate();try{this.SetWidth(75),this.SetHeight(17),this.SetTabStop(!0),this.SetAutoSize(!0)}finally{this.EndUpdate()}this.DoCheckIfFirstButtonInGroup()},this.Destroy=function(){t.TCDControl.Destroy.call(this)};var e=this.$rtti;e.addProperty("Caption",3,pas.Controls.$rtti.TCaption,"GetText","SetText"),e.addProperty("Checked",3,rtl.boolean,"GetChecked","SetChecked",{Default:!1}),e.addProperty("DrawStyle",2,pas.CustomDrawnDrawers.$rtti.TCDDrawStyle,"FDrawStyle","SetDrawStyle"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0})}),rtl.createClass(t,"TCDPositionedControl",t.TCDControl,function(){this.$init=function(){t.TCDControl.$init.call(this),this.DragDropStarted=!1,this.FLastMouseDownPos=new pas.Types.TPoint,this.FPositionAtMouseDown=0,this.FButton={},this.FBtnClickTimer=null,this.FMax=0,this.FMin=0,this.FOnChange=null,this.FOnChangeByUser=null,this.FPageSize=0,this.FPosition=0,this.FSmallChange=0,this.FLargeChange=0,this.FPCState=null,this.FMoveByDragging=!1},this.$final=function(){this.FLastMouseDownPos=void 0,this.FButton=void 0,this.FBtnClickTimer=void 0,this.FOnChange=void 0,this.FOnChangeByUser=void 0,this.FPCState=void 0,t.TCDControl.$final.call(this)},this.SetMax=function(t){this.FMax!==t&&(this.FMax=t,t<this.FMin?this.FMax=this.FMin:this.FMax=t,this.FPosition>this.FMax&&(this.FPosition=this.FMax),0 in this.FComponentState||this.Invalidate())},this.SetMin=function(t){this.FMin!==t&&(t>this.FMax?this.FMin=this.FMax:this.FMin=t,this.FPosition<this.FMin&&(this.FPosition=this.FMin),0 in this.FComponentState||this.Invalidate())},this.SetPageSize=function(t){this.FPageSize!==t&&(this.FPageSize=t,0 in this.FComponentState||this.Invalidate())},this.SetPosition=function(t){this.FPosition!==t&&(this.FPosition=t,this.FPosition>this.FMax&&(this.FPosition=this.FMax),this.FPosition<this.FMin&&(this.FPosition=this.FMin),0 in this.FComponentState||(null!=this.FOnChange&&this.FOnChange(this),this.Invalidate()))},this.DoClickButton=function(t,e){var i=0,s=-1;i=e?this.FLargeChange:this.FSmallChange,13 in t?s=this.FPosition-i:14 in t&&(s=this.FPosition+i),s>=0&&s!==this.FPosition&&(this.SetPosition(s),null!=this.FOnChangeByUser&&this.FOnChangeByUser(this))},this.HandleBtnClickTimer=function(t){var e,i=new pas.Types.TPoint;e=rtl.refSet(this.GetButtonFromMousePos(i.x,i.y)),rtl.eqSet(e,this.FButton)&&this.DoClickButton(rtl.refSet(this.FButton),!0)},this.GetPositionFromMousePosWithMargins=function(t,e,i,s,n,r){var o=0,a=0,l=0;return o=-1,n?(a=t,l=this.FWidth):(a=e,l=this.FHeight),a>l-s?(r&&(o=this.FMax),o):a<i?(r&&(o=this.FMin),o):((o=this.FMin+Math.floor((a-i)*(this.FMax-this.FMin+1)/(l-s-i)))>this.FMax&&(o=this.FMax),o<this.FMin&&(o=this.FMin),o)},this.GetPositionDisplacementWithMargins=function(t,e,i,s,n){var r,o=0,a=0,l=0;return n?(a=e.x-t.x,l=this.FWidth):(a=e.y-t.y,l=this.FHeight),(r=(o=this.FMin+Math.floor(a*(this.FMax-this.FMin+1)/(l-s-i)))+this.FPositionAtMouseDown)>this.FMax&&(o=this.FMax-this.FPositionAtMouseDown),r<this.FMin&&(o=this.FMin-this.FPositionAtMouseDown),o},this.GetButtonFromMousePos=function(t,e){return{}},this.CreateControlStateEx=function(){this.FPCState=pas.CustomDrawnDrawers.TCDPositionedCStateEx.$create("Create"),this.FStateEx=this.FPCState},this.PrepareControlStateEx=function(){t.TCDControl.PrepareControlStateEx.call(this),this.FMin<this.FMax?this.FPCState.FloatPos=this.FPosition/(this.FMax-this.FMin):this.FPCState.FloatPos=0,this.FPCState.PosCount=this.FMax-this.FMin+1,this.FPCState.Position=this.FPosition-this.FMin,this.FMin<this.FMax?this.FPCState.FloatPageSize=this.FPageSize/(this.FMax-this.FMin):this.FPCState.FloatPageSize=1},this.KeyDown=function(t,e){var i=0;pas.Controls.TWinControl.KeyDown.call(this,t,rtl.refSet(e)),i=0,37!==t.get()&&40!==t.get()||(i=this.FPosition-this.FSmallChange),38!==t.get()&&39!==t.get()||(i=this.FPosition+this.FSmallChange),33===t.get()&&(i=this.FPosition-this.FLargeChange),34===t.get()&&(i=this.FPosition+this.FLargeChange),i>=0&&(i>this.FMax&&(i=this.FMax),i<this.FMin&&(i=this.FMin),i!==this.FPosition&&(this.SetPosition(i),null!=this.FOnChangeByUser&&this.FOnChangeByUser(this)))},this.MouseDown=function(e,i,s,n){var r=0;this.SetFocus(),this.FMoveByDragging?(this.FLastMouseDownPos=new pas.Types.TPoint(pas.Types.Point(s,n)),this.FPositionAtMouseDown=this.FPosition,this.DragDropStarted=!0):(r=this.GetPositionFromMousePos(s,n),this.DragDropStarted=!0,r>=0&&r!==this.FPosition&&(this.SetPosition(r),null!=this.FOnChangeByUser&&this.FOnChangeByUser(this))),this.FButton=rtl.refSet(this.GetButtonFromMousePos(s,n)),this.FState=rtl.unionSet(this.FState,this.FButton),rtl.neSet(this.FButton,{})&&(this.DoClickButton(rtl.refSet(this.FButton),!1),this.FBtnClickTimer.SetEnabled(!0)),t.TCDControl.MouseDown.call(this,e,rtl.refSet(i),s,n)},this.MouseMove=function(t,e,i){var s=0;this.DragDropStarted&&(this.FMoveByDragging?(s=this.FPositionAtMouseDown+this.GetPositionDisplacement(new pas.Types.TPoint(this.FLastMouseDownPos),new pas.Types.TPoint(pas.Types.Point(e,i))))!==this.FPosition&&(this.SetPosition(s),null!=this.FOnChangeByUser&&this.FOnChangeByUser(this)):(s=this.GetPositionFromMousePos(e,i))>=0&&s!==this.FPosition&&(this.SetPosition(s),null!=this.FOnChangeByUser&&this.FOnChangeByUser(this))),pas.Controls.TControl.MouseMove.call(this,rtl.refSet(t),e,i)},this.MouseUp=function(t,e,i,s){this.DragDropStarted=!1,this.FBtnClickTimer.SetEnabled(!1),this.FState=rtl.diffSet(this.FState,rtl.createSet(13,14)),this.Invalidate(),pas.Controls.TControl.MouseUp.call(this,t,rtl.refSet(e),i,s)},this.Create$1=function(e){t.TCDControl.Create$1.call(this,e),this.FSmallChange=1,this.FLargeChange=5,this.FMin=0,this.FMax=10,this.FPosition=0,this.FBtnClickTimer=pas.timer.TTimer.$create("Create$1",[null]),this.FBtnClickTimer.SetEnabled(!1),this.FBtnClickTimer.SetInterval(100),this.FBtnClickTimer.FOnTimer=rtl.createCallback(this,"HandleBtnClickTimer")},this.Destroy=function(){rtl.free(this,"FBtnClickTimer"),t.TCDControl.Destroy.call(this)};var e=this.$rtti;e.addProperty("Max",2,rtl.longint,"FMax","SetMax"),e.addProperty("Min",2,rtl.longint,"FMin","SetMin"),e.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange"),e.addProperty("OnChangeByUser",0,pas.Classes.$rtti.TNotifyEvent,"FOnChangeByUser","FOnChangeByUser"),e.addProperty("Position",2,rtl.longint,"FPosition","SetPosition")}),rtl.createClass(t,"TCDScrollBar",t.TCDPositionedControl,function(){this.$init=function(){t.TCDPositionedControl.$init.call(this),this.FKind=0},this.SetKind=function(t){this.FKind!==t&&(this.FKind=t,0 in this.FComponentState||this.Invalidate())},this.GetBorderSizes=function(t,e){t.set(this.FDrawer.GetMeasures(2305)+this.FDrawer.GetMeasures(2307)+this.FDrawer.GetMeasures(2304)),e.set(this.FDrawer.GetMeasures(2306)+this.FDrawer.GetMeasures(2308)+this.FDrawer.GetMeasures(2304))},this.GetPositionFromMousePos=function(t,e){var i=0,s=0;return this.GetBorderSizes({get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}}),this.GetPositionFromMousePosWithMargins(t,e,i,s,0===this.FKind,!1)},this.GetButtonFromMousePos=function(t,e){var i={},s=0,n=0,r=0;return i={},n=this.FDrawer.GetMeasures(2307),r=this.FDrawer.GetMeasures(2308),0===this.FKind?(s=t,n<0&&(n=this.FWidth+n),r<0&&(r=this.FWidth+r)):(s=e,n<0&&(n=this.FHeight+n),r<0&&(r=this.FHeight+r)),s>n&&s<n+this.FDrawer.GetMeasures(2304)?i=rtl.createSet(13):s>r&&s<r+this.FDrawer.GetMeasures(2304)&&(i=rtl.createSet(14)),i},this.GetPositionDisplacement=function(t,e){var i=0,s=0;return this.GetBorderSizes({get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}}),this.GetPositionDisplacementWithMargins(new pas.Types.TPoint(t),new pas.Types.TPoint(e),i,s,0===this.FKind)},this.GetControlId=function(){return 9,9},this.PrepareControlState=function(){t.TCDControl.PrepareControlState.call(this),0===this.FKind?this.FState=rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(9)),rtl.createSet(10,11,12)):this.FState=rtl.diffSet(rtl.unionSet(this.FState,rtl.createSet(10)),rtl.createSet(9,11,12))},this.Create$1=function(e){t.TCDPositionedControl.Create$1.call(this,e),this.FMax=100,this.FMoveByDragging=!0,this.BeginUpdate();try{this.SetWidth(121),this.SetHeight(17)}finally{this.EndUpdate()}},this.Destroy=function(){t.TCDPositionedControl.Destroy.call(this)};var e=this.$rtti;e.addProperty("DrawStyle",2,pas.CustomDrawnDrawers.$rtti.TCDDrawStyle,"FDrawStyle","SetDrawStyle"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled"),e.addProperty("Kind",2,pas.Forms.$rtti.TScrollBarKind,"FKind","SetKind"),e.addProperty("PageSize",2,rtl.longint,"FPageSize","SetPageSize"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0})}),rtl.createClass(t,"TCDStaticText",t.TCDControl,function(){this.GetControlId=function(){return 12,12},this.RealSetText=function(t){pas.Controls.TControl.RealSetText.call(this,t),this.Invalidate()},this.Create$1=function(e){t.TCDControl.Create$1.call(this,e),this.FControlStyle=rtl.diffSet(this.FControlStyle,rtl.createSet(0)),this.BeginUpdate();try{this.SetWidth(70),this.SetHeight(20),this.SetTabStop(!1)}finally{this.EndUpdate()}},this.Destroy=function(){t.TCDControl.Destroy.call(this)};var e=this.$rtti;e.addProperty("Caption",3,pas.Controls.$rtti.TCaption,"GetText","SetText"),e.addProperty("DrawStyle",2,pas.CustomDrawnDrawers.$rtti.TCDDrawStyle,"FDrawStyle","SetDrawStyle"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!1})}),rtl.createClass(t,"TCDListView",t.TCDScrollableControl,function(){this.$init=function(){t.TCDScrollableControl.$init.call(this),this.FColumns=null,this.FListItems=null,this.FShowColumnHeader=!1,this.FViewStyle=0,this.FLVState=null},this.$final=function(){this.FColumns=void 0,this.FListItems=void 0,this.FLVState=void 0,t.TCDScrollableControl.$final.call(this)},this.SetColumns=function(t){this.FColumns!==t&&(this.FColumns=t,0 in this.FComponentState||this.Invalidate())},this.SetShowColumnHeader=function(t){this.FShowColumnHeader!==t&&(this.FShowColumnHeader=t,0 in this.FComponentState||this.Invalidate())},this.SetViewStyle=function(t){this.FViewStyle!==t&&(this.FViewStyle=t,0 in this.FComponentState||this.Invalidate())},this.GetControlId=function(){return 15,15},this.CreateControlStateEx=function(){this.FLVState=pas.CustomDrawnDrawers.TCDListViewStateEx.$create("Create"),this.FStateEx=this.FLVState},this.PrepareControlStateEx=function(){t.TCDControl.PrepareControlStateEx.call(this),this.FLVState.Items=this.FListItems,this.FLVState.Columns=this.FColumns,this.FLVState.ViewStyle=this.FViewStyle,this.FLVState.ShowColumnHeader=this.FShowColumnHeader},this.Create$1=function(e){t.TCDScrollableControl.Create$1.call(this,e),this.FColumns=pas.ComCtrls.TListColumns.$create("Create$2",[null]),this.FListItems=pas.CustomDrawnDrawers.TCDListItems.$create("Create$1"),this.FShowColumnHeader=!0,this.BeginUpdate();try{this.SetWidth(250),this.SetHeight(150),this.SetTabStop(!0),this.SetScrollBars(3)}finally{this.EndUpdate()}},this.Destroy=function(){rtl.free(this,"FColumns"),rtl.free(this,"FListItems"),t.TCDScrollableControl.Destroy.call(this)};var e=this.$rtti;e.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("Columns",2,pas.ComCtrls.$rtti.TListColumns,"FColumns","SetColumns"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled"),e.addProperty("Items",0,pas.CustomDrawnDrawers.$rtti.TCDListItems,"FListItems",""),e.addProperty("ScrollBars",2,pas.StdCtrls.$rtti.TScrollStyle,"FScrollBars","SetScrollBars"),e.addProperty("ShowColumnHeader",2,rtl.boolean,"FShowColumnHeader","SetShowColumnHeader",{Default:!0}),e.addProperty("ViewStyle",2,pas.ComCtrls.$rtti.TViewStyle,"FViewStyle","SetViewStyle",{Default:pas.ComCtrls.TViewStyle.vsList})})}),rtl.module("WebCtrls",["System","JS","Web","Classes","SysUtils","Types","timer","Graphics","Controls","Forms"],function(){"use strict";rtl.createClass(this,"TWForm",pas.Forms.TCustomForm,function(){var t=this.$rtti;t.addProperty("ActiveControl",2,pas.Controls.$rtti.TWinControl,"FActiveControl","SetActiveControl"),t.addProperty("Align",2,pas.Controls.$rtti.TAlign,"FAlign","SetAlign"),t.addProperty("AlphaBlend",2,rtl.boolean,"FAlphaBlend","SetAlphaBlend"),t.addProperty("AlphaBlendValue",2,rtl.byte,"FAlphaBlendValue","SetAlphaBlendValue"),t.addProperty("Caption",3,pas.Controls.$rtti.TCaption,"GetText","SetText"),t.addProperty("ClientHeight",3,rtl.longint,"GetClientHeight","SetClientHeight"),t.addProperty("ClientWidth",3,rtl.longint,"GetClientWidth","SetClientWidth"),t.addProperty("Color",2,rtl.nativeuint,"FColor","SetColor"),t.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled"),t.addProperty("Font",2,pas.Graphics.$rtti.TFont,"FFont","SetFont"),t.addProperty("HandleClass",2,rtl.string,"FHandleClass","SetHandleClass"),t.addProperty("HandleId",2,rtl.string,"FHandleId","SetHandleId"),t.addProperty("KeyPreview",0,rtl.boolean,"FKeyPreview","FKeyPreview"),t.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint"),t.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible"),t.addProperty("OnActivate",0,pas.Classes.$rtti.TNotifyEvent,"FOnActivate","FOnActivate"),t.addProperty("OnClick",0,pas.Classes.$rtti.TNotifyEvent,"FOnClick","FOnClick"),t.addProperty("OnClose",0,pas.Forms.$rtti.TCloseEvent,"FOnClose","FOnClose"),t.addProperty("OnCloseQuery",0,pas.Forms.$rtti.TCloseQueryEvent,"FOnCloseQuery","FOnCloseQuery"),t.addProperty("OnCreate",0,pas.Classes.$rtti.TNotifyEvent,"FOnCreate","FOnCreate"),t.addProperty("OnDblClick",0,pas.Classes.$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),t.addProperty("OnDeactivate",0,pas.Classes.$rtti.TNotifyEvent,"FOnDeactivate","FOnDeactivate"),t.addProperty("OnDestroy",0,pas.Classes.$rtti.TNotifyEvent,"FOnDestroy","FOnDestroy"),t.addProperty("OnHide",0,pas.Classes.$rtti.TNotifyEvent,"FOnHide","FOnHide"),t.addProperty("OnKeyDown",0,pas.Controls.$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),t.addProperty("OnKeyPress",0,pas.Controls.$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),t.addProperty("OnKeyUp",0,pas.Controls.$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),t.addProperty("OnMouseDown",0,pas.Controls.$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),t.addProperty("OnMouseEnter",0,pas.Classes.$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),t.addProperty("OnMouseLeave",0,pas.Classes.$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),t.addProperty("OnMouseMove",0,pas.Controls.$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),t.addProperty("OnMouseUp",0,pas.Controls.$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),t.addProperty("OnMouseWheel",0,pas.Controls.$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),t.addProperty("OnResize",0,pas.Classes.$rtti.TNotifyEvent,"FOnResize$1","FOnResize$1"),t.addProperty("OnShow",0,pas.Classes.$rtti.TNotifyEvent,"FOnShow","FOnShow")})}),rtl.module("Unit1",["System","Classes","SysUtils","Graphics","Controls","Forms","ComCtrls","StdCtrls","CustomDrawnDrawers","CustomDrawn_Common","CustomDrawnControls","WebCtrls"],function(){"use strict";rtl.createClass(this,"TWForm1",pas.WebCtrls.TWForm,function(){this.$init=function(){pas.WebCtrls.TWForm.$init.call(this),this.CDButton1=null,this.CDButton2=null,this.CDCheckBox1=null,this.CDCheckBox2=null,this.CDEdit1=null,this.CDEdit2=null,this.CDListView1=null,this.CDRadioButton1=null,this.CDRadioButton2=null,this.CDRadioButton3=null,this.CDStaticText1=null},this.$final=function(){this.CDButton1=void 0,this.CDButton2=void 0,this.CDCheckBox1=void 0,this.CDCheckBox2=void 0,this.CDEdit1=void 0,this.CDEdit2=void 0,this.CDListView1=void 0,this.CDRadioButton1=void 0,this.CDRadioButton2=void 0,this.CDRadioButton3=void 0,this.CDStaticText1=void 0,pas.WebCtrls.TWForm.$final.call(this)},this.CDButton1Click=function(t){pas.System.Writeln("xx"),this.CDListView1.FListItems.Add(pas.SysUtils.DateTimeToStr(pas.SysUtils.Now(),!1),1,0),this.CDListView1.FListItems.Add(pas.SysUtils.DateTimeToStr(pas.SysUtils.Now(),!1),2,0)},this.FormCreate=function(t){},this.Loaded=function(){pas.Forms.TCustomForm.Loaded.call(this);try{this.SetLeft(359),this.SetHeight(634),this.SetTop(151),this.SetWidth(1128),this.SetAlphaBlend(!1),this.SetAlphaBlendValue(255),this.SetText("WForm1"),this.SetClientHeight(634),this.SetClientWidth(1128),this.FOnCreate=rtl.createCallback(this,"FormCreate"),this.CDButton1=pas.CustomDrawnControls.TCDButton.$create("Create$1",[this]),this.CDButton2=pas.CustomDrawnControls.TCDButton.$create("Create$1",[this]),this.CDEdit1=pas.CustomDrawnControls.TCDEdit.$create("Create$1",[this]),this.CDEdit2=pas.CustomDrawnControls.TCDEdit.$create("Create$1",[this]),this.CDListView1=pas.CustomDrawnControls.TCDListView.$create("Create$1",[this]),this.CDRadioButton1=pas.CustomDrawnControls.TCDRadioButton.$create("Create$1",[this]),this.CDRadioButton2=pas.CustomDrawnControls.TCDRadioButton.$create("Create$1",[this]),this.CDRadioButton3=pas.CustomDrawnControls.TCDRadioButton.$create("Create$1",[this]),this.CDStaticText1=pas.CustomDrawnControls.TCDStaticText.$create("Create$1",[this]),this.CDCheckBox1=pas.CustomDrawnControls.TCDCheckBox.$create("Create$1",[this]),this.CDCheckBox2=pas.CustomDrawnControls.TCDCheckBox.$create("Create$1",[this]),this.CDButton1.BeginUpdate();try{this.CDButton1.SetParent(this),this.CDButton1.SetLeft(51),this.CDButton1.SetHeight(48),this.CDButton1.SetTop(24),this.CDButton1.SetWidth(397),this.CDButton1.SetText("CDButton1"),this.CDButton1.SetDrawStyle(0),this.CDButton1.FOnClick=rtl.createCallback(this,"CDButton1Click"),this.CDButton1.SetTabOrder(0),this.CDButton1.SetTabStop(!0)}finally{this.CDButton1.EndUpdate()}this.CDButton2.BeginUpdate();try{this.CDButton2.SetParent(this),this.CDButton2.SetLeft(51),this.CDButton2.SetHeight(48),this.CDButton2.SetTop(80),this.CDButton2.SetWidth(397),this.CDButton2.SetText("CDButton2"),this.CDButton2.SetDrawStyle(0),this.CDButton2.SetTabOrder(1),this.CDButton2.SetTabStop(!0)}finally{this.CDButton2.EndUpdate()}this.CDEdit1.BeginUpdate();try{this.CDEdit1.SetParent(this),this.CDEdit1.SetLeft(51),this.CDEdit1.SetHeight(41),this.CDEdit1.SetTop(144),this.CDEdit1.SetWidth(193),this.CDEdit1.SetDrawStyle(0),this.CDEdit1.FLines.Add("gsfgsfgsfg")}finally{this.CDEdit1.EndUpdate()}this.CDEdit2.BeginUpdate();try{this.CDEdit2.SetParent(this),this.CDEdit2.SetLeft(51),this.CDEdit2.SetHeight(41),this.CDEdit2.SetTop(224),this.CDEdit2.SetWidth(193),this.CDEdit2.SetDrawStyle(0),this.CDEdit2.FLines.Add("CDEdit1")}finally{this.CDEdit2.EndUpdate()}this.CDListView1.BeginUpdate();try{this.CDListView1.SetParent(this),this.CDListView1.SetLeft(296),this.CDListView1.SetHeight(190),this.CDListView1.SetTop(176),this.CDListView1.SetWidth(664);var t=this.CDListView1.FColumns.Add$1(),e=this.CDListView1.FColumns.GetItem$1(t.FID);e.SetCaption("Coluna"),e.SetWidth(300);var i=this.CDListView1.FColumns.Add$1(),s=this.CDListView1.FColumns.GetItem$1(i.FID);s.SetCaption("Colun2"),s.SetWidth(166),this.CDListView1.SetScrollBars(3),this.CDListView1.SetViewStyle(3)}finally{this.CDListView1.EndUpdate()}this.CDRadioButton1.BeginUpdate();try{this.CDRadioButton1.SetParent(this),this.CDRadioButton1.SetLeft(666),this.CDRadioButton1.SetHeight(19),this.CDRadioButton1.SetTop(17),this.CDRadioButton1.SetWidth(147),this.CDRadioButton1.SetText("CDRadioButton1"),this.CDRadioButton1.SetDrawStyle(0)}finally{this.CDRadioButton1.EndUpdate()}this.CDRadioButton2.BeginUpdate();try{this.CDRadioButton2.SetParent(this),this.CDRadioButton2.SetLeft(666),this.CDRadioButton2.SetHeight(19),this.CDRadioButton2.SetTop(40),this.CDRadioButton2.SetWidth(147),this.CDRadioButton2.SetText("CDRadioButton2"),this.CDRadioButton2.SetDrawStyle(0)}finally{this.CDRadioButton2.EndUpdate()}this.CDRadioButton3.BeginUpdate();try{this.CDRadioButton3.SetParent(this),this.CDRadioButton3.SetLeft(664),this.CDRadioButton3.SetHeight(19),this.CDRadioButton3.SetTop(64),this.CDRadioButton3.SetWidth(147),this.CDRadioButton3.SetText("CDRadioButton3"),this.CDRadioButton3.SetChecked(!0),this.CDRadioButton3.SetDrawStyle(0)}finally{this.CDRadioButton3.EndUpdate()}this.CDStaticText1.BeginUpdate();try{this.CDStaticText1.SetParent(this),this.CDStaticText1.SetLeft(136),this.CDStaticText1.SetHeight(20),this.CDStaticText1.SetTop(328),this.CDStaticText1.SetWidth(120),this.CDStaticText1.SetText("CDStaticText1"),this.CDStaticText1.SetDrawStyle(0)}finally{this.CDStaticText1.EndUpdate()}this.CDCheckBox1.BeginUpdate();try{this.CDCheckBox1.SetParent(this),this.CDCheckBox1.SetLeft(544),this.CDCheckBox1.SetHeight(19),this.CDCheckBox1.SetTop(112),this.CDCheckBox1.SetWidth(120),this.CDCheckBox1.SetDrawStyle(0),this.CDCheckBox1.SetText("CDCheckBox1")}finally{this.CDCheckBox1.EndUpdate()}this.CDCheckBox2.BeginUpdate();try{this.CDCheckBox2.SetParent(this),this.CDCheckBox2.SetLeft(544),this.CDCheckBox2.SetHeight(19),this.CDCheckBox2.SetTop(140),this.CDCheckBox2.SetWidth(120),this.CDCheckBox2.SetDrawStyle(0),this.CDCheckBox2.SetText("CDCheckBox2")}finally{this.CDCheckBox2.EndUpdate()}}finally{this.EndUpdate()}}}),this.WForm1=null}),rtl.module("program",["System","Forms","Unit1"],function(){"use strict";this.$main=function(){pas.Forms.Application().Initialize(),pas.Forms.Application().CreateForm(pas.Unit1.TWForm1,{p:pas.Unit1,get:function(){return this.p.WForm1},set:function(t){this.p.WForm1=t}}),pas.Forms.Application().Run()}});
